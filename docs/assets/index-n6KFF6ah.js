(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const c of h.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(u){if(u.ep)return;u.ep=!0;const h=o(u);fetch(u.href,h)}})();const $={selectedBeach:null,closestTideStation:null,selectedDate:new Date().toISOString().split("T")[0],currentWindSpeed:0,currentWindDirectionDeg:null,currentWaveHeight:0,currentSeaTemperature:0,currentWavePeriod:0,currentWavePower:null,tideData:{},sunriseTime:null,sunsetTime:null};function _l(e,i){if(!e||!i||e.length<2||i.length<2)return 1/0;const o=v=>v*(Math.PI/180),a=6371,u=o(i[0]-e[0]),h=o(i[1]-e[1]),c=o(e[0]),d=o(i[0]),m=Math.sin(u/2)**2+Math.sin(h/2)**2*Math.cos(c)*Math.cos(d),p=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return a*p}function gl(e,i){let o=null,a=1/0;return Object.entries(i).forEach(([u,h])=>{const c=_l(e,h);c<a&&(a=c,o=u)}),o}function Zs(e,i){let o;return(...a)=>{clearTimeout(o),o=setTimeout(()=>e(...a),i)}}async function gr(e,i={},o=3,a=1e3){for(let u=0;u<=o;u++)try{const h=await fetch(e,i);if(!h.ok)throw new Error(`HTTP ${h.status}`);return h}catch(h){if(u===o)throw h;await new Promise(c=>setTimeout(c,a*Math.pow(2,u)))}}function vl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var an={exports:{}};var yl=an.exports,Yo;function wl(){return Yo||(Yo=1,(function(e,i){(function(o,a){a(i)})(yl,(function(o){var a="1.9.4";function u(t){var n,r,s,l;for(r=1,s=arguments.length;r<s;r++){l=arguments[r];for(n in l)t[n]=l[n]}return t}var h=Object.create||(function(){function t(){}return function(n){return t.prototype=n,new t}})();function c(t,n){var r=Array.prototype.slice;if(t.bind)return t.bind.apply(t,r.call(arguments,1));var s=r.call(arguments,2);return function(){return t.apply(n,s.length?s.concat(r.call(arguments)):arguments)}}var d=0;function m(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function p(t,n,r){var s,l,f,g;return g=function(){s=!1,l&&(f.apply(r,l),l=!1)},f=function(){s?l=arguments:(t.apply(r,arguments),setTimeout(g,n),s=!0)},f}function v(t,n,r){var s=n[1],l=n[0],f=s-l;return t===s&&r?t:((t-l)%f+f)%f+l}function _(){return!1}function y(t,n){if(n===!1)return t;var r=Math.pow(10,n===void 0?6:n);return Math.round(t*r)/r}function b(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function E(t){return b(t).split(/\s+/)}function T(t,n){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?h(t.options):{});for(var r in n)t.options[r]=n[r];return t.options}function k(t,n,r){var s=[];for(var l in t)s.push(encodeURIComponent(r?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!n||n.indexOf("?")===-1?"?":"&")+s.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function R(t,n){return t.replace(z,function(r,s){var l=n[s];if(l===void 0)throw new Error("No value provided for variable "+r);return typeof l=="function"&&(l=l(n)),l})}var I=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Z(t,n){for(var r=0;r<t.length;r++)if(t[r]===n)return r;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function S(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var O=0;function st(t){var n=+new Date,r=Math.max(0,16-(n-O));return O=n+r,window.setTimeout(t,r)}var nt=window.requestAnimationFrame||S("RequestAnimationFrame")||st,ht=window.cancelAnimationFrame||S("CancelAnimationFrame")||S("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function W(t,n,r){if(r&&nt===st)t.call(n);else return nt.call(window,c(t,n))}function P(t){t&&ht.call(window,t)}var q={__proto__:null,extend:u,create:h,bind:c,get lastId(){return d},stamp:m,throttle:p,wrapNum:v,falseFn:_,formatNum:y,trim:b,splitWords:E,setOptions:T,getParamString:k,template:R,isArray:I,indexOf:Z,emptyImageUrl:V,requestFn:nt,cancelFn:ht,requestAnimFrame:W,cancelAnimFrame:P};function H(){}H.extend=function(t){var n=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,s=h(r);s.constructor=n,n.prototype=s;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(n[l]=this[l]);return t.statics&&u(n,t.statics),t.includes&&(Q(t.includes),u.apply(null,[s].concat(t.includes))),u(s,t),delete s.statics,delete s.includes,s.options&&(s.options=r.options?h(r.options):{},u(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,g=s._initHooks.length;f<g;f++)s._initHooks[f].call(this)}},n},H.include=function(t){var n=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},H.mergeOptions=function(t){return u(this.prototype.options,t),this},H.addInitHook=function(t){var n=Array.prototype.slice.call(arguments,1),r=typeof t=="function"?t:function(){this[t].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function Q(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=I(t)?t:[t];for(var n=0;n<t.length;n++)t[n]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var at={on:function(t,n,r){if(typeof t=="object")for(var s in t)this._on(s,t[s],n);else{t=E(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],n,r)}return this},off:function(t,n,r){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],n);else{t=E(t);for(var l=arguments.length===1,f=0,g=t.length;f<g;f++)l?this._off(t[f]):this._off(t[f],n,r)}return this},_on:function(t,n,r,s){if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}if(this._listens(t,n,r)===!1){r===this&&(r=void 0);var l={fn:n,ctx:r};s&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,n,r){var s,l,f;if(this._events&&(s=this._events[t],!!s)){if(arguments.length===1){if(this._firingCount)for(l=0,f=s.length;l<f;l++)s[l].fn=_;delete this._events[t];return}if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}var g=this._listens(t,n,r);if(g!==!1){var w=s[g];this._firingCount&&(w.fn=_,this._events[t]=s=s.slice()),s.splice(g,1)}}},fire:function(t,n,r){if(!this.listens(t,r))return this;var s=u({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var f=0,g=l.length;f<g;f++){var w=l[f],x=w.fn;w.once&&this.off(t,x,w.ctx),x.call(w.ctx||this,s)}this._firingCount--}}return r&&this._propagateEvent(s),this},listens:function(t,n,r,s){typeof t!="string"&&console.warn('"string" type argument expected');var l=n;typeof n!="function"&&(s=!!n,l=void 0,r=void 0);var f=this._events&&this._events[t];if(f&&f.length&&this._listens(t,l,r)!==!1)return!0;if(s){for(var g in this._eventParents)if(this._eventParents[g].listens(t,n,r,s))return!0}return!1},_listens:function(t,n,r){if(!this._events)return!1;var s=this._events[t]||[];if(!n)return!!s.length;r===this&&(r=void 0);for(var l=0,f=s.length;l<f;l++)if(s[l].fn===n&&s[l].ctx===r)return l;return!1},once:function(t,n,r){if(typeof t=="object")for(var s in t)this._on(s,t[s],n,!0);else{t=E(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],n,r,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[m(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[m(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};at.addEventListener=at.on,at.removeEventListener=at.clearAllEventListeners=at.off,at.addOneTimeEventListener=at.once,at.fireEvent=at.fire,at.hasEventListeners=at.listens;var it=H.extend(at);function N(t,n,r){this.x=r?Math.round(t):t,this.y=r?Math.round(n):n}var dt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(t){return this.clone()._add(B(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(B(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new N(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new N(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=dt(this.x),this.y=dt(this.y),this},distanceTo:function(t){t=B(t);var n=t.x-this.x,r=t.y-this.y;return Math.sqrt(n*n+r*r)},equals:function(t){return t=B(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=B(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function B(t,n,r){return t instanceof N?t:I(t)?new N(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new N(t.x,t.y):new N(t,n,r)}function et(t,n){if(t)for(var r=n?[t,n]:t,s=0,l=r.length;s<l;s++)this.extend(r[s])}et.prototype={extend:function(t){var n,r;if(!t)return this;if(t instanceof N||typeof t[0]=="number"||"x"in t)n=r=B(t);else if(t=vt(t),n=t.min,r=t.max,!n||!r)return this;return!this.min&&!this.max?(this.min=n.clone(),this.max=r.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this},getCenter:function(t){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var n,r;return typeof t[0]=="number"||t instanceof N?t=B(t):t=vt(t),t instanceof et?(n=t.min,r=t.max):n=r=t,n.x>=this.min.x&&r.x<=this.max.x&&n.y>=this.min.y&&r.y<=this.max.y},intersects:function(t){t=vt(t);var n=this.min,r=this.max,s=t.min,l=t.max,f=l.x>=n.x&&s.x<=r.x,g=l.y>=n.y&&s.y<=r.y;return f&&g},overlaps:function(t){t=vt(t);var n=this.min,r=this.max,s=t.min,l=t.max,f=l.x>n.x&&s.x<r.x,g=l.y>n.y&&s.y<r.y;return f&&g},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var n=this.min,r=this.max,s=Math.abs(n.x-r.x)*t,l=Math.abs(n.y-r.y)*t;return vt(B(n.x-s,n.y-l),B(r.x+s,r.y+l))},equals:function(t){return t?(t=vt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function vt(t,n){return!t||t instanceof et?t:new et(t,n)}function wt(t,n){if(t)for(var r=n?[t,n]:t,s=0,l=r.length;s<l;s++)this.extend(r[s])}wt.prototype={extend:function(t){var n=this._southWest,r=this._northEast,s,l;if(t instanceof ut)s=t,l=t;else if(t instanceof wt){if(s=t._southWest,l=t._northEast,!s||!l)return this}else return t?this.extend(J(t)||mt(t)):this;return!n&&!r?(this._southWest=new ut(s.lat,s.lng),this._northEast=new ut(l.lat,l.lng)):(n.lat=Math.min(s.lat,n.lat),n.lng=Math.min(s.lng,n.lng),r.lat=Math.max(l.lat,r.lat),r.lng=Math.max(l.lng,r.lng)),this},pad:function(t){var n=this._southWest,r=this._northEast,s=Math.abs(n.lat-r.lat)*t,l=Math.abs(n.lng-r.lng)*t;return new wt(new ut(n.lat-s,n.lng-l),new ut(r.lat+s,r.lng+l))},getCenter:function(){return new ut((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ut(this.getNorth(),this.getWest())},getSouthEast:function(){return new ut(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ut||"lat"in t?t=J(t):t=mt(t);var n=this._southWest,r=this._northEast,s,l;return t instanceof wt?(s=t.getSouthWest(),l=t.getNorthEast()):s=l=t,s.lat>=n.lat&&l.lat<=r.lat&&s.lng>=n.lng&&l.lng<=r.lng},intersects:function(t){t=mt(t);var n=this._southWest,r=this._northEast,s=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>=n.lat&&s.lat<=r.lat,g=l.lng>=n.lng&&s.lng<=r.lng;return f&&g},overlaps:function(t){t=mt(t);var n=this._southWest,r=this._northEast,s=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>n.lat&&s.lat<r.lat,g=l.lng>n.lng&&s.lng<r.lng;return f&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,n){return t?(t=mt(t),this._southWest.equals(t.getSouthWest(),n)&&this._northEast.equals(t.getNorthEast(),n)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function mt(t,n){return t instanceof wt?t:new wt(t,n)}function ut(t,n,r){if(isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n,r!==void 0&&(this.alt=+r)}ut.prototype={equals:function(t,n){if(!t)return!1;t=J(t);var r=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return r<=(n===void 0?1e-9:n)},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return Ut.distance(this,J(t))},wrap:function(){return Ut.wrapLatLng(this)},toBounds:function(t){var n=180*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return mt([this.lat-n,this.lng-r],[this.lat+n,this.lng+r])},clone:function(){return new ut(this.lat,this.lng,this.alt)}};function J(t,n,r){return t instanceof ut?t:I(t)&&typeof t[0]!="object"?t.length===3?new ut(t[0],t[1],t[2]):t.length===2?new ut(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ut(t.lat,"lng"in t?t.lng:t.lon,t.alt):n===void 0?null:new ut(t,n,r)}var Ot={latLngToPoint:function(t,n){var r=this.projection.project(t),s=this.scale(n);return this.transformation._transform(r,s)},pointToLatLng:function(t,n){var r=this.scale(n),s=this.transformation.untransform(t,r);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var n=this.projection.bounds,r=this.scale(t),s=this.transformation.transform(n.min,r),l=this.transformation.transform(n.max,r);return new et(s,l)},infinite:!1,wrapLatLng:function(t){var n=this.wrapLng?v(t.lng,this.wrapLng,!0):t.lng,r=this.wrapLat?v(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new ut(r,n,s)},wrapLatLngBounds:function(t){var n=t.getCenter(),r=this.wrapLatLng(n),s=n.lat-r.lat,l=n.lng-r.lng;if(s===0&&l===0)return t;var f=t.getSouthWest(),g=t.getNorthEast(),w=new ut(f.lat-s,f.lng-l),x=new ut(g.lat-s,g.lng-l);return new wt(w,x)}},Ut=u({},Ot,{wrapLng:[-180,180],R:6371e3,distance:function(t,n){var r=Math.PI/180,s=t.lat*r,l=n.lat*r,f=Math.sin((n.lat-t.lat)*r/2),g=Math.sin((n.lng-t.lng)*r/2),w=f*f+Math.cos(s)*Math.cos(l)*g*g,x=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return this.R*x}}),D=6378137,G={R:D,MAX_LATITUDE:85.0511287798,project:function(t){var n=Math.PI/180,r=this.MAX_LATITUDE,s=Math.max(Math.min(r,t.lat),-r),l=Math.sin(s*n);return new N(this.R*t.lng*n,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var n=180/Math.PI;return new ut((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*n,t.x*n/this.R)},bounds:(function(){var t=D*Math.PI;return new et([-t,-t],[t,t])})()};function j(t,n,r,s){if(I(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=n,this._c=r,this._d=s}j.prototype={transform:function(t,n){return this._transform(t.clone(),n)},_transform:function(t,n){return n=n||1,t.x=n*(this._a*t.x+this._b),t.y=n*(this._c*t.y+this._d),t},untransform:function(t,n){return n=n||1,new N((t.x/n-this._b)/this._a,(t.y/n-this._d)/this._c)}};function C(t,n,r,s){return new j(t,n,r,s)}var xt=u({},Ut,{code:"EPSG:3857",projection:G,transformation:(function(){var t=.5/(Math.PI*G.R);return C(t,.5,-t,.5)})()}),lt=u({},xt,{code:"EPSG:900913"});function Pt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ct(t,n){var r="",s,l,f,g,w,x;for(s=0,f=t.length;s<f;s++){for(w=t[s],l=0,g=w.length;l<g;l++)x=w[l],r+=(l?"L":"M")+x.x+" "+x.y;r+=n?F.svg?"z":"x":""}return r||"M0 0"}var Nt=document.documentElement.style,le="ActiveXObject"in window,Ya=le&&!document.addEventListener,Fr="msLaunchUri"in navigator&&!("documentMode"in document),mi=$t("webkit"),Rr=$t("android"),Hr=$t("android 2")||$t("android 3"),Ga=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xa=Rr&&$t("Google")&&Ga<537&&!("AudioNode"in window),pi=!!window.opera,Wr=!Fr&&$t("chrome"),Ur=$t("gecko")&&!mi&&!pi&&!le,Ka=!Wr&&$t("safari"),$r=$t("phantom"),qr="OTransition"in Nt,Ja=navigator.platform.indexOf("Win")===0,Vr=le&&"transition"in Nt,_i="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Hr,Yr="MozPerspective"in Nt,ja=!window.L_DISABLE_3D&&(Vr||_i||Yr)&&!qr&&!$r,We=typeof orientation<"u"||$t("mobile"),Qa=We&&mi,tu=We&&_i,Gr=!window.PointerEvent&&window.MSPointerEvent,Xr=!!(window.PointerEvent||Gr),Kr="ontouchstart"in window||!!window.TouchEvent,eu=!window.L_NO_TOUCH&&(Kr||Xr),nu=We&&pi,iu=We&&Ur,ru=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ou=(function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_,n),window.removeEventListener("testPassiveEventSupport",_,n)}catch{}return t})(),su=(function(){return!!document.createElement("canvas").getContext})(),gi=!!(document.createElementNS&&Pt("svg").createSVGRect),au=!!gi&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),uu=!gi&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch{return!1}})(),lu=navigator.platform.indexOf("Mac")===0,hu=navigator.platform.indexOf("Linux")===0;function $t(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var F={ie:le,ielt9:Ya,edge:Fr,webkit:mi,android:Rr,android23:Hr,androidStock:Xa,opera:pi,chrome:Wr,gecko:Ur,safari:Ka,phantom:$r,opera12:qr,win:Ja,ie3d:Vr,webkit3d:_i,gecko3d:Yr,any3d:ja,mobile:We,mobileWebkit:Qa,mobileWebkit3d:tu,msPointer:Gr,pointer:Xr,touch:eu,touchNative:Kr,mobileOpera:nu,mobileGecko:iu,retina:ru,passiveEvents:ou,canvas:su,svg:gi,vml:uu,inlineSvg:au,mac:lu,linux:hu},Jr=F.msPointer?"MSPointerDown":"pointerdown",jr=F.msPointer?"MSPointerMove":"pointermove",Qr=F.msPointer?"MSPointerUp":"pointerup",to=F.msPointer?"MSPointerCancel":"pointercancel",vi={touchstart:Jr,touchmove:jr,touchend:Qr,touchcancel:to},eo={touchstart:_u,touchmove:vn,touchend:vn,touchcancel:vn},Te={},no=!1;function cu(t,n,r){return n==="touchstart"&&pu(),eo[n]?(r=eo[n].bind(this,r),t.addEventListener(vi[n],r,!1),r):(console.warn("wrong event specified:",n),_)}function fu(t,n,r){if(!vi[n]){console.warn("wrong event specified:",n);return}t.removeEventListener(vi[n],r,!1)}function du(t){Te[t.pointerId]=t}function mu(t){Te[t.pointerId]&&(Te[t.pointerId]=t)}function io(t){delete Te[t.pointerId]}function pu(){no||(document.addEventListener(Jr,du,!0),document.addEventListener(jr,mu,!0),document.addEventListener(Qr,io,!0),document.addEventListener(to,io,!0),no=!0)}function vn(t,n){if(n.pointerType!==(n.MSPOINTER_TYPE_MOUSE||"mouse")){n.touches=[];for(var r in Te)n.touches.push(Te[r]);n.changedTouches=[n],t(n)}}function _u(t,n){n.MSPOINTER_TYPE_TOUCH&&n.pointerType===n.MSPOINTER_TYPE_TOUCH&&Mt(n),vn(t,n)}function gu(t){var n={},r,s;for(s in t)r=t[s],n[s]=r&&r.bind?r.bind(t):r;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}var vu=200;function yu(t,n){t.addEventListener("dblclick",n);var r=0,s;function l(f){if(f.detail!==1){s=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var g=uo(f);if(!(g.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!g.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var w=Date.now();w-r<=vu?(s++,s===2&&n(gu(f))):s=1,r=w}}}return t.addEventListener("click",l),{dblclick:n,simDblclick:l}}function wu(t,n){t.removeEventListener("dblclick",n.dblclick),t.removeEventListener("click",n.simDblclick)}var yi=xn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ue=xn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ro=Ue==="webkitTransition"||Ue==="OTransition"?Ue+"End":"transitionend";function oo(t){return typeof t=="string"?document.getElementById(t):t}function $e(t,n){var r=t.style[n]||t.currentStyle&&t.currentStyle[n];if((!r||r==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);r=s?s[n]:null}return r==="auto"?null:r}function rt(t,n,r){var s=document.createElement(t);return s.className=n||"",r&&r.appendChild(s),s}function ft(t){var n=t.parentNode;n&&n.removeChild(t)}function yn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Le(t){var n=t.parentNode;n&&n.lastChild!==t&&n.appendChild(t)}function Me(t){var n=t.parentNode;n&&n.firstChild!==t&&n.insertBefore(t,n.firstChild)}function wi(t,n){if(t.classList!==void 0)return t.classList.contains(n);var r=wn(t);return r.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(r)}function X(t,n){if(t.classList!==void 0)for(var r=E(n),s=0,l=r.length;s<l;s++)t.classList.add(r[s]);else if(!wi(t,n)){var f=wn(t);xi(t,(f?f+" ":"")+n)}}function pt(t,n){t.classList!==void 0?t.classList.remove(n):xi(t,b((" "+wn(t)+" ").replace(" "+n+" "," ")))}function xi(t,n){t.className.baseVal===void 0?t.className=n:t.className.baseVal=n}function wn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Dt(t,n){"opacity"in t.style?t.style.opacity=n:"filter"in t.style&&xu(t,n)}function xu(t,n){var r=!1,s="DXImageTransform.Microsoft.Alpha";try{r=t.filters.item(s)}catch{if(n===1)return}n=Math.round(n*100),r?(r.Enabled=n!==100,r.Opacity=n):t.style.filter+=" progid:"+s+"(opacity="+n+")"}function xn(t){for(var n=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in n)return t[r];return!1}function he(t,n,r){var s=n||new N(0,0);t.style[yi]=(F.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(r?" scale("+r+")":"")}function _t(t,n){t._leaflet_pos=n,F.any3d?he(t,n):(t.style.left=n.x+"px",t.style.top=n.y+"px")}function ce(t){return t._leaflet_pos||new N(0,0)}var qe,Ve,bi;if("onselectstart"in document)qe=function(){Y(window,"selectstart",Mt)},Ve=function(){ct(window,"selectstart",Mt)};else{var Ye=xn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qe=function(){if(Ye){var t=document.documentElement.style;bi=t[Ye],t[Ye]="none"}},Ve=function(){Ye&&(document.documentElement.style[Ye]=bi,bi=void 0)}}function Ti(){Y(window,"dragstart",Mt)}function Li(){ct(window,"dragstart",Mt)}var bn,Mi;function Pi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Tn(),bn=t,Mi=t.style.outlineStyle,t.style.outlineStyle="none",Y(window,"keydown",Tn))}function Tn(){bn&&(bn.style.outlineStyle=Mi,bn=void 0,Mi=void 0,ct(window,"keydown",Tn))}function so(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Ci(t){var n=t.getBoundingClientRect();return{x:n.width/t.offsetWidth||1,y:n.height/t.offsetHeight||1,boundingClientRect:n}}var bu={__proto__:null,TRANSFORM:yi,TRANSITION:Ue,TRANSITION_END:ro,get:oo,getStyle:$e,create:rt,remove:ft,empty:yn,toFront:Le,toBack:Me,hasClass:wi,addClass:X,removeClass:pt,setClass:xi,getClass:wn,setOpacity:Dt,testProp:xn,setTransform:he,setPosition:_t,getPosition:ce,get disableTextSelection(){return qe},get enableTextSelection(){return Ve},disableImageDrag:Ti,enableImageDrag:Li,preventOutline:Pi,restoreOutline:Tn,getSizedParentNode:so,getScale:Ci};function Y(t,n,r,s){if(n&&typeof n=="object")for(var l in n)Ei(t,l,n[l],r);else{n=E(n);for(var f=0,g=n.length;f<g;f++)Ei(t,n[f],r,s)}return this}var qt="_leaflet_events";function ct(t,n,r,s){if(arguments.length===1)ao(t),delete t[qt];else if(n&&typeof n=="object")for(var l in n)ki(t,l,n[l],r);else if(n=E(n),arguments.length===2)ao(t,function(w){return Z(n,w)!==-1});else for(var f=0,g=n.length;f<g;f++)ki(t,n[f],r,s);return this}function ao(t,n){for(var r in t[qt]){var s=r.split(/\d/)[0];(!n||n(s))&&ki(t,s,null,null,r)}}var Si={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ei(t,n,r,s){var l=n+m(r)+(s?"_"+m(s):"");if(t[qt]&&t[qt][l])return this;var f=function(w){return r.call(s||t,w||window.event)},g=f;!F.touchNative&&F.pointer&&n.indexOf("touch")===0?f=cu(t,n,f):F.touch&&n==="dblclick"?f=yu(t,f):"addEventListener"in t?n==="touchstart"||n==="touchmove"||n==="wheel"||n==="mousewheel"?t.addEventListener(Si[n]||n,f,F.passiveEvents?{passive:!1}:!1):n==="mouseenter"||n==="mouseleave"?(f=function(w){w=w||window.event,Di(t,w)&&g(w)},t.addEventListener(Si[n],f,!1)):t.addEventListener(n,g,!1):t.attachEvent("on"+n,f),t[qt]=t[qt]||{},t[qt][l]=f}function ki(t,n,r,s,l){l=l||n+m(r)+(s?"_"+m(s):"");var f=t[qt]&&t[qt][l];if(!f)return this;!F.touchNative&&F.pointer&&n.indexOf("touch")===0?fu(t,n,f):F.touch&&n==="dblclick"?wu(t,f):"removeEventListener"in t?t.removeEventListener(Si[n]||n,f,!1):t.detachEvent("on"+n,f),t[qt][l]=null}function fe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ai(t){return Ei(t,"wheel",fe),this}function Ge(t){return Y(t,"mousedown touchstart dblclick contextmenu",fe),t._leaflet_disable_click=!0,this}function Mt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function de(t){return Mt(t),fe(t),this}function uo(t){if(t.composedPath)return t.composedPath();for(var n=[],r=t.target;r;)n.push(r),r=r.parentNode;return n}function lo(t,n){if(!n)return new N(t.clientX,t.clientY);var r=Ci(n),s=r.boundingClientRect;return new N((t.clientX-s.left)/r.x-n.clientLeft,(t.clientY-s.top)/r.y-n.clientTop)}var Tu=F.linux&&F.chrome?window.devicePixelRatio:F.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ho(t){return F.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Tu:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Di(t,n){var r=n.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t}var Lu={__proto__:null,on:Y,off:ct,stopPropagation:fe,disableScrollPropagation:Ai,disableClickPropagation:Ge,preventDefault:Mt,stop:de,getPropagationPath:uo,getMousePosition:lo,getWheelDelta:ho,isExternalTarget:Di,addListener:Y,removeListener:ct},co=it.extend({run:function(t,n,r,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=ce(t),this._offset=n.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=W(this._animate,this),this._step()},_step:function(t){var n=+new Date-this._startTime,r=this._duration*1e3;n<r?this._runFrame(this._easeOut(n/r),t):(this._runFrame(1),this._complete())},_runFrame:function(t,n){var r=this._startPos.add(this._offset.multiplyBy(t));n&&r._round(),_t(this._el,r),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),tt=it.extend({options:{crs:xt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,n){n=T(this,n),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),n.maxBounds&&this.setMaxBounds(n.maxBounds),n.zoom!==void 0&&(this._zoom=this._limitZoom(n.zoom)),n.center&&n.zoom!==void 0&&this.setView(J(n.center),n.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ue&&F.any3d&&!F.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Y(this._proxy,ro,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,r){if(n=n===void 0?this._zoom:this._limitZoom(n),t=this._limitCenter(J(t),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=u({animate:r.animate},r.zoom),r.pan=u({animate:r.animate,duration:r.duration},r.pan));var s=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,r.zoom):this._tryAnimatedPan(t,r.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,n,r.pan&&r.pan.noMoveStart),this},setZoom:function(t,n){return this._loaded?this.setView(this.getCenter(),t,{zoom:n}):(this._zoom=t,this)},zoomIn:function(t,n){return t=t||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,n)},zoomOut:function(t,n){return t=t||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,n)},setZoomAround:function(t,n,r){var s=this.getZoomScale(n),l=this.getSize().divideBy(2),f=t instanceof N?t:this.latLngToContainerPoint(t),g=f.subtract(l).multiplyBy(1-1/s),w=this.containerPointToLatLng(l.add(g));return this.setView(w,n,{zoom:r})},_getBoundsCenterZoom:function(t,n){n=n||{},t=t.getBounds?t.getBounds():mt(t);var r=B(n.paddingTopLeft||n.padding||[0,0]),s=B(n.paddingBottomRight||n.padding||[0,0]),l=this.getBoundsZoom(t,!1,r.add(s));if(l=typeof n.maxZoom=="number"?Math.min(n.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var f=s.subtract(r).divideBy(2),g=this.project(t.getSouthWest(),l),w=this.project(t.getNorthEast(),l),x=this.unproject(g.add(w).divideBy(2).add(f),l);return{center:x,zoom:l}},fitBounds:function(t,n){if(t=mt(t),!t.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(t,n);return this.setView(r.center,r.zoom,n)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,n){return this.setView(t,this._zoom,{pan:n})},panBy:function(t,n){if(t=B(t).round(),n=n||{},!t.x&&!t.y)return this.fire("moveend");if(n.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new co,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),n.animate!==!1){X(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,r,n.duration||.25,n.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,n,r){if(r=r||{},r.animate===!1||!F.any3d)return this.setView(t,n,r);this._stop();var s=this.project(this.getCenter()),l=this.project(t),f=this.getSize(),g=this._zoom;t=J(t),n=n===void 0?g:n;var w=Math.max(f.x,f.y),x=w*this.getZoomScale(g,n),M=l.distanceTo(s)||1,A=1.42,U=A*A;function K(gt){var zn=gt?-1:1,fl=gt?x:w,dl=x*x-w*w+zn*U*U*M*M,ml=2*fl*U*M,Ui=dl/ml,Vo=Math.sqrt(Ui*Ui+1)-Ui,pl=Vo<1e-9?-18:Math.log(Vo);return pl}function St(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function bt(gt){return(Math.exp(gt)+Math.exp(-gt))/2}function Bt(gt){return St(gt)/bt(gt)}var Et=K(0);function Ae(gt){return w*(bt(Et)/bt(Et+A*gt))}function ul(gt){return w*(bt(Et)*Bt(Et+A*gt)-St(Et))/U}function ll(gt){return 1-Math.pow(1-gt,1.5)}var hl=Date.now(),$o=(K(1)-Et)/A,cl=r.duration?1e3*r.duration:1e3*$o*.8;function qo(){var gt=(Date.now()-hl)/cl,zn=ll(gt)*$o;gt<=1?(this._flyToFrame=W(qo,this),this._move(this.unproject(s.add(l.subtract(s).multiplyBy(ul(zn)/M)),g),this.getScaleZoom(w/Ae(zn),g),{flyTo:!0})):this._move(t,n)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),qo.call(this),this},flyToBounds:function(t,n){var r=this._getBoundsCenterZoom(t,n);return this.flyTo(r.center,r.zoom,n)},setMaxBounds:function(t){return t=mt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var n=this.options.minZoom;return this.options.minZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var n=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,n){this._enforcingBounds=!0;var r=this.getCenter(),s=this._limitCenter(r,this._zoom,mt(t));return r.equals(s)||this.panTo(s,n),this._enforcingBounds=!1,this},panInside:function(t,n){n=n||{};var r=B(n.paddingTopLeft||n.padding||[0,0]),s=B(n.paddingBottomRight||n.padding||[0,0]),l=this.project(this.getCenter()),f=this.project(t),g=this.getPixelBounds(),w=vt([g.min.add(r),g.max.subtract(s)]),x=w.getSize();if(!w.contains(f)){this._enforcingBounds=!0;var M=f.subtract(w.getCenter()),A=w.extend(f).getSize().subtract(x);l.x+=M.x<0?-A.x:A.x,l.y+=M.y<0?-A.y:A.y,this.panTo(this.unproject(l),n),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),s=n.divideBy(2).round(),l=r.divideBy(2).round(),f=s.subtract(l);return!f.x&&!f.y?this:(t.animate&&t.pan?this.panBy(f):(t.pan&&this._rawPanBy(f),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=c(this._handleGeolocationResponse,this),r=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var n=t.code,r=t.message||(n===1?"permission denied":n===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var n=t.coords.latitude,r=t.coords.longitude,s=new ut(n,r),l=s.toBounds(t.coords.accuracy*2),f=this._locateOptions;if(f.setView){var g=this.getBoundsZoom(l);this.setView(s,f.maxZoom?Math.min(g,f.maxZoom):g)}var w={latlng:s,bounds:l,timestamp:t.timestamp};for(var x in t.coords)typeof t.coords[x]=="number"&&(w[x]=t.coords[x]);this.fire("locationfound",w)}},addHandler:function(t,n){if(!n)return this;var r=this[t]=new n(this);return this._handlers.push(r),this.options[t]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ft(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,n){var r="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=rt("div",r,n||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),n=this.unproject(t.getBottomLeft()),r=this.unproject(t.getTopRight());return new wt(n,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,n,r){t=mt(t),r=B(r||[0,0]);var s=this.getZoom()||0,l=this.getMinZoom(),f=this.getMaxZoom(),g=t.getNorthWest(),w=t.getSouthEast(),x=this.getSize().subtract(r),M=vt(this.project(w,s),this.project(g,s)).getSize(),A=F.any3d?this.options.zoomSnap:1,U=x.x/M.x,K=x.y/M.y,St=n?Math.max(U,K):Math.min(U,K);return s=this.getScaleZoom(St,s),A&&(s=Math.round(s/(A/100))*(A/100),s=n?Math.ceil(s/A)*A:Math.floor(s/A)*A),Math.max(l,Math.min(f,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,n){var r=this._getTopLeftPoint(t,n);return new et(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,n){var r=this.options.crs;return n=n===void 0?this._zoom:n,r.scale(t)/r.scale(n)},getScaleZoom:function(t,n){var r=this.options.crs;n=n===void 0?this._zoom:n;var s=r.zoom(t*r.scale(n));return isNaN(s)?1/0:s},project:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.latLngToPoint(J(t),n)},unproject:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.pointToLatLng(B(t),n)},layerPointToLatLng:function(t){var n=B(t).add(this.getPixelOrigin());return this.unproject(n)},latLngToLayerPoint:function(t){var n=this.project(J(t))._round();return n._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(J(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(mt(t))},distance:function(t,n){return this.options.crs.distance(J(t),J(n))},containerPointToLayerPoint:function(t){return B(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return B(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var n=this.containerPointToLayerPoint(B(t));return this.layerPointToLatLng(n)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(t)))},mouseEventToContainerPoint:function(t){return lo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var n=this._container=oo(t);if(n){if(n._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Y(n,"scroll",this._onScroll,this),this._containerId=m(n)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&F.any3d,X(t,"leaflet-container"+(F.touch?" leaflet-touch":"")+(F.retina?" leaflet-retina":"")+(F.ielt9?" leaflet-oldie":"")+(F.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var n=$e(t,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&n!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_t(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(X(t.markerPane,"leaflet-zoom-hide"),X(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,n,r){_t(this._mapPane,new N(0,0));var s=!this._loaded;this._loaded=!0,n=this._limitZoom(n),this.fire("viewprereset");var l=this._zoom!==n;this._moveStart(l,r)._move(t,n)._moveEnd(l),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,n){return t&&this.fire("zoomstart"),n||this.fire("movestart"),this},_move:function(t,n,r,s){n===void 0&&(n=this._zoom);var l=this._zoom!==n;return this._zoom=n,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),s?r&&r.pinch&&this.fire("zoom",r):((l||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_t(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[m(this._container)]=this;var n=t?ct:Y;n(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&n(window,"resize",this._onResize,this),F.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=W(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,n){for(var r=[],s,l=n==="mouseout"||n==="mouseover",f=t.target||t.srcElement,g=!1;f;){if(s=this._targets[m(f)],s&&(n==="click"||n==="preclick")&&this._draggableMoved(s)){g=!0;break}if(s&&s.listens(n,!0)&&(l&&!Di(f,t)||(r.push(s),l))||f===this._container)break;f=f.parentNode}return!r.length&&!g&&!l&&this.listens(n,!0)&&(r=[this]),r},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var n=t.target||t.srcElement;if(!(!this._loaded||n._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(n))){var r=t.type;r==="mousedown"&&Pi(n),this._fireDOMEvent(t,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,r){if(t.type==="click"){var s=u({},t);s.type="preclick",this._fireDOMEvent(s,s.type,r)}var l=this._findEventTargets(t,n);if(r){for(var f=[],g=0;g<r.length;g++)r[g].listens(n,!0)&&f.push(r[g]);l=f.concat(l)}if(l.length){n==="contextmenu"&&Mt(t);var w=l[0],x={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var M=w.getLatLng&&(!w._radius||w._radius<=10);x.containerPoint=M?this.latLngToContainerPoint(w.getLatLng()):this.mouseEventToContainerPoint(t),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=M?w.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(g=0;g<l.length;g++)if(l[g].fire(n,x,!0),x.originalEvent._stopped||l[g].options.bubblingMouseEvents===!1&&Z(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,n=this._handlers.length;t<n;t++)this._handlers[t].disable()},whenReady:function(t,n){return this._loaded?t.call(n||this,{target:this}):this.on("load",t,n),this},_getMapPanePos:function(){return ce(this._mapPane)||new N(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,n){var r=t&&n!==void 0?this._getNewPixelOrigin(t,n):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,n){var r=this.getSize()._divideBy(2);return this.project(t,n)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,n,r){var s=this._getNewPixelOrigin(r,n);return this.project(t,n)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,n,r){var s=this._getNewPixelOrigin(r,n);return vt([this.project(t.getSouthWest(),n)._subtract(s),this.project(t.getNorthWest(),n)._subtract(s),this.project(t.getSouthEast(),n)._subtract(s),this.project(t.getNorthEast(),n)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,n,r){if(!r)return t;var s=this.project(t,n),l=this.getSize().divideBy(2),f=new et(s.subtract(l),s.add(l)),g=this._getBoundsOffset(f,r,n);return Math.abs(g.x)<=1&&Math.abs(g.y)<=1?t:this.unproject(s.add(g),n)},_limitOffset:function(t,n){if(!n)return t;var r=this.getPixelBounds(),s=new et(r.min.add(t),r.max.add(t));return t.add(this._getBoundsOffset(s,n))},_getBoundsOffset:function(t,n,r){var s=vt(this.project(n.getNorthEast(),r),this.project(n.getSouthWest(),r)),l=s.min.subtract(t.min),f=s.max.subtract(t.max),g=this._rebound(l.x,-f.x),w=this._rebound(l.y,-f.y);return new N(g,w)},_rebound:function(t,n){return t+n>0?Math.round(t-n)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(n))},_limitZoom:function(t){var n=this.getMinZoom(),r=this.getMaxZoom(),s=F.any3d?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(n,Math.min(r,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,n){var r=this._getCenterOffset(t)._trunc();return(n&&n.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,n),!0)},_createAnimProxy:function(){var t=this._proxy=rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(n){var r=yi,s=this._proxy.style[r];he(this._proxy,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1)),s===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),n=this.getZoom();he(this._proxy,this.project(t,n),this.getZoomScale(n,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,n,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(n-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(n),l=this._getCenterOffset(t)._divideBy(1-1/s);return r.animate!==!0&&!this.getSize().contains(l)?!1:(W(function(){this._moveStart(!0,r.noMoveStart||!1)._animateZoom(t,n,!0)},this),!0)},_animateZoom:function(t,n,r,s){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=n,X(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:n,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mu(t,n){return new tt(t,n)}var Zt=H.extend({options:{position:"topright"},initialize:function(t){T(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var n=this._map;return n&&n.removeControl(this),this.options.position=t,n&&n.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var n=this._container=this.onAdd(t),r=this.getPosition(),s=t._controlCorners[r];return X(n,"leaflet-control"),r.indexOf("bottom")!==-1?s.insertBefore(n,s.firstChild):s.appendChild(n),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Xe=function(t){return new Zt(t)};tt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},n="leaflet-",r=this._controlContainer=rt("div",n+"control-container",this._container);function s(l,f){var g=n+l+" "+n+f;t[l+f]=rt("div",g,r)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ft(this._controlCorners[t]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fo=Zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,n,r,s){return r<s?-1:s<r?1:0}},initialize:function(t,n,r){T(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in n)this._addLayer(n[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Zt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,n){return this._addLayer(t,n),this._map?this._update():this},addOverlay:function(t,n){return this._addLayer(t,n,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var n=this._getLayer(m(t));return n&&this._layers.splice(this._layers.indexOf(n),1),this._map?this._update():this},expand:function(){X(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(X(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",n=this._container=rt("div",t),r=this.options.collapsed;n.setAttribute("aria-haspopup",!0),Ge(n),Ai(n);var s=this._section=rt("section",t+"-list");r&&(this._map.on("click",this.collapse,this),Y(n,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=rt("a",t+"-toggle",n);l.href="#",l.title="Layers",l.setAttribute("role","button"),Y(l,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){Mt(f),this._expandSafely()}},this),r||this.expand(),this._baseLayersList=rt("div",t+"-base",s),this._separator=rt("div",t+"-separator",s),this._overlaysList=rt("div",t+"-overlays",s),n.appendChild(s)},_getLayer:function(t){for(var n=0;n<this._layers.length;n++)if(this._layers[n]&&m(this._layers[n].layer)===t)return this._layers[n]},_addLayer:function(t,n,r){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:n,overlay:r}),this.options.sortLayers&&this._layers.sort(c(function(s,l){return this.options.sortFunction(s.layer,l.layer,s.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;yn(this._baseLayersList),yn(this._overlaysList),this._layerControlInputs=[];var t,n,r,s,l=0;for(r=0;r<this._layers.length;r++)s=this._layers[r],this._addItem(s),n=n||s.overlay,t=t||!s.overlay,l+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var n=this._getLayer(m(t.target)),r=n.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;r&&this._map.fire(r,n)},_createRadioElement:function(t,n){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(n?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=r,s.firstChild},_addItem:function(t){var n=document.createElement("label"),r=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=r):s=this._createRadioElement("leaflet-base-layers_"+m(this),r),this._layerControlInputs.push(s),s.layerId=m(t.layer),Y(s,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var f=document.createElement("span");n.appendChild(f),f.appendChild(s),f.appendChild(l);var g=t.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,n,r,s=[],l=[];this._handlingClick=!0;for(var f=t.length-1;f>=0;f--)n=t[f],r=this._getLayer(n.layerId).layer,n.checked?s.push(r):n.checked||l.push(r);for(f=0;f<l.length;f++)this._map.hasLayer(l[f])&&this._map.removeLayer(l[f]);for(f=0;f<s.length;f++)this._map.hasLayer(s[f])||this._map.addLayer(s[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,n,r,s=this._map.getZoom(),l=t.length-1;l>=0;l--)n=t[l],r=this._getLayer(n.layerId).layer,n.disabled=r.options.minZoom!==void 0&&s<r.options.minZoom||r.options.maxZoom!==void 0&&s>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Y(t,"click",Mt),this.expand();var n=this;setTimeout(function(){ct(t,"click",Mt),n._preventClick=!1})}}),Pu=function(t,n,r){return new fo(t,n,r)},Ii=Zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var n="leaflet-control-zoom",r=rt("div",n+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,n+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,n+"-out",r,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,n,r,s,l){var f=rt("a",r,s);return f.innerHTML=t,f.href="#",f.title=n,f.setAttribute("role","button"),f.setAttribute("aria-label",n),Ge(f),Y(f,"click",de),Y(f,"click",l,this),Y(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var t=this._map,n="leaflet-disabled";pt(this._zoomInButton,n),pt(this._zoomOutButton,n),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(X(this._zoomOutButton,n),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(X(this._zoomInButton,n),this._zoomInButton.setAttribute("aria-disabled","true"))}});tt.mergeOptions({zoomControl:!0}),tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ii,this.addControl(this.zoomControl))});var Cu=function(t){return new Ii(t)},mo=Zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var n="leaflet-control-scale",r=rt("div",n),s=this.options;return this._addScales(s,n+"-line",r),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),r},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,n,r){t.metric&&(this._mScale=rt("div",n,r)),t.imperial&&(this._iScale=rt("div",n,r))},_update:function(){var t=this._map,n=t.getSize().y/2,r=t.distance(t.containerPointToLatLng([0,n]),t.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(r)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var n=this._getRoundNum(t),r=n<1e3?n+" m":n/1e3+" km";this._updateScale(this._mScale,r,n/t)},_updateImperial:function(t){var n=t*3.2808399,r,s,l;n>5280?(r=n/5280,s=this._getRoundNum(r),this._updateScale(this._iScale,s+" mi",s/r)):(l=this._getRoundNum(n),this._updateScale(this._iScale,l+" ft",l/n))},_updateScale:function(t,n,r){t.style.width=Math.round(this.options.maxWidth*r)+"px",t.innerHTML=n},_getRoundNum:function(t){var n=Math.pow(10,(Math.floor(t)+"").length-1),r=t/n;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,n*r}}),Su=function(t){return new mo(t)},Eu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Bi=Zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(F.inlineSvg?Eu+" ":"")+"Leaflet</a>"},initialize:function(t){T(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=rt("div","leaflet-control-attribution"),Ge(this._container);for(var n in t._layers)t._layers[n].getAttribution&&this.addAttribution(t._layers[n].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var n in this._attributions)this._attributions[n]&&t.push(n);var r=[];this.options.prefix&&r.push(this.options.prefix),t.length&&r.push(t.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});tt.mergeOptions({attributionControl:!0}),tt.addInitHook(function(){this.options.attributionControl&&new Bi().addTo(this)});var ku=function(t){return new Bi(t)};Zt.Layers=fo,Zt.Zoom=Ii,Zt.Scale=mo,Zt.Attribution=Bi,Xe.layers=Pu,Xe.zoom=Cu,Xe.scale=Su,Xe.attribution=ku;var Vt=H.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vt.addTo=function(t,n){return t.addHandler(n,this),this};var Au={Events:at},po=F.touch?"touchstart mousedown":"mousedown",se=it.extend({options:{clickTolerance:3},initialize:function(t,n,r,s){T(this,s),this._element=t,this._dragStartTarget=n||t,this._preventOutline=r},enable:function(){this._enabled||(Y(this._dragStartTarget,po,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(se._dragging===this&&this.finishDrag(!0),ct(this._dragStartTarget,po,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!wi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){se._dragging===this&&this.finishDrag();return}if(!(se._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(se._dragging=this,this._preventOutline&&Pi(this._element),Ti(),qe(),!this._moving)){this.fire("down");var n=t.touches?t.touches[0]:t,r=so(this._element);this._startPoint=new N(n.clientX,n.clientY),this._startPos=ce(this._element),this._parentScale=Ci(r);var s=t.type==="mousedown";Y(document,s?"mousemove":"touchmove",this._onMove,this),Y(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var n=t.touches&&t.touches.length===1?t.touches[0]:t,r=new N(n.clientX,n.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,Mt(t),this._moved||(this.fire("dragstart"),this._moved=!0,X(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),X(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_t(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){pt(document.body,"leaflet-dragging"),this._lastTarget&&(pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ct(document,"mousemove touchmove",this._onMove,this),ct(document,"mouseup touchend touchcancel",this._onUp,this),Li(),Ve();var n=this._moved&&this._moving;this._moving=!1,se._dragging=!1,n&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function _o(t,n,r){var s,l=[1,4,2,8],f,g,w,x,M,A,U,K;for(f=0,A=t.length;f<A;f++)t[f]._code=me(t[f],n);for(w=0;w<4;w++){for(U=l[w],s=[],f=0,A=t.length,g=A-1;f<A;g=f++)x=t[f],M=t[g],x._code&U?M._code&U||(K=Ln(M,x,U,n,r),K._code=me(K,n),s.push(K)):(M._code&U&&(K=Ln(M,x,U,n,r),K._code=me(K,n),s.push(K)),s.push(x));t=s}return t}function go(t,n){var r,s,l,f,g,w,x,M,A;if(!t||t.length===0)throw new Error("latlngs not passed");It(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var U=J([0,0]),K=mt(t),St=K.getNorthWest().distanceTo(K.getSouthWest())*K.getNorthEast().distanceTo(K.getNorthWest());St<1700&&(U=zi(t));var bt=t.length,Bt=[];for(r=0;r<bt;r++){var Et=J(t[r]);Bt.push(n.project(J([Et.lat-U.lat,Et.lng-U.lng])))}for(w=x=M=0,r=0,s=bt-1;r<bt;s=r++)l=Bt[r],f=Bt[s],g=l.y*f.x-f.y*l.x,x+=(l.x+f.x)*g,M+=(l.y+f.y)*g,w+=g*3;w===0?A=Bt[0]:A=[x/w,M/w];var Ae=n.unproject(B(A));return J([Ae.lat+U.lat,Ae.lng+U.lng])}function zi(t){for(var n=0,r=0,s=0,l=0;l<t.length;l++){var f=J(t[l]);n+=f.lat,r+=f.lng,s++}return J([n/s,r/s])}var Du={__proto__:null,clipPolygon:_o,polygonCenter:go,centroid:zi};function vo(t,n){if(!n||!t.length)return t.slice();var r=n*n;return t=zu(t,r),t=Bu(t,r),t}function yo(t,n,r){return Math.sqrt(Ke(t,n,r,!0))}function Iu(t,n,r){return Ke(t,n,r)}function Bu(t,n){var r=t.length,s=typeof Uint8Array<"u"?Uint8Array:Array,l=new s(r);l[0]=l[r-1]=1,Oi(t,l,n,0,r-1);var f,g=[];for(f=0;f<r;f++)l[f]&&g.push(t[f]);return g}function Oi(t,n,r,s,l){var f=0,g,w,x;for(w=s+1;w<=l-1;w++)x=Ke(t[w],t[s],t[l],!0),x>f&&(g=w,f=x);f>r&&(n[g]=1,Oi(t,n,r,s,g),Oi(t,n,r,g,l))}function zu(t,n){for(var r=[t[0]],s=1,l=0,f=t.length;s<f;s++)Ou(t[s],t[l])>n&&(r.push(t[s]),l=s);return l<f-1&&r.push(t[f-1]),r}var wo;function xo(t,n,r,s,l){var f=s?wo:me(t,r),g=me(n,r),w,x,M;for(wo=g;;){if(!(f|g))return[t,n];if(f&g)return!1;w=f||g,x=Ln(t,n,w,r,l),M=me(x,r),w===f?(t=x,f=M):(n=x,g=M)}}function Ln(t,n,r,s,l){var f=n.x-t.x,g=n.y-t.y,w=s.min,x=s.max,M,A;return r&8?(M=t.x+f*(x.y-t.y)/g,A=x.y):r&4?(M=t.x+f*(w.y-t.y)/g,A=w.y):r&2?(M=x.x,A=t.y+g*(x.x-t.x)/f):r&1&&(M=w.x,A=t.y+g*(w.x-t.x)/f),new N(M,A,l)}function me(t,n){var r=0;return t.x<n.min.x?r|=1:t.x>n.max.x&&(r|=2),t.y<n.min.y?r|=4:t.y>n.max.y&&(r|=8),r}function Ou(t,n){var r=n.x-t.x,s=n.y-t.y;return r*r+s*s}function Ke(t,n,r,s){var l=n.x,f=n.y,g=r.x-l,w=r.y-f,x=g*g+w*w,M;return x>0&&(M=((t.x-l)*g+(t.y-f)*w)/x,M>1?(l=r.x,f=r.y):M>0&&(l+=g*M,f+=w*M)),g=t.x-l,w=t.y-f,s?g*g+w*w:new N(l,f)}function It(t){return!I(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function bo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),It(t)}function To(t,n){var r,s,l,f,g,w,x,M;if(!t||t.length===0)throw new Error("latlngs not passed");It(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var A=J([0,0]),U=mt(t),K=U.getNorthWest().distanceTo(U.getSouthWest())*U.getNorthEast().distanceTo(U.getNorthWest());K<1700&&(A=zi(t));var St=t.length,bt=[];for(r=0;r<St;r++){var Bt=J(t[r]);bt.push(n.project(J([Bt.lat-A.lat,Bt.lng-A.lng])))}for(r=0,s=0;r<St-1;r++)s+=bt[r].distanceTo(bt[r+1])/2;if(s===0)M=bt[0];else for(r=0,f=0;r<St-1;r++)if(g=bt[r],w=bt[r+1],l=g.distanceTo(w),f+=l,f>s){x=(f-s)/l,M=[w.x-x*(w.x-g.x),w.y-x*(w.y-g.y)];break}var Et=n.unproject(B(M));return J([Et.lat+A.lat,Et.lng+A.lng])}var Nu={__proto__:null,simplify:vo,pointToSegmentDistance:yo,closestPointOnSegment:Iu,clipSegment:xo,_getEdgeIntersection:Ln,_getBitCode:me,_sqClosestPointOnSegment:Ke,isFlat:It,_flat:bo,polylineCenter:To},Ni={project:function(t){return new N(t.lng,t.lat)},unproject:function(t){return new ut(t.y,t.x)},bounds:new et([-180,-90],[180,90])},Zi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new et([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var n=Math.PI/180,r=this.R,s=t.lat*n,l=this.R_MINOR/r,f=Math.sqrt(1-l*l),g=f*Math.sin(s),w=Math.tan(Math.PI/4-s/2)/Math.pow((1-g)/(1+g),f/2);return s=-r*Math.log(Math.max(w,1e-10)),new N(t.lng*n*r,s)},unproject:function(t){for(var n=180/Math.PI,r=this.R,s=this.R_MINOR/r,l=Math.sqrt(1-s*s),f=Math.exp(-t.y/r),g=Math.PI/2-2*Math.atan(f),w=0,x=.1,M;w<15&&Math.abs(x)>1e-7;w++)M=l*Math.sin(g),M=Math.pow((1-M)/(1+M),l/2),x=Math.PI/2-2*Math.atan(f*M)-g,g+=x;return new ut(g*n,t.x*n/r)}},Zu={__proto__:null,LonLat:Ni,Mercator:Zi,SphericalMercator:G},Fu=u({},Ut,{code:"EPSG:3395",projection:Zi,transformation:(function(){var t=.5/(Math.PI*Zi.R);return C(t,.5,-t,.5)})()}),Lo=u({},Ut,{code:"EPSG:4326",projection:Ni,transformation:C(1/180,1,-1/180,.5)}),Ru=u({},Ot,{projection:Ni,transformation:C(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,n){var r=n.lng-t.lng,s=n.lat-t.lat;return Math.sqrt(r*r+s*s)},infinite:!0});Ot.Earth=Ut,Ot.EPSG3395=Fu,Ot.EPSG3857=xt,Ot.EPSG900913=lt,Ot.EPSG4326=Lo,Ot.Simple=Ru;var Ft=it.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[m(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[m(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var n=t.target;if(n.hasLayer(this)){if(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents){var r=this.getEvents();n.on(r,this),this.once("remove",function(){n.off(r,this)},this)}this.onAdd(n),this.fire("add"),n.fire("layeradd",{layer:this})}}});tt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var n=m(t);return this._layers[n]?this:(this._layers[n]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var n=m(t);return this._layers[n]?(this._loaded&&t.onRemove(this),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return m(t)in this._layers},eachLayer:function(t,n){for(var r in this._layers)t.call(n,this._layers[r]);return this},_addLayers:function(t){t=t?I(t)?t:[t]:[];for(var n=0,r=t.length;n<r;n++)this.addLayer(t[n])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[m(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var n=m(t);this._zoomBoundLayers[n]&&(delete this._zoomBoundLayers[n],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,n=-1/0,r=this._getZoomSpan();for(var s in this._zoomBoundLayers){var l=this._zoomBoundLayers[s].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),n=l.maxZoom===void 0?n:Math.max(n,l.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=t===1/0?void 0:t,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pe=Ft.extend({initialize:function(t,n){T(this,n),this._layers={};var r,s;if(t)for(r=0,s=t.length;r<s;r++)this.addLayer(t[r])},addLayer:function(t){var n=this.getLayerId(t);return this._layers[n]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var n=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[n]&&this._map.removeLayer(this._layers[n]),delete this._layers[n],this},hasLayer:function(t){var n=typeof t=="number"?t:this.getLayerId(t);return n in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var n=Array.prototype.slice.call(arguments,1),r,s;for(r in this._layers)s=this._layers[r],s[t]&&s[t].apply(s,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,n){for(var r in this._layers)t.call(n,this._layers[r]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return m(t)}}),Hu=function(t,n){return new Pe(t,n)},Kt=Pe.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pe.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pe.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new wt;for(var n in this._layers){var r=this._layers[n];t.extend(r.getBounds?r.getBounds():r.getLatLng())}return t}}),Wu=function(t,n){return new Kt(t,n)},Ce=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){T(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,n){var r=this._getIconUrl(t);if(!r){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(r,n&&n.tagName==="IMG"?n:null);return this._setIconStyles(s,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(t,n){var r=this.options,s=r[n+"Size"];typeof s=="number"&&(s=[s,s]);var l=B(s),f=B(n==="shadow"&&r.shadowAnchor||r.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+n+" "+(r.className||""),f&&(t.style.marginLeft=-f.x+"px",t.style.marginTop=-f.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,n){return n=n||document.createElement("img"),n.src=t,n},_getIconUrl:function(t){return F.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Uu(t){return new Ce(t)}var Je=Ce.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Je.imagePath!="string"&&(Je.imagePath=this._detectIconPath()),(this.options.imagePath||Je.imagePath)+Ce.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var n=function(r,s,l){var f=s.exec(r);return f&&f[l]};return t=n(t,/^url\((['"])?(.+)\1\)$/,2),t&&n(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=rt("div","leaflet-default-icon-path",document.body),n=$e(t,"background-image")||$e(t,"backgroundImage");if(document.body.removeChild(t),n=this._stripUrl(n),n)return n;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-11-1):""}}),Mo=Vt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new se(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),X(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var n=this._marker,r=n._map,s=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,f=ce(n._icon),g=r.getPixelBounds(),w=r.getPixelOrigin(),x=vt(g.min._subtract(w).add(l),g.max._subtract(w).subtract(l));if(!x.contains(f)){var M=B((Math.max(x.max.x,f.x)-x.max.x)/(g.max.x-x.max.x)-(Math.min(x.min.x,f.x)-x.min.x)/(g.min.x-x.min.x),(Math.max(x.max.y,f.y)-x.max.y)/(g.max.y-x.max.y)-(Math.min(x.min.y,f.y)-x.min.y)/(g.min.y-x.min.y)).multiplyBy(s);r.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),_t(n._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=W(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=W(this._adjustPan.bind(this,t)))},_onDrag:function(t){var n=this._marker,r=n._shadow,s=ce(n._icon),l=n._map.layerPointToLatLng(s);r&&_t(r,s),n._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,n.fire("move",t).fire("drag",t)},_onDragEnd:function(t){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Mn=Ft.extend({options:{icon:new Je,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,n){T(this,n),this._latlng=J(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var n=this._latlng;return this._latlng=J(t),this.update(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=t.icon.createIcon(this._icon),s=!1;r!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(r.title=t.title),r.tagName==="IMG"&&(r.alt=t.alt||"")),X(r,n),t.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Y(r,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),f=!1;l!==this._shadow&&(this._removeShadow(),f=!0),l&&(X(l,n),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&f&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&_t(this._icon,t),this._shadow&&_t(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(n)},_initInteraction:function(){if(this.options.interactive&&(X(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Dt(this._icon,t),this._shadow&&Dt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var n=this.options.icon.options,r=n.iconSize?B(n.iconSize):B(0,0),s=n.iconAnchor?B(n.iconAnchor):B(0,0);t.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:r.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $u(t,n){return new Mn(t,n)}var ae=Ft.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return T(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pn=ae.extend({options:{fill:!0,radius:10},initialize:function(t,n){T(this,n),this._latlng=J(t),this._radius=this.options.radius},setLatLng:function(t){var n=this._latlng;return this._latlng=J(t),this.redraw(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var n=t&&t.radius||this._radius;return ae.prototype.setStyle.call(this,t),this.setRadius(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,n=this._radiusY||t,r=this._clickTolerance(),s=[t+r,n+r];this._pxBounds=new et(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qu(t,n){return new Pn(t,n)}var Fi=Pn.extend({initialize:function(t,n,r){if(typeof n=="number"&&(n=u({},r,{radius:n})),T(this,n),this._latlng=J(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new wt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ae.prototype.setStyle,_project:function(){var t=this._latlng.lng,n=this._latlng.lat,r=this._map,s=r.options.crs;if(s.distance===Ut.distance){var l=Math.PI/180,f=this._mRadius/Ut.R/l,g=r.project([n+f,t]),w=r.project([n-f,t]),x=g.add(w).divideBy(2),M=r.unproject(x).lat,A=Math.acos((Math.cos(f*l)-Math.sin(n*l)*Math.sin(M*l))/(Math.cos(n*l)*Math.cos(M*l)))/l;(isNaN(A)||A===0)&&(A=f/Math.cos(Math.PI/180*n)),this._point=x.subtract(r.getPixelOrigin()),this._radius=isNaN(A)?0:x.x-r.project([M,t-A]).x,this._radiusY=x.y-g.y}else{var U=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(U).x}this._updateBounds()}});function Vu(t,n,r){return new Fi(t,n,r)}var Jt=ae.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,n){T(this,n),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var n=1/0,r=null,s=Ke,l,f,g=0,w=this._parts.length;g<w;g++)for(var x=this._parts[g],M=1,A=x.length;M<A;M++){l=x[M-1],f=x[M];var U=s(t,l,f,!0);U<n&&(n=U,r=s(t,l,f))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return To(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,n){return n=n||this._defaultShape(),t=J(t),n.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new wt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return It(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var n=[],r=It(t),s=0,l=t.length;s<l;s++)r?(n[s]=J(t[s]),this._bounds.extend(n[s])):n[s]=this._convertLatLngs(t[s]);return n},_project:function(){var t=new et;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),n=new N(t,t);this._rawPxBounds&&(this._pxBounds=new et([this._rawPxBounds.min.subtract(n),this._rawPxBounds.max.add(n)]))},_projectLatlngs:function(t,n,r){var s=t[0]instanceof ut,l=t.length,f,g;if(s){for(g=[],f=0;f<l;f++)g[f]=this._map.latLngToLayerPoint(t[f]),r.extend(g[f]);n.push(g)}else for(f=0;f<l;f++)this._projectLatlngs(t[f],n,r)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var n=this._parts,r,s,l,f,g,w,x;for(r=0,l=0,f=this._rings.length;r<f;r++)for(x=this._rings[r],s=0,g=x.length;s<g-1;s++)w=xo(x[s],x[s+1],t,s,!0),w&&(n[l]=n[l]||[],n[l].push(w[0]),(w[1]!==x[s+1]||s===g-2)&&(n[l].push(w[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,n=this.options.smoothFactor,r=0,s=t.length;r<s;r++)t[r]=vo(t[r],n)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,n){var r,s,l,f,g,w,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,f=this._parts.length;r<f;r++)for(w=this._parts[r],s=0,g=w.length,l=g-1;s<g;l=s++)if(!(!n&&s===0)&&yo(t,w[l],w[s])<=x)return!0;return!1}});function Yu(t,n){return new Jt(t,n)}Jt._flat=bo;var Se=Jt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return go(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var n=Jt.prototype._convertLatLngs.call(this,t),r=n.length;return r>=2&&n[0]instanceof ut&&n[0].equals(n[r-1])&&n.pop(),n},_setLatLngs:function(t){Jt.prototype._setLatLngs.call(this,t),It(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return It(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,n=this.options.weight,r=new N(n,n);if(t=new et(t.min.subtract(r),t.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,l=this._rings.length,f;s<l;s++)f=_o(this._rings[s],t,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var n=!1,r,s,l,f,g,w,x,M;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,x=this._parts.length;f<x;f++)for(r=this._parts[f],g=0,M=r.length,w=M-1;g<M;w=g++)s=r[g],l=r[w],s.y>t.y!=l.y>t.y&&t.x<(l.x-s.x)*(t.y-s.y)/(l.y-s.y)+s.x&&(n=!n);return n||Jt.prototype._containsPoint.call(this,t,!0)}});function Gu(t,n){return new Se(t,n)}var jt=Kt.extend({initialize:function(t,n){T(this,n),this._layers={},t&&this.addData(t)},addData:function(t){var n=I(t)?t:t.features,r,s,l;if(n){for(r=0,s=n.length;r<s;r++)l=n[r],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var f=this.options;if(f.filter&&!f.filter(t))return this;var g=Cn(t,f);return g?(g.feature=kn(t),g.defaultOptions=g.options,this.resetStyle(g),f.onEachFeature&&f.onEachFeature(t,g),this.addLayer(g)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(n){this._setLayerStyle(n,t)},this)},_setLayerStyle:function(t,n){t.setStyle&&(typeof n=="function"&&(n=n(t.feature)),t.setStyle(n))}});function Cn(t,n){var r=t.type==="Feature"?t.geometry:t,s=r?r.coordinates:null,l=[],f=n&&n.pointToLayer,g=n&&n.coordsToLatLng||Ri,w,x,M,A;if(!s&&!r)return null;switch(r.type){case"Point":return w=g(s),Po(f,t,w,n);case"MultiPoint":for(M=0,A=s.length;M<A;M++)w=g(s[M]),l.push(Po(f,t,w,n));return new Kt(l);case"LineString":case"MultiLineString":return x=Sn(s,r.type==="LineString"?0:1,g),new Jt(x,n);case"Polygon":case"MultiPolygon":return x=Sn(s,r.type==="Polygon"?1:2,g),new Se(x,n);case"GeometryCollection":for(M=0,A=r.geometries.length;M<A;M++){var U=Cn({geometry:r.geometries[M],type:"Feature",properties:t.properties},n);U&&l.push(U)}return new Kt(l);case"FeatureCollection":for(M=0,A=r.features.length;M<A;M++){var K=Cn(r.features[M],n);K&&l.push(K)}return new Kt(l);default:throw new Error("Invalid GeoJSON object.")}}function Po(t,n,r,s){return t?t(n,r):new Mn(r,s&&s.markersInheritOptions&&s)}function Ri(t){return new ut(t[1],t[0],t[2])}function Sn(t,n,r){for(var s=[],l=0,f=t.length,g;l<f;l++)g=n?Sn(t[l],n-1,r):(r||Ri)(t[l]),s.push(g);return s}function Hi(t,n){return t=J(t),t.alt!==void 0?[y(t.lng,n),y(t.lat,n),y(t.alt,n)]:[y(t.lng,n),y(t.lat,n)]}function En(t,n,r,s){for(var l=[],f=0,g=t.length;f<g;f++)l.push(n?En(t[f],It(t[f])?0:n-1,r,s):Hi(t[f],s));return!n&&r&&l.length>0&&l.push(l[0].slice()),l}function Ee(t,n){return t.feature?u({},t.feature,{geometry:n}):kn(n)}function kn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Wi={toGeoJSON:function(t){return Ee(this,{type:"Point",coordinates:Hi(this.getLatLng(),t)})}};Mn.include(Wi),Fi.include(Wi),Pn.include(Wi),Jt.include({toGeoJSON:function(t){var n=!It(this._latlngs),r=En(this._latlngs,n?1:0,!1,t);return Ee(this,{type:(n?"Multi":"")+"LineString",coordinates:r})}}),Se.include({toGeoJSON:function(t){var n=!It(this._latlngs),r=n&&!It(this._latlngs[0]),s=En(this._latlngs,r?2:n?1:0,!0,t);return n||(s=[s]),Ee(this,{type:(r?"Multi":"")+"Polygon",coordinates:s})}}),Pe.include({toMultiPoint:function(t){var n=[];return this.eachLayer(function(r){n.push(r.toGeoJSON(t).geometry.coordinates)}),Ee(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(t){var n=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(n==="MultiPoint")return this.toMultiPoint(t);var r=n==="GeometryCollection",s=[];return this.eachLayer(function(l){if(l.toGeoJSON){var f=l.toGeoJSON(t);if(r)s.push(f.geometry);else{var g=kn(f);g.type==="FeatureCollection"?s.push.apply(s,g.features):s.push(g)}}}),r?Ee(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function Co(t,n){return new jt(t,n)}var Xu=Co,An=Ft.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,n,r){this._url=t,this._bounds=mt(n),T(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(X(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Le(this._image),this},bringToBack:function(){return this._map&&Me(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=mt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",n=this._image=t?this._url:rt("img");if(X(n,"leaflet-image-layer"),this._zoomAnimated&&X(n,"leaflet-zoom-animated"),this.options.className&&X(n,this.options.className),n.onselectstart=_,n.onmousemove=_,n.onload=c(this.fire,this,"load"),n.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=n.src;return}n.src=this._url,n.alt=this.options.alt},_animateZoom:function(t){var n=this._map.getZoomScale(t.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;he(this._image,r,n)},_reset:function(){var t=this._image,n=new et(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=n.getSize();_t(t,n.min),t.style.width=r.x+"px",t.style.height=r.y+"px"},_updateOpacity:function(){Dt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Ku=function(t,n,r){return new An(t,n,r)},So=An.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",n=this._image=t?this._url:rt("video");if(X(n,"leaflet-image-layer"),this._zoomAnimated&&X(n,"leaflet-zoom-animated"),this.options.className&&X(n,this.options.className),n.onselectstart=_,n.onmousemove=_,n.onloadeddata=c(this.fire,this,"load"),t){for(var r=n.getElementsByTagName("source"),s=[],l=0;l<r.length;l++)s.push(r[l].src);this._url=r.length>0?s:[n.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(n.style,"objectFit")&&(n.style.objectFit="fill"),n.autoplay=!!this.options.autoplay,n.loop=!!this.options.loop,n.muted=!!this.options.muted,n.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var g=rt("source");g.src=this._url[f],n.appendChild(g)}}});function Ju(t,n,r){return new So(t,n,r)}var Eo=An.extend({_initImage:function(){var t=this._image=this._url;X(t,"leaflet-image-layer"),this._zoomAnimated&&X(t,"leaflet-zoom-animated"),this.options.className&&X(t,this.options.className),t.onselectstart=_,t.onmousemove=_}});function ju(t,n,r){return new Eo(t,n,r)}var Yt=Ft.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,n){t&&(t instanceof ut||I(t))?(this._latlng=J(t),T(this,n)):(T(this,t),this._source=n),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Dt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Dt(this._container,1),this.bringToFront(),this.options.interactive&&(X(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Dt(this._container,0),this._removeTimeout=setTimeout(c(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=J(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Le(this._container),this},bringToBack:function(){return this._map&&Me(this._container),this},_prepareOpen:function(t){var n=this._source;if(!n._map)return!1;if(n instanceof Kt){n=null;var r=this._source._layers;for(var s in r)if(r[s]._map){n=r[s];break}if(!n)return!1;this._source=n}if(!t)if(n.getCenter)t=n.getCenter();else if(n.getLatLng)t=n.getLatLng();else if(n.getBounds)t=n.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,n=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof n=="string")t.innerHTML=n;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(n)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),n=B(this.options.offset),r=this._getAnchor();this._zoomAnimated?_t(this._container,t.add(r)):n=n.add(t).add(r);var s=this._containerBottom=-n.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=s+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});tt.include({_initOverlay:function(t,n,r,s){var l=n;return l instanceof t||(l=new t(s).setContent(n)),r&&l.setLatLng(r),l}}),Ft.include({_initOverlay:function(t,n,r,s){var l=r;return l instanceof t?(T(l,s),l._source=this):(l=n&&!s?n:new t(s,this),l.setContent(r)),l}});var Dn=Yt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Yt.prototype.openOn.call(this,t)},onAdd:function(t){Yt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ae||this._source.on("preclick",fe))},onRemove:function(t){Yt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ae||this._source.off("preclick",fe))},getEvents:function(){var t=Yt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",n=this._container=rt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=rt("div",t+"-content-wrapper",n);if(this._contentNode=rt("div",t+"-content",r),Ge(n),Ai(this._contentNode),Y(n,"contextmenu",fe),this._tipContainer=rt("div",t+"-tip-container",n),this._tip=rt("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=rt("a",t+"-close-button",n);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',Y(s,"click",function(l){Mt(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,n=t.style;n.width="",n.whiteSpace="nowrap";var r=t.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),n.width=r+1+"px",n.whiteSpace="",n.height="";var s=t.offsetHeight,l=this.options.maxHeight,f="leaflet-popup-scrolled";l&&s>l?(n.height=l+"px",X(t,f)):pt(t,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),r=this._getAnchor();_t(this._container,n.add(r))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,n=parseInt($e(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+n,s=this._containerWidth,l=new N(this._containerLeft,-r-this._containerBottom);l._add(ce(this._container));var f=t.layerPointToContainerPoint(l),g=B(this.options.autoPanPadding),w=B(this.options.autoPanPaddingTopLeft||g),x=B(this.options.autoPanPaddingBottomRight||g),M=t.getSize(),A=0,U=0;f.x+s+x.x>M.x&&(A=f.x+s-M.x+x.x),f.x-A-w.x<0&&(A=f.x-w.x),f.y+r+x.y>M.y&&(U=f.y+r-M.y+x.y),f.y-U-w.y<0&&(U=f.y-w.y),(A||U)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([A,U]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qu=function(t,n){return new Dn(t,n)};tt.mergeOptions({closePopupOnClick:!0}),tt.include({openPopup:function(t,n,r){return this._initOverlay(Dn,t,n,r).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ft.include({bindPopup:function(t,n){return this._popup=this._initOverlay(Dn,this._popup,t,n),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Kt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){de(t);var n=t.layer||t.target;if(this._popup._source===n&&!(n instanceof ae)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=n,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var In=Yt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Yt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Yt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Yt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",n=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=rt("div",n),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var n,r,s=this._map,l=this._container,f=s.latLngToContainerPoint(s.getCenter()),g=s.layerPointToContainerPoint(t),w=this.options.direction,x=l.offsetWidth,M=l.offsetHeight,A=B(this.options.offset),U=this._getAnchor();w==="top"?(n=x/2,r=M):w==="bottom"?(n=x/2,r=0):w==="center"?(n=x/2,r=M/2):w==="right"?(n=0,r=M/2):w==="left"?(n=x,r=M/2):g.x<f.x?(w="right",n=0,r=M/2):(w="left",n=x+(A.x+U.x)*2,r=M/2),t=t.subtract(B(n,r,!0)).add(A).add(U),pt(l,"leaflet-tooltip-right"),pt(l,"leaflet-tooltip-left"),pt(l,"leaflet-tooltip-top"),pt(l,"leaflet-tooltip-bottom"),X(l,"leaflet-tooltip-"+w),_t(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Dt(this._container,t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(n)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),tl=function(t,n){return new In(t,n)};tt.include({openTooltip:function(t,n,r){return this._initOverlay(In,t,n,r).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ft.include({bindTooltip:function(t,n){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(In,this._tooltip,t,n),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var n=t?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip,this._map?this._addFocusListeners():r.add=this._addFocusListeners),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[n](r),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Kt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var n=typeof t.getElement=="function"&&t.getElement();n&&(Y(n,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Y(n,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var n=typeof t.getElement=="function"&&t.getElement();n&&n.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var n=this;this._map.once("moveend",function(){n._openOnceFlag=!1,n._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var n=t.latlng,r,s;this._tooltip.options.sticky&&t.originalEvent&&(r=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(r),n=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(n)}});var ko=Ce.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var n=t&&t.tagName==="DIV"?t:document.createElement("div"),r=this.options;if(r.html instanceof Element?(yn(n),n.appendChild(r.html)):n.innerHTML=r.html!==!1?r.html:"",r.bgPos){var s=B(r.bgPos);n.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});function el(t){return new ko(t)}Ce.Default=Je;var je=Ft.extend({options:{tileSize:256,opacity:1,updateWhenIdle:F.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){T(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ft(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Me(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof N?t:new N(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var n=this.getPane().children,r=-t(-1/0,1/0),s=0,l=n.length,f;s<l;s++)f=n[s].style.zIndex,n[s]!==this._container&&f&&(r=t(r,+f));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!F.ielt9){Dt(this._container,this.options.opacity);var t=+new Date,n=!1,r=!1;for(var s in this._tiles){var l=this._tiles[s];if(!(!l.current||!l.loaded)){var f=Math.min(1,(t-l.loaded)/200);Dt(l.el,f),f<1?n=!0:(l.active?r=!0:this._onOpaqueTile(l),l.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),n&&(P(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,n=this.options.maxZoom;if(t!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===t?(this._levels[r].el.style.zIndex=n-Math.abs(t-r),this._onUpdateLevel(r)):(ft(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var s=this._levels[t],l=this._map;return s||(s=this._levels[t]={},s.el=rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=n,s.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,l.getCenter(),l.getZoom()),_(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var t,n,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var s=n.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var n in this._tiles)this._tiles[n].coords.z===t&&this._removeTile(n)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ft(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,n,r,s){var l=Math.floor(t/2),f=Math.floor(n/2),g=r-1,w=new N(+l,+f);w.z=+g;var x=this._tileCoordsToKey(w),M=this._tiles[x];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),g>s?this._retainParent(l,f,g,s):!1)},_retainChildren:function(t,n,r,s){for(var l=2*t;l<2*t+2;l++)for(var f=2*n;f<2*n+2;f++){var g=new N(l,f);g.z=r+1;var w=this._tileCoordsToKey(g),x=this._tiles[w];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);r+1<s&&this._retainChildren(l,f,r+1,s)}},_resetView:function(t){var n=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),n,n)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var n=this.options;return n.minNativeZoom!==void 0&&t<n.minNativeZoom?n.minNativeZoom:n.maxNativeZoom!==void 0&&n.maxNativeZoom<t?n.maxNativeZoom:t},_setView:function(t,n,r,s){var l=Math.round(n);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var f=this.options.updateWhenZooming&&l!==this._tileZoom;(!s||f)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(t,n)},_setZoomTransforms:function(t,n){for(var r in this._levels)this._setZoomTransform(this._levels[r],t,n)},_setZoomTransform:function(t,n,r){var s=this._map.getZoomScale(r,t.zoom),l=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(n,r)).round();F.any3d?he(t.el,l,s):_t(t.el,l)},_resetGrid:function(){var t=this._map,n=t.options.crs,r=this._tileSize=this.getTileSize(),s=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,n.wrapLng[0]],s).x/r.x),Math.ceil(t.project([0,n.wrapLng[1]],s).x/r.y)],this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([n.wrapLat[0],0],s).y/r.x),Math.ceil(t.project([n.wrapLat[1],0],s).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var n=this._map,r=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),s=n.getZoomScale(r,this._tileZoom),l=n.project(t,this._tileZoom).floor(),f=n.getSize().divideBy(s*2);return new et(l.subtract(f),l.add(f))},_update:function(t){var n=this._map;if(n){var r=this._clampZoom(n.getZoom());if(t===void 0&&(t=n.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(s),f=l.getCenter(),g=[],w=this.options.keepBuffer,x=new et(l.getBottomLeft().subtract([w,-w]),l.getTopRight().add([w,-w]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var A=this._tiles[M].coords;(A.z!==this._tileZoom||!x.contains(new N(A.x,A.y)))&&(this._tiles[M].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(t,r);return}for(var U=l.min.y;U<=l.max.y;U++)for(var K=l.min.x;K<=l.max.x;K++){var St=new N(K,U);if(St.z=this._tileZoom,!!this._isValidTile(St)){var bt=this._tiles[this._tileCoordsToKey(St)];bt?bt.current=!0:g.push(St)}}if(g.sort(function(Et,Ae){return Et.distanceTo(f)-Ae.distanceTo(f)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bt=document.createDocumentFragment();for(K=0;K<g.length;K++)this._addTile(g[K],Bt);this._level.el.appendChild(Bt)}}}},_isValidTile:function(t){var n=this._map.options.crs;if(!n.infinite){var r=this._globalTileRange;if(!n.wrapLng&&(t.x<r.min.x||t.x>r.max.x)||!n.wrapLat&&(t.y<r.min.y||t.y>r.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return mt(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var n=this._map,r=this.getTileSize(),s=t.scaleBy(r),l=s.add(r),f=n.unproject(s,t.z),g=n.unproject(l,t.z);return[f,g]},_tileCoordsToBounds:function(t){var n=this._tileCoordsToNwSe(t),r=new wt(n[0],n[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var n=t.split(":"),r=new N(+n[0],+n[1]);return r.z=+n[2],r},_removeTile:function(t){var n=this._tiles[t];n&&(ft(n.el),delete this._tiles[t],this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){X(t,"leaflet-tile");var n=this.getTileSize();t.style.width=n.x+"px",t.style.height=n.y+"px",t.onselectstart=_,t.onmousemove=_,F.ielt9&&this.options.opacity<1&&Dt(t,this.options.opacity)},_addTile:function(t,n){var r=this._getTilePos(t),s=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&W(c(this._tileReady,this,t,null,l)),_t(l,r),this._tiles[s]={el:l,coords:t,current:!0},n.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,n,r){n&&this.fire("tileerror",{error:n,tile:r,coords:t});var s=this._tileCoordsToKey(t);r=this._tiles[s],r&&(r.loaded=+new Date,this._map._fadeAnimated?(Dt(r.el,0),P(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),n||(X(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),F.ielt9||!this._map._fadeAnimated?W(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var n=new N(this._wrapX?v(t.x,this._wrapX):t.x,this._wrapY?v(t.y,this._wrapY):t.y);return n.z=t.z,n},_pxBoundsToTileRange:function(t){var n=this.getTileSize();return new et(t.min.unscaleBy(n).floor(),t.max.unscaleBy(n).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function nl(t){return new je(t)}var ke=je.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,n){this._url=t,n=T(this,n),n.detectRetina&&F.retina&&n.maxZoom>0?(n.tileSize=Math.floor(n.tileSize/2),n.zoomReverse?(n.zoomOffset--,n.minZoom=Math.min(n.maxZoom,n.minZoom+1)):(n.zoomOffset++,n.maxZoom=Math.max(n.minZoom,n.maxZoom-1)),n.minZoom=Math.max(0,n.minZoom)):n.zoomReverse?n.minZoom=Math.min(n.maxZoom,n.minZoom):n.maxZoom=Math.max(n.minZoom,n.maxZoom),typeof n.subdomains=="string"&&(n.subdomains=n.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,n){return this._url===t&&n===void 0&&(n=!0),this._url=t,n||this.redraw(),this},createTile:function(t,n){var r=document.createElement("img");return Y(r,"load",c(this._tileOnLoad,this,n,r)),Y(r,"error",c(this._tileOnError,this,n,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.src=this.getTileUrl(t),r},getTileUrl:function(t){var n={r:F.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return R(this._url,u(n,this.options))},_tileOnLoad:function(t,n){F.ielt9?setTimeout(c(t,this,null,n),0):t(null,n)},_tileOnError:function(t,n,r){var s=this.options.errorTileUrl;s&&n.getAttribute("src")!==s&&(n.src=s),t(r,n)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,n=this.options.maxZoom,r=this.options.zoomReverse,s=this.options.zoomOffset;return r&&(t=n-t),t+s},_getSubdomain:function(t){var n=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[n]},_abortLoading:function(){var t,n;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(n=this._tiles[t].el,n.onload=_,n.onerror=_,!n.complete)){n.src=V;var r=this._tiles[t].coords;ft(n),delete this._tiles[t],this.fire("tileabort",{tile:n,coords:r})}},_removeTile:function(t){var n=this._tiles[t];if(n)return n.el.setAttribute("src",V),je.prototype._removeTile.call(this,t)},_tileReady:function(t,n,r){if(!(!this._map||r&&r.getAttribute("src")===V))return je.prototype._tileReady.call(this,t,n,r)}});function Ao(t,n){return new ke(t,n)}var Do=ke.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var r=u({},this.defaultWmsParams);for(var s in n)s in this.options||(r[s]=n[s]);n=T(this,n);var l=n.detectRetina&&F.retina?2:1,f=this.getTileSize();r.width=f.x*l,r.height=f.y*l,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var n=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[n]=this._crs.code,ke.prototype.onAdd.call(this,t)},getTileUrl:function(t){var n=this._tileCoordsToNwSe(t),r=this._crs,s=vt(r.project(n[0]),r.project(n[1])),l=s.min,f=s.max,g=(this._wmsVersion>=1.3&&this._crs===Lo?[l.y,l.x,f.y,f.x]:[l.x,l.y,f.x,f.y]).join(","),w=ke.prototype.getTileUrl.call(this,t);return w+k(this.wmsParams,w,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(t,n){return u(this.wmsParams,t),n||this.redraw(),this}});function il(t,n){return new Do(t,n)}ke.WMS=Do,Ao.wms=il;var Qt=Ft.extend({options:{padding:.1},initialize:function(t){T(this,t),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),X(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,n){var r=this._map.getZoomScale(n,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,n),f=s.multiplyBy(-r).add(l).subtract(this._map._getNewPixelOrigin(t,n));F.any3d?he(this._container,f,r):_t(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,n=this._map.getSize(),r=this._map.containerPointToLayerPoint(n.multiplyBy(-t)).round();this._bounds=new et(r,r.add(n.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Io=Qt.extend({options:{tolerance:0},getEvents:function(){var t=Qt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Y(t,"mousemove",this._onMouseMove,this),Y(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Y(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,ft(this._container),ct(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var n in this._layers)t=this._layers[n],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qt.prototype._update.call(this);var t=this._bounds,n=this._container,r=t.getSize(),s=F.retina?2:1;_t(n,t.min),n.width=s*r.x,n.height=s*r.y,n.style.width=r.x+"px",n.style.height=r.y+"px",F.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Qt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[m(t)]=t;var n=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=n),this._drawLast=n,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var n=t._order,r=n.next,s=n.prev;r?r.prev=s:this._drawLast=s,s?s.next=r:this._drawFirst=r,delete t._order,delete this._layers[m(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var n=t.options.dashArray.split(/[, ]+/),r=[],s,l;for(l=0;l<n.length;l++){if(s=Number(n[l]),isNaN(s))return;r.push(s)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||W(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var n=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new et,this._redrawBounds.extend(t._pxBounds.min.subtract([n,n])),this._redrawBounds.extend(t._pxBounds.max.add([n,n]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var n=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,n.x,n.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,n=this._redrawBounds;if(this._ctx.save(),n){var r=n.getSize();this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,n){if(this._drawing){var r,s,l,f,g=t._parts,w=g.length,x=this._ctx;if(w){for(x.beginPath(),r=0;r<w;r++){for(s=0,l=g[r].length;s<l;s++)f=g[r][s],x[s?"lineTo":"moveTo"](f.x,f.y);n&&x.closePath()}this._fillStroke(x,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var n=t._point,r=this._ctx,s=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||s)/s;l!==1&&(r.save(),r.scale(1,l)),r.beginPath(),r.arc(n.x,n.y/l,s,0,Math.PI*2,!1),l!==1&&r.restore(),this._fillStroke(r,t)}},_fillStroke:function(t,n){var r=n.options;r.fill&&(t.globalAlpha=r.fillOpacity,t.fillStyle=r.fillColor||r.color,t.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(t.setLineDash&&t.setLineDash(n.options&&n.options._dashArray||[]),t.globalAlpha=r.opacity,t.lineWidth=r.weight,t.strokeStyle=r.color,t.lineCap=r.lineCap,t.lineJoin=r.lineJoin,t.stroke())},_onClick:function(t){for(var n=this._map.mouseEventToLayerPoint(t),r,s,l=this._drawFirst;l;l=l.next)r=l.layer,r.options.interactive&&r._containsPoint(n)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(r))&&(s=r);this._fireEvent(s?[s]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var n=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,n)}},_handleMouseOut:function(t){var n=this._hoveredLayer;n&&(pt(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,n){if(!this._mouseHoverThrottled){for(var r,s,l=this._drawFirst;l;l=l.next)r=l.layer,r.options.interactive&&r._containsPoint(n)&&(s=r);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(X(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,n,r){this._map._fireDOMEvent(n,r||n.type,t)},_bringToFront:function(t){var n=t._order;if(n){var r=n.next,s=n.prev;if(r)r.prev=s;else return;s?s.next=r:r&&(this._drawFirst=r),n.prev=this._drawLast,this._drawLast.next=n,n.next=null,this._drawLast=n,this._requestRedraw(t)}},_bringToBack:function(t){var n=t._order;if(n){var r=n.next,s=n.prev;if(s)s.next=r;else return;r?r.prev=s:s&&(this._drawLast=s),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t)}}});function Bo(t){return F.canvas?new Io(t):null}var Qe=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),rl={_initContainer:function(){this._container=rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var n=t._container=Qe("shape");X(n,"leaflet-vml-shape "+(this.options.className||"")),n.coordsize="1 1",t._path=Qe("path"),n.appendChild(t._path),this._updateStyle(t),this._layers[m(t)]=t},_addPath:function(t){var n=t._container;this._container.appendChild(n),t.options.interactive&&t.addInteractiveTarget(n)},_removePath:function(t){var n=t._container;ft(n),t.removeInteractiveTarget(n),delete this._layers[m(t)]},_updateStyle:function(t){var n=t._stroke,r=t._fill,s=t.options,l=t._container;l.stroked=!!s.stroke,l.filled=!!s.fill,s.stroke?(n||(n=t._stroke=Qe("stroke")),l.appendChild(n),n.weight=s.weight+"px",n.color=s.color,n.opacity=s.opacity,s.dashArray?n.dashStyle=I(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):n.dashStyle="",n.endcap=s.lineCap.replace("butt","flat"),n.joinstyle=s.lineJoin):n&&(l.removeChild(n),t._stroke=null),s.fill?(r||(r=t._fill=Qe("fill")),l.appendChild(r),r.color=s.fillColor||s.color,r.opacity=s.fillOpacity):r&&(l.removeChild(r),t._fill=null)},_updateCircle:function(t){var n=t._point.round(),r=Math.round(t._radius),s=Math.round(t._radiusY||r);this._setPath(t,t._empty()?"M0 0":"AL "+n.x+","+n.y+" "+r+","+s+" 0,"+65535*360)},_setPath:function(t,n){t._path.v=n},_bringToFront:function(t){Le(t._container)},_bringToBack:function(t){Me(t._container)}},Bn=F.vml?Qe:Pt,tn=Qt.extend({_initContainer:function(){this._container=Bn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),ct(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qt.prototype._update.call(this);var t=this._bounds,n=t.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(n))&&(this._svgSize=n,r.setAttribute("width",n.x),r.setAttribute("height",n.y)),_t(r,t.min),r.setAttribute("viewBox",[t.min.x,t.min.y,n.x,n.y].join(" ")),this.fire("update")}},_initPath:function(t){var n=t._path=Bn("path");t.options.className&&X(n,t.options.className),t.options.interactive&&X(n,"leaflet-interactive"),this._updateStyle(t),this._layers[m(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ft(t._path),t.removeInteractiveTarget(t._path),delete this._layers[m(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var n=t._path,r=t.options;n&&(r.stroke?(n.setAttribute("stroke",r.color),n.setAttribute("stroke-opacity",r.opacity),n.setAttribute("stroke-width",r.weight),n.setAttribute("stroke-linecap",r.lineCap),n.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?n.setAttribute("stroke-dasharray",r.dashArray):n.removeAttribute("stroke-dasharray"),r.dashOffset?n.setAttribute("stroke-dashoffset",r.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),r.fill?(n.setAttribute("fill",r.fillColor||r.color),n.setAttribute("fill-opacity",r.fillOpacity),n.setAttribute("fill-rule",r.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(t,n){this._setPath(t,Ct(t._parts,n))},_updateCircle:function(t){var n=t._point,r=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||r,l="a"+r+","+s+" 0 1,0 ",f=t._empty()?"M0 0":"M"+(n.x-r)+","+n.y+l+r*2+",0 "+l+-r*2+",0 ";this._setPath(t,f)},_setPath:function(t,n){t._path.setAttribute("d",n)},_bringToFront:function(t){Le(t._path)},_bringToBack:function(t){Me(t._path)}});F.vml&&tn.include(rl);function zo(t){return F.svg||F.vml?new tn(t):null}tt.include({getRenderer:function(t){var n=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this._createRenderer()),this.hasLayer(n)||this.addLayer(n),n},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var n=this._paneRenderers[t];return n===void 0&&(n=this._createRenderer({pane:t}),this._paneRenderers[t]=n),n},_createRenderer:function(t){return this.options.preferCanvas&&Bo(t)||zo(t)}});var Oo=Se.extend({initialize:function(t,n){Se.prototype.initialize.call(this,this._boundsToLatLngs(t),n)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=mt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ol(t,n){return new Oo(t,n)}tn.create=Bn,tn.pointsToPath=Ct,jt.geometryToLayer=Cn,jt.coordsToLatLng=Ri,jt.coordsToLatLngs=Sn,jt.latLngToCoords=Hi,jt.latLngsToCoords=En,jt.getFeature=Ee,jt.asFeature=kn,tt.mergeOptions({boxZoom:!0});var No=Vt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Y(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qe(),Ti(),this._startPoint=this._map.mouseEventToContainerPoint(t),Y(document,{contextmenu:de,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=rt("div","leaflet-zoom-box",this._container),X(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var n=new et(this._point,this._startPoint),r=n.getSize();_t(this._box,n.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(ft(this._box),pt(this._container,"leaflet-crosshair")),Ve(),Li(),ct(document,{contextmenu:de,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var n=new wt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(n).fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});tt.addInitHook("addHandler","boxZoom",No),tt.mergeOptions({doubleClickZoom:!0});var Zo=Vt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var n=this._map,r=n.getZoom(),s=n.options.zoomDelta,l=t.originalEvent.shiftKey?r-s:r+s;n.options.doubleClickZoom==="center"?n.setZoom(l):n.setZoomAround(t.containerPoint,l)}});tt.addInitHook("addHandler","doubleClickZoom",Zo),tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fo=Vt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new se(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}X(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pt(this._map._container,"leaflet-grab"),pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var n=mt(this._map.options.maxBounds);this._offsetLimit=vt(this._map.latLngToContainerPoint(n.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(n.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var n=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(n),this._prunePositions(n)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),n=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=n.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,n){return t-(t-n)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),n=this._offsetLimit;t.x<n.min.x&&(t.x=this._viscousLimit(t.x,n.min.x)),t.y<n.min.y&&(t.y=this._viscousLimit(t.y,n.min.y)),t.x>n.max.x&&(t.x=this._viscousLimit(t.x,n.max.x)),t.y>n.max.y&&(t.y=this._viscousLimit(t.y,n.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,n=Math.round(t/2),r=this._initialWorldOffset,s=this._draggable._newPos.x,l=(s-n+r)%t+n-r,f=(s+n+r)%t-n-r,g=Math.abs(l+r)<Math.abs(f+r)?l:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(t){var n=this._map,r=n.options,s=!r.inertia||t.noInertia||this._times.length<2;if(n.fire("dragend",t),s)n.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,g=r.easeLinearity,w=l.multiplyBy(g/f),x=w.distanceTo([0,0]),M=Math.min(r.inertiaMaxSpeed,x),A=w.multiplyBy(M/x),U=M/(r.inertiaDeceleration*g),K=A.multiplyBy(-U/2).round();!K.x&&!K.y?n.fire("moveend"):(K=n._limitOffset(K,n.options.maxBounds),W(function(){n.panBy(K,{duration:U,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});tt.addInitHook("addHandler","dragging",Fo),tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ro=Vt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Y(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ct(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,n=document.documentElement,r=t.scrollTop||n.scrollTop,s=t.scrollLeft||n.scrollLeft;this._map._container.focus(),window.scrollTo(s,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var n=this._panKeys={},r=this.keyCodes,s,l;for(s=0,l=r.left.length;s<l;s++)n[r.left[s]]=[-1*t,0];for(s=0,l=r.right.length;s<l;s++)n[r.right[s]]=[t,0];for(s=0,l=r.down.length;s<l;s++)n[r.down[s]]=[0,t];for(s=0,l=r.up.length;s<l;s++)n[r.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var n=this._zoomKeys={},r=this.keyCodes,s,l;for(s=0,l=r.zoomIn.length;s<l;s++)n[r.zoomIn[s]]=t;for(s=0,l=r.zoomOut.length;s<l;s++)n[r.zoomOut[s]]=-t},_addHooks:function(){Y(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=t.keyCode,r=this._map,s;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(s=this._panKeys[n],t.shiftKey&&(s=B(s).multiplyBy(3)),r.options.maxBounds&&(s=r._limitOffset(B(s),r.options.maxBounds)),r.options.worldCopyJump){var l=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(s)));r.panTo(l)}else r.panBy(s)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else if(n===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;de(t)}}});tt.addInitHook("addHandler","keyboard",Ro),tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ho=Vt.extend({addHooks:function(){Y(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var n=ho(t),r=this._map.options.wheelDebounceTime;this._delta+=n,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),s),de(t)},_performZoom:function(){var t=this._map,n=t.getZoom(),r=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,f=r?Math.ceil(l/r)*r:l,g=t._limitZoom(n+(this._delta>0?f:-f))-n;this._delta=0,this._startTime=null,g&&(t.options.scrollWheelZoom==="center"?t.setZoom(n+g):t.setZoomAround(this._lastMousePos,n+g))}});tt.addInitHook("addHandler","scrollWheelZoom",Ho);var sl=600;tt.mergeOptions({tapHold:F.touchNative&&F.safari&&F.mobile,tapTolerance:15});var Wo=Vt.extend({addHooks:function(){Y(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var n=t.touches[0];this._startPos=this._newPos=new N(n.clientX,n.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Y(document,"touchend",Mt),Y(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",n))},this),sl),Y(document,"touchend touchcancel contextmenu",this._cancel,this),Y(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){ct(document,"touchend",Mt),ct(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)},_onMove:function(t){var n=t.touches[0];this._newPos=new N(n.clientX,n.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,n){var r=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});r._simulated=!0,n.target.dispatchEvent(r)}});tt.addInitHook("addHandler","tapHold",Wo),tt.mergeOptions({touchZoom:F.touch,bounceAtZoomLimits:!0});var Uo=Vt.extend({addHooks:function(){X(this._map._container,"leaflet-touch-zoom"),Y(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(!(!t.touches||t.touches.length!==2||n._animatingZoom||this._zooming)){var r=n.mouseEventToContainerPoint(t.touches[0]),s=n.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),n.options.touchZoom!=="center"&&(this._pinchStartLatLng=n.containerPointToLatLng(r.add(s)._divideBy(2))),this._startDist=r.distanceTo(s),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),Y(document,"touchmove",this._onTouchMove,this),Y(document,"touchend touchcancel",this._onTouchEnd,this),Mt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var n=this._map,r=n.mouseEventToContainerPoint(t.touches[0]),s=n.mouseEventToContainerPoint(t.touches[1]),l=r.distanceTo(s)/this._startDist;if(this._zoom=n.getScaleZoom(l,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&l<1||this._zoom>n.getMaxZoom()&&l>1)&&(this._zoom=n._limitZoom(this._zoom)),n.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var f=r._add(s)._divideBy(2)._subtract(this._centerPoint);if(l===1&&f.x===0&&f.y===0)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(n._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var g=c(n._move,n,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=W(g,this,!0),Mt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,P(this._animRequest),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});tt.addInitHook("addHandler","touchZoom",Uo),tt.BoxZoom=No,tt.DoubleClickZoom=Zo,tt.Drag=Fo,tt.Keyboard=Ro,tt.ScrollWheelZoom=Ho,tt.TapHold=Wo,tt.TouchZoom=Uo,o.Bounds=et,o.Browser=F,o.CRS=Ot,o.Canvas=Io,o.Circle=Fi,o.CircleMarker=Pn,o.Class=H,o.Control=Zt,o.DivIcon=ko,o.DivOverlay=Yt,o.DomEvent=Lu,o.DomUtil=bu,o.Draggable=se,o.Evented=it,o.FeatureGroup=Kt,o.GeoJSON=jt,o.GridLayer=je,o.Handler=Vt,o.Icon=Ce,o.ImageOverlay=An,o.LatLng=ut,o.LatLngBounds=wt,o.Layer=Ft,o.LayerGroup=Pe,o.LineUtil=Nu,o.Map=tt,o.Marker=Mn,o.Mixin=Au,o.Path=ae,o.Point=N,o.PolyUtil=Du,o.Polygon=Se,o.Polyline=Jt,o.Popup=Dn,o.PosAnimation=co,o.Projection=Zu,o.Rectangle=Oo,o.Renderer=Qt,o.SVG=tn,o.SVGOverlay=Eo,o.TileLayer=ke,o.Tooltip=In,o.Transformation=j,o.Util=q,o.VideoOverlay=So,o.bind=c,o.bounds=vt,o.canvas=Bo,o.circle=Vu,o.circleMarker=qu,o.control=Xe,o.divIcon=el,o.extend=u,o.featureGroup=Wu,o.geoJSON=Co,o.geoJson=Xu,o.gridLayer=nl,o.icon=Uu,o.imageOverlay=Ku,o.latLng=J,o.latLngBounds=mt,o.layerGroup=Hu,o.map=Mu,o.marker=$u,o.point=B,o.polygon=Gu,o.polyline=Yu,o.popup=Qu,o.rectangle=ol,o.setOptions=T,o.stamp=m,o.svg=zo,o.svgOverlay=ju,o.tileLayer=Ao,o.tooltip=tl,o.transformation=C,o.version=a,o.videoOverlay=Ju;var al=window.L;o.noConflict=function(){return window.L=al,this},window.L=o}))})(an,an.exports)),an.exports}var xl=wl();const Oe=vl(xl);let ue,$i=null,On=null,Hn=null,vr="dark";const bl={attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20,detectRetina:!0};function Tl(e){return e==="light"?"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}function Fs(e){ue&&(Hn&&ue.removeLayer(Hn),Hn=Oe.tileLayer(Tl(e),bl).addTo(ue),vr=e)}function Ll(){return ue=Oe.map("map",{attributionControl:!1,zoomControl:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,center:[50.68847,-1.3034],zoom:10}),Fs(vr),ue}function Ml(e){const i=e==="light"?"light":"dark";vr===i&&Hn||Fs(i)}function Pl(e,i){e.forEach(o=>{const a=Oe.divIcon({className:"custom-marker",iconSize:[12,12]}),u=Oe.marker(o.coords,{icon:a}).addTo(ue),h=()=>{const c=u._icon;c&&($i&&$i.classList.remove("selected-marker"),c.classList.add("selected-marker"),$i=c,i(o))};u.on("click",h),u.on("add",()=>{const c=u._icon;c&&(c.setAttribute("tabindex","0"),c.setAttribute("role","button"),c.setAttribute("aria-label",`Select ${o.name} beach`),c.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),h())}))}),o.name==="Sandown"&&setTimeout(h,0)})}function Cl(e){On&&ue.removeLayer(On),On=Oe.marker(e,{icon:Oe.divIcon({className:"tide-station-marker",html:'<div class="diamond-marker"></div>',iconSize:[12,12],iconAnchor:[6,6]})}).addTo(ue),On.setZIndexOffset(-1e3)}function Wn(e,i){return e==null||i==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function Sl(e,i){return e==null||i==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function yr(e){let i,o,a;e.length!==2?(i=Wn,o=(d,m)=>Wn(e(d),m),a=(d,m)=>e(d)-m):(i=e===Wn||e===Sl?e:El,o=e,a=e);function u(d,m,p=0,v=d.length){if(p<v){if(i(m,m)!==0)return v;do{const _=p+v>>>1;o(d[_],m)<0?p=_+1:v=_}while(p<v)}return p}function h(d,m,p=0,v=d.length){if(p<v){if(i(m,m)!==0)return v;do{const _=p+v>>>1;o(d[_],m)<=0?p=_+1:v=_}while(p<v)}return p}function c(d,m,p=0,v=d.length){const _=u(d,m,p,v-1);return _>p&&a(d[_-1],m)>-a(d[_],m)?_-1:_}return{left:u,center:c,right:h}}function El(){return 0}function kl(e){return e===null?NaN:+e}const Al=yr(Wn),Dl=Al.right;yr(kl).center;const Il=Math.sqrt(50),Bl=Math.sqrt(10),zl=Math.sqrt(2);function Gn(e,i,o){const a=(i-e)/Math.max(0,o),u=Math.floor(Math.log10(a)),h=a/Math.pow(10,u),c=h>=Il?10:h>=Bl?5:h>=zl?2:1;let d,m,p;return u<0?(p=Math.pow(10,-u)/c,d=Math.round(e*p),m=Math.round(i*p),d/p<e&&++d,m/p>i&&--m,p=-p):(p=Math.pow(10,u)*c,d=Math.round(e/p),m=Math.round(i/p),d*p<e&&++d,m*p>i&&--m),m<d&&.5<=o&&o<2?Gn(e,i,o*2):[d,m,p]}function Ol(e,i,o){if(i=+i,e=+e,o=+o,!(o>0))return[];if(e===i)return[e];const a=i<e,[u,h,c]=a?Gn(i,e,o):Gn(e,i,o);if(!(h>=u))return[];const d=h-u+1,m=new Array(d);if(a)if(c<0)for(let p=0;p<d;++p)m[p]=(h-p)/-c;else for(let p=0;p<d;++p)m[p]=(h-p)*c;else if(c<0)for(let p=0;p<d;++p)m[p]=(u+p)/-c;else for(let p=0;p<d;++p)m[p]=(u+p)*c;return m}function rr(e,i,o){return i=+i,e=+e,o=+o,Gn(e,i,o)[2]}function or(e,i,o){i=+i,e=+e,o=+o;const a=i<e,u=a?rr(i,e,o):rr(e,i,o);return(a?-1:1)*(u<0?1/-u:u)}function Nl(e){return e}var qi=1,Vi=2,sr=3,un=4,Go=1e-6;function Zl(e){return"translate("+e+",0)"}function Fl(e){return"translate(0,"+e+")"}function Rl(e){return i=>+e(i)}function Hl(e,i){return i=Math.max(0,e.bandwidth()-i*2)/2,e.round()&&(i=Math.round(i)),o=>+e(o)+i}function Wl(){return!this.__axis}function Rs(e,i){var o=[],a=null,u=null,h=6,c=6,d=3,m=typeof window<"u"&&window.devicePixelRatio>1?0:.5,p=e===qi||e===un?-1:1,v=e===un||e===Vi?"x":"y",_=e===qi||e===sr?Zl:Fl;function y(b){var E=a??(i.ticks?i.ticks.apply(i,o):i.domain()),T=u??(i.tickFormat?i.tickFormat.apply(i,o):Nl),k=Math.max(h,0)+d,z=i.range(),R=+z[0]+m,I=+z[z.length-1]+m,Z=(i.bandwidth?Hl:Rl)(i.copy(),m),V=b.selection?b.selection():b,S=V.selectAll(".domain").data([null]),O=V.selectAll(".tick").data(E,i).order(),st=O.exit(),nt=O.enter().append("g").attr("class","tick"),ht=O.select("line"),W=O.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(nt),ht=ht.merge(nt.append("line").attr("stroke","currentColor").attr(v+"2",p*h)),W=W.merge(nt.append("text").attr("fill","currentColor").attr(v,p*k).attr("dy",e===qi?"0em":e===sr?"0.71em":"0.32em")),b!==V&&(S=S.transition(b),O=O.transition(b),ht=ht.transition(b),W=W.transition(b),st=st.transition(b).attr("opacity",Go).attr("transform",function(P){return isFinite(P=Z(P))?_(P+m):this.getAttribute("transform")}),nt.attr("opacity",Go).attr("transform",function(P){var q=this.parentNode.__axis;return _((q&&isFinite(q=q(P))?q:Z(P))+m)})),st.remove(),S.attr("d",e===un||e===Vi?c?"M"+p*c+","+R+"H"+m+"V"+I+"H"+p*c:"M"+m+","+R+"V"+I:c?"M"+R+","+p*c+"V"+m+"H"+I+"V"+p*c:"M"+R+","+m+"H"+I),O.attr("opacity",1).attr("transform",function(P){return _(Z(P)+m)}),ht.attr(v+"2",p*h),W.attr(v,p*k).text(T),V.filter(Wl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Vi?"start":e===un?"end":"middle"),V.each(function(){this.__axis=Z})}return y.scale=function(b){return arguments.length?(i=b,y):i},y.ticks=function(){return o=Array.from(arguments),y},y.tickArguments=function(b){return arguments.length?(o=b==null?[]:Array.from(b),y):o.slice()},y.tickValues=function(b){return arguments.length?(a=b==null?null:Array.from(b),y):a&&a.slice()},y.tickFormat=function(b){return arguments.length?(u=b,y):u},y.tickSize=function(b){return arguments.length?(h=c=+b,y):h},y.tickSizeInner=function(b){return arguments.length?(h=+b,y):h},y.tickSizeOuter=function(b){return arguments.length?(c=+b,y):c},y.tickPadding=function(b){return arguments.length?(d=+b,y):d},y.offset=function(b){return arguments.length?(m=+b,y):m},y}function Ul(e){return Rs(sr,e)}function Xo(e){return Rs(un,e)}var $l={value:()=>{}};function Hs(){for(var e=0,i=arguments.length,o={},a;e<i;++e){if(!(a=arguments[e]+"")||a in o||/[\s.]/.test(a))throw new Error("illegal type: "+a);o[a]=[]}return new Un(o)}function Un(e){this._=e}function ql(e,i){return e.trim().split(/^|\s+/).map(function(o){var a="",u=o.indexOf(".");if(u>=0&&(a=o.slice(u+1),o=o.slice(0,u)),o&&!i.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:a}})}Un.prototype=Hs.prototype={constructor:Un,on:function(e,i){var o=this._,a=ql(e+"",o),u,h=-1,c=a.length;if(arguments.length<2){for(;++h<c;)if((u=(e=a[h]).type)&&(u=Vl(o[u],e.name)))return u;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++h<c;)if(u=(e=a[h]).type)o[u]=Ko(o[u],e.name,i);else if(i==null)for(u in o)o[u]=Ko(o[u],e.name,null);return this},copy:function(){var e={},i=this._;for(var o in i)e[o]=i[o].slice();return new Un(e)},call:function(e,i){if((u=arguments.length-2)>0)for(var o=new Array(u),a=0,u,h;a<u;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(h=this._[e],a=0,u=h.length;a<u;++a)h[a].value.apply(i,o)},apply:function(e,i,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],u=0,h=a.length;u<h;++u)a[u].value.apply(i,o)}};function Vl(e,i){for(var o=0,a=e.length,u;o<a;++o)if((u=e[o]).name===i)return u.value}function Ko(e,i,o){for(var a=0,u=e.length;a<u;++a)if(e[a].name===i){e[a]=$l,e=e.slice(0,a).concat(e.slice(a+1));break}return o!=null&&e.push({name:i,value:o}),e}var ar="http://www.w3.org/1999/xhtml";const Jo={svg:"http://www.w3.org/2000/svg",xhtml:ar,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function li(e){var i=e+="",o=i.indexOf(":");return o>=0&&(i=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),Jo.hasOwnProperty(i)?{space:Jo[i],local:e}:e}function Yl(e){return function(){var i=this.ownerDocument,o=this.namespaceURI;return o===ar&&i.documentElement.namespaceURI===ar?i.createElement(e):i.createElementNS(o,e)}}function Gl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ws(e){var i=li(e);return(i.local?Gl:Yl)(i)}function Xl(){}function wr(e){return e==null?Xl:function(){return this.querySelector(e)}}function Kl(e){typeof e!="function"&&(e=wr(e));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var h=i[u],c=h.length,d=a[u]=new Array(c),m,p,v=0;v<c;++v)(m=h[v])&&(p=e.call(m,m.__data__,v,h))&&("__data__"in m&&(p.__data__=m.__data__),d[v]=p);return new At(a,this._parents)}function Jl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function jl(){return[]}function Us(e){return e==null?jl:function(){return this.querySelectorAll(e)}}function Ql(e){return function(){return Jl(e.apply(this,arguments))}}function th(e){typeof e=="function"?e=Ql(e):e=Us(e);for(var i=this._groups,o=i.length,a=[],u=[],h=0;h<o;++h)for(var c=i[h],d=c.length,m,p=0;p<d;++p)(m=c[p])&&(a.push(e.call(m,m.__data__,p,c)),u.push(m));return new At(a,u)}function $s(e){return function(){return this.matches(e)}}function qs(e){return function(i){return i.matches(e)}}var eh=Array.prototype.find;function nh(e){return function(){return eh.call(this.children,e)}}function ih(){return this.firstElementChild}function rh(e){return this.select(e==null?ih:nh(typeof e=="function"?e:qs(e)))}var oh=Array.prototype.filter;function sh(){return Array.from(this.children)}function ah(e){return function(){return oh.call(this.children,e)}}function uh(e){return this.selectAll(e==null?sh:ah(typeof e=="function"?e:qs(e)))}function lh(e){typeof e!="function"&&(e=$s(e));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var h=i[u],c=h.length,d=a[u]=[],m,p=0;p<c;++p)(m=h[p])&&e.call(m,m.__data__,p,h)&&d.push(m);return new At(a,this._parents)}function Vs(e){return new Array(e.length)}function hh(){return new At(this._enter||this._groups.map(Vs),this._parents)}function Xn(e,i){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=i}Xn.prototype={constructor:Xn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,i){return this._parent.insertBefore(e,i)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ch(e){return function(){return e}}function fh(e,i,o,a,u,h){for(var c=0,d,m=i.length,p=h.length;c<p;++c)(d=i[c])?(d.__data__=h[c],a[c]=d):o[c]=new Xn(e,h[c]);for(;c<m;++c)(d=i[c])&&(u[c]=d)}function dh(e,i,o,a,u,h,c){var d,m,p=new Map,v=i.length,_=h.length,y=new Array(v),b;for(d=0;d<v;++d)(m=i[d])&&(y[d]=b=c.call(m,m.__data__,d,i)+"",p.has(b)?u[d]=m:p.set(b,m));for(d=0;d<_;++d)b=c.call(e,h[d],d,h)+"",(m=p.get(b))?(a[d]=m,m.__data__=h[d],p.delete(b)):o[d]=new Xn(e,h[d]);for(d=0;d<v;++d)(m=i[d])&&p.get(y[d])===m&&(u[d]=m)}function mh(e){return e.__data__}function ph(e,i){if(!arguments.length)return Array.from(this,mh);var o=i?dh:fh,a=this._parents,u=this._groups;typeof e!="function"&&(e=ch(e));for(var h=u.length,c=new Array(h),d=new Array(h),m=new Array(h),p=0;p<h;++p){var v=a[p],_=u[p],y=_.length,b=_h(e.call(v,v&&v.__data__,p,a)),E=b.length,T=d[p]=new Array(E),k=c[p]=new Array(E),z=m[p]=new Array(y);o(v,_,T,k,z,b,i);for(var R=0,I=0,Z,V;R<E;++R)if(Z=T[R]){for(R>=I&&(I=R+1);!(V=k[I])&&++I<E;);Z._next=V||null}}return c=new At(c,a),c._enter=d,c._exit=m,c}function _h(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gh(){return new At(this._exit||this._groups.map(Vs),this._parents)}function vh(e,i,o){var a=this.enter(),u=this,h=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),i!=null&&(u=i(u),u&&(u=u.selection())),o==null?h.remove():o(h),a&&u?a.merge(u).order():u}function yh(e){for(var i=e.selection?e.selection():e,o=this._groups,a=i._groups,u=o.length,h=a.length,c=Math.min(u,h),d=new Array(u),m=0;m<c;++m)for(var p=o[m],v=a[m],_=p.length,y=d[m]=new Array(_),b,E=0;E<_;++E)(b=p[E]||v[E])&&(y[E]=b);for(;m<u;++m)d[m]=o[m];return new At(d,this._parents)}function wh(){for(var e=this._groups,i=-1,o=e.length;++i<o;)for(var a=e[i],u=a.length-1,h=a[u],c;--u>=0;)(c=a[u])&&(h&&c.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(c,h),h=c);return this}function xh(e){e||(e=bh);function i(_,y){return _&&y?e(_.__data__,y.__data__):!_-!y}for(var o=this._groups,a=o.length,u=new Array(a),h=0;h<a;++h){for(var c=o[h],d=c.length,m=u[h]=new Array(d),p,v=0;v<d;++v)(p=c[v])&&(m[v]=p);m.sort(i)}return new At(u,this._parents).order()}function bh(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function Th(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Lh(){return Array.from(this)}function Mh(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var a=e[i],u=0,h=a.length;u<h;++u){var c=a[u];if(c)return c}return null}function Ph(){let e=0;for(const i of this)++e;return e}function Ch(){return!this.node()}function Sh(e){for(var i=this._groups,o=0,a=i.length;o<a;++o)for(var u=i[o],h=0,c=u.length,d;h<c;++h)(d=u[h])&&e.call(d,d.__data__,h,u);return this}function Eh(e){return function(){this.removeAttribute(e)}}function kh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ah(e,i){return function(){this.setAttribute(e,i)}}function Dh(e,i){return function(){this.setAttributeNS(e.space,e.local,i)}}function Ih(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function Bh(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function zh(e,i){var o=li(e);if(arguments.length<2){var a=this.node();return o.local?a.getAttributeNS(o.space,o.local):a.getAttribute(o)}return this.each((i==null?o.local?kh:Eh:typeof i=="function"?o.local?Bh:Ih:o.local?Dh:Ah)(o,i))}function Ys(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Oh(e){return function(){this.style.removeProperty(e)}}function Nh(e,i,o){return function(){this.style.setProperty(e,i,o)}}function Zh(e,i,o){return function(){var a=i.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,o)}}function Fh(e,i,o){return arguments.length>1?this.each((i==null?Oh:typeof i=="function"?Zh:Nh)(e,i,o??"")):Ne(this.node(),e)}function Ne(e,i){return e.style.getPropertyValue(i)||Ys(e).getComputedStyle(e,null).getPropertyValue(i)}function Rh(e){return function(){delete this[e]}}function Hh(e,i){return function(){this[e]=i}}function Wh(e,i){return function(){var o=i.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function Uh(e,i){return arguments.length>1?this.each((i==null?Rh:typeof i=="function"?Wh:Hh)(e,i)):this.node()[e]}function Gs(e){return e.trim().split(/^|\s+/)}function xr(e){return e.classList||new Xs(e)}function Xs(e){this._node=e,this._names=Gs(e.getAttribute("class")||"")}Xs.prototype={add:function(e){var i=this._names.indexOf(e);i<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var i=this._names.indexOf(e);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ks(e,i){for(var o=xr(e),a=-1,u=i.length;++a<u;)o.add(i[a])}function Js(e,i){for(var o=xr(e),a=-1,u=i.length;++a<u;)o.remove(i[a])}function $h(e){return function(){Ks(this,e)}}function qh(e){return function(){Js(this,e)}}function Vh(e,i){return function(){(i.apply(this,arguments)?Ks:Js)(this,e)}}function Yh(e,i){var o=Gs(e+"");if(arguments.length<2){for(var a=xr(this.node()),u=-1,h=o.length;++u<h;)if(!a.contains(o[u]))return!1;return!0}return this.each((typeof i=="function"?Vh:i?$h:qh)(o,i))}function Gh(){this.textContent=""}function Xh(e){return function(){this.textContent=e}}function Kh(e){return function(){var i=e.apply(this,arguments);this.textContent=i??""}}function Jh(e){return arguments.length?this.each(e==null?Gh:(typeof e=="function"?Kh:Xh)(e)):this.node().textContent}function jh(){this.innerHTML=""}function Qh(e){return function(){this.innerHTML=e}}function tc(e){return function(){var i=e.apply(this,arguments);this.innerHTML=i??""}}function ec(e){return arguments.length?this.each(e==null?jh:(typeof e=="function"?tc:Qh)(e)):this.node().innerHTML}function nc(){this.nextSibling&&this.parentNode.appendChild(this)}function ic(){return this.each(nc)}function rc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oc(){return this.each(rc)}function sc(e){var i=typeof e=="function"?e:Ws(e);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function ac(){return null}function uc(e,i){var o=typeof e=="function"?e:Ws(e),a=i==null?ac:typeof i=="function"?i:wr(i);return this.select(function(){return this.insertBefore(o.apply(this,arguments),a.apply(this,arguments)||null)})}function lc(){var e=this.parentNode;e&&e.removeChild(this)}function hc(){return this.each(lc)}function cc(){var e=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function fc(){var e=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function dc(e){return this.select(e?fc:cc)}function mc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pc(e){return function(i){e.call(this,i,this.__data__)}}function _c(e){return e.trim().split(/^|\s+/).map(function(i){var o="",a=i.indexOf(".");return a>=0&&(o=i.slice(a+1),i=i.slice(0,a)),{type:i,name:o}})}function gc(e){return function(){var i=this.__on;if(i){for(var o=0,a=-1,u=i.length,h;o<u;++o)h=i[o],(!e.type||h.type===e.type)&&h.name===e.name?this.removeEventListener(h.type,h.listener,h.options):i[++a]=h;++a?i.length=a:delete this.__on}}}function vc(e,i,o){return function(){var a=this.__on,u,h=pc(i);if(a){for(var c=0,d=a.length;c<d;++c)if((u=a[c]).type===e.type&&u.name===e.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=h,u.options=o),u.value=i;return}}this.addEventListener(e.type,h,o),u={type:e.type,name:e.name,value:i,listener:h,options:o},a?a.push(u):this.__on=[u]}}function yc(e,i,o){var a=_c(e+""),u,h=a.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var m=0,p=d.length,v;m<p;++m)for(u=0,v=d[m];u<h;++u)if((c=a[u]).type===v.type&&c.name===v.name)return v.value}return}for(d=i?vc:gc,u=0;u<h;++u)this.each(d(a[u],i,o));return this}function js(e,i,o){var a=Ys(e),u=a.CustomEvent;typeof u=="function"?u=new u(i,o):(u=a.document.createEvent("Event"),o?(u.initEvent(i,o.bubbles,o.cancelable),u.detail=o.detail):u.initEvent(i,!1,!1)),e.dispatchEvent(u)}function wc(e,i){return function(){return js(this,e,i)}}function xc(e,i){return function(){return js(this,e,i.apply(this,arguments))}}function bc(e,i){return this.each((typeof i=="function"?xc:wc)(e,i))}function*Tc(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var a=e[i],u=0,h=a.length,c;u<h;++u)(c=a[u])&&(yield c)}var Qs=[null];function At(e,i){this._groups=e,this._parents=i}function pn(){return new At([[document.documentElement]],Qs)}function Lc(){return this}At.prototype=pn.prototype={constructor:At,select:Kl,selectAll:th,selectChild:rh,selectChildren:uh,filter:lh,data:ph,enter:hh,exit:gh,join:vh,merge:yh,selection:Lc,order:wh,sort:xh,call:Th,nodes:Lh,node:Mh,size:Ph,empty:Ch,each:Sh,attr:zh,style:Fh,property:Uh,classed:Yh,text:Jh,html:ec,raise:ic,lower:oc,append:sc,insert:uc,remove:hc,clone:dc,datum:mc,on:yc,dispatch:bc,[Symbol.iterator]:Tc};function Yi(e){return typeof e=="string"?new At([[document.querySelector(e)]],[document.documentElement]):new At([[e]],Qs)}function Mc(e){let i;for(;i=e.sourceEvent;)e=i;return e}function Pc(e,i){if(e=Mc(e),i===void 0&&(i=e.currentTarget),i){var o=i.ownerSVGElement||i;if(o.createSVGPoint){var a=o.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(i.getScreenCTM().inverse()),[a.x,a.y]}if(i.getBoundingClientRect){var u=i.getBoundingClientRect();return[e.clientX-u.left-i.clientLeft,e.clientY-u.top-i.clientTop]}}return[e.pageX,e.pageY]}function br(e,i,o){e.prototype=i.prototype=o,o.constructor=e}function ta(e,i){var o=Object.create(e.prototype);for(var a in i)o[a]=i[a];return o}function _n(){}var fn=.7,Kn=1/fn,ze="\\s*([+-]?\\d+)\\s*",dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cc=/^#([0-9a-f]{3,8})$/,Sc=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),Ec=new RegExp(`^rgb\\(${Gt},${Gt},${Gt}\\)$`),kc=new RegExp(`^rgba\\(${ze},${ze},${ze},${dn}\\)$`),Ac=new RegExp(`^rgba\\(${Gt},${Gt},${Gt},${dn}\\)$`),Dc=new RegExp(`^hsl\\(${dn},${Gt},${Gt}\\)$`),Ic=new RegExp(`^hsla\\(${dn},${Gt},${Gt},${dn}\\)$`),jo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};br(_n,ve,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Qo,formatHex:Qo,formatHex8:Bc,formatHsl:zc,formatRgb:ts,toString:ts});function Qo(){return this.rgb().formatHex()}function Bc(){return this.rgb().formatHex8()}function zc(){return ea(this).formatHsl()}function ts(){return this.rgb().formatRgb()}function ve(e){var i,o;return e=(e+"").trim().toLowerCase(),(i=Cc.exec(e))?(o=i[1].length,i=parseInt(i[1],16),o===6?es(i):o===3?new kt(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):o===8?Nn(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):o===4?Nn(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=Sc.exec(e))?new kt(i[1],i[2],i[3],1):(i=Ec.exec(e))?new kt(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=kc.exec(e))?Nn(i[1],i[2],i[3],i[4]):(i=Ac.exec(e))?Nn(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=Dc.exec(e))?rs(i[1],i[2]/100,i[3]/100,1):(i=Ic.exec(e))?rs(i[1],i[2]/100,i[3]/100,i[4]):jo.hasOwnProperty(e)?es(jo[e]):e==="transparent"?new kt(NaN,NaN,NaN,0):null}function es(e){return new kt(e>>16&255,e>>8&255,e&255,1)}function Nn(e,i,o,a){return a<=0&&(e=i=o=NaN),new kt(e,i,o,a)}function Oc(e){return e instanceof _n||(e=ve(e)),e?(e=e.rgb(),new kt(e.r,e.g,e.b,e.opacity)):new kt}function ur(e,i,o,a){return arguments.length===1?Oc(e):new kt(e,i,o,a??1)}function kt(e,i,o,a){this.r=+e,this.g=+i,this.b=+o,this.opacity=+a}br(kt,ur,ta(_n,{brighter(e){return e=e==null?Kn:Math.pow(Kn,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kt(ge(this.r),ge(this.g),ge(this.b),Jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ns,formatHex:ns,formatHex8:Nc,formatRgb:is,toString:is}));function ns(){return`#${_e(this.r)}${_e(this.g)}${_e(this.b)}`}function Nc(){return`#${_e(this.r)}${_e(this.g)}${_e(this.b)}${_e((isNaN(this.opacity)?1:this.opacity)*255)}`}function is(){const e=Jn(this.opacity);return`${e===1?"rgb(":"rgba("}${ge(this.r)}, ${ge(this.g)}, ${ge(this.b)}${e===1?")":`, ${e})`}`}function Jn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ge(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _e(e){return e=ge(e),(e<16?"0":"")+e.toString(16)}function rs(e,i,o,a){return a<=0?e=i=o=NaN:o<=0||o>=1?e=i=NaN:i<=0&&(e=NaN),new Ht(e,i,o,a)}function ea(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof _n||(e=ve(e)),!e)return new Ht;if(e instanceof Ht)return e;e=e.rgb();var i=e.r/255,o=e.g/255,a=e.b/255,u=Math.min(i,o,a),h=Math.max(i,o,a),c=NaN,d=h-u,m=(h+u)/2;return d?(i===h?c=(o-a)/d+(o<a)*6:o===h?c=(a-i)/d+2:c=(i-o)/d+4,d/=m<.5?h+u:2-h-u,c*=60):d=m>0&&m<1?0:c,new Ht(c,d,m,e.opacity)}function Zc(e,i,o,a){return arguments.length===1?ea(e):new Ht(e,i,o,a??1)}function Ht(e,i,o,a){this.h=+e,this.s=+i,this.l=+o,this.opacity=+a}br(Ht,Zc,ta(_n,{brighter(e){return e=e==null?Kn:Math.pow(Kn,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,i=isNaN(e)||isNaN(this.s)?0:this.s,o=this.l,a=o+(o<.5?o:1-o)*i,u=2*o-a;return new kt(Gi(e>=240?e-240:e+120,u,a),Gi(e,u,a),Gi(e<120?e+240:e-120,u,a),this.opacity)},clamp(){return new Ht(os(this.h),Zn(this.s),Zn(this.l),Jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jn(this.opacity);return`${e===1?"hsl(":"hsla("}${os(this.h)}, ${Zn(this.s)*100}%, ${Zn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function os(e){return e=(e||0)%360,e<0?e+360:e}function Zn(e){return Math.max(0,Math.min(1,e||0))}function Gi(e,i,o){return(e<60?i+(o-i)*e/60:e<180?o:e<240?i+(o-i)*(240-e)/60:i)*255}const Tr=e=>()=>e;function Fc(e,i){return function(o){return e+o*i}}function Rc(e,i,o){return e=Math.pow(e,o),i=Math.pow(i,o)-e,o=1/o,function(a){return Math.pow(e+a*i,o)}}function Hc(e){return(e=+e)==1?na:function(i,o){return o-i?Rc(i,o,e):Tr(isNaN(i)?o:i)}}function na(e,i){var o=i-e;return o?Fc(e,o):Tr(isNaN(e)?i:e)}const jn=(function e(i){var o=Hc(i);function a(u,h){var c=o((u=ur(u)).r,(h=ur(h)).r),d=o(u.g,h.g),m=o(u.b,h.b),p=na(u.opacity,h.opacity);return function(v){return u.r=c(v),u.g=d(v),u.b=m(v),u.opacity=p(v),u+""}}return a.gamma=e,a})(1);function Wc(e,i){i||(i=[]);var o=e?Math.min(i.length,e.length):0,a=i.slice(),u;return function(h){for(u=0;u<o;++u)a[u]=e[u]*(1-h)+i[u]*h;return a}}function Uc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $c(e,i){var o=i?i.length:0,a=e?Math.min(o,e.length):0,u=new Array(a),h=new Array(o),c;for(c=0;c<a;++c)u[c]=Lr(e[c],i[c]);for(;c<o;++c)h[c]=i[c];return function(d){for(c=0;c<a;++c)h[c]=u[c](d);return h}}function qc(e,i){var o=new Date;return e=+e,i=+i,function(a){return o.setTime(e*(1-a)+i*a),o}}function Rt(e,i){return e=+e,i=+i,function(o){return e*(1-o)+i*o}}function Vc(e,i){var o={},a={},u;(e===null||typeof e!="object")&&(e={}),(i===null||typeof i!="object")&&(i={});for(u in i)u in e?o[u]=Lr(e[u],i[u]):a[u]=i[u];return function(h){for(u in o)a[u]=o[u](h);return a}}var lr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xi=new RegExp(lr.source,"g");function Yc(e){return function(){return e}}function Gc(e){return function(i){return e(i)+""}}function ia(e,i){var o=lr.lastIndex=Xi.lastIndex=0,a,u,h,c=-1,d=[],m=[];for(e=e+"",i=i+"";(a=lr.exec(e))&&(u=Xi.exec(i));)(h=u.index)>o&&(h=i.slice(o,h),d[c]?d[c]+=h:d[++c]=h),(a=a[0])===(u=u[0])?d[c]?d[c]+=u:d[++c]=u:(d[++c]=null,m.push({i:c,x:Rt(a,u)})),o=Xi.lastIndex;return o<i.length&&(h=i.slice(o),d[c]?d[c]+=h:d[++c]=h),d.length<2?m[0]?Gc(m[0].x):Yc(i):(i=m.length,function(p){for(var v=0,_;v<i;++v)d[(_=m[v]).i]=_.x(p);return d.join("")})}function Lr(e,i){var o=typeof i,a;return i==null||o==="boolean"?Tr(i):(o==="number"?Rt:o==="string"?(a=ve(i))?(i=a,jn):ia:i instanceof ve?jn:i instanceof Date?qc:Uc(i)?Wc:Array.isArray(i)?$c:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?Vc:Rt)(e,i)}function Xc(e,i){return e=+e,i=+i,function(o){return Math.round(e*(1-o)+i*o)}}var ss=180/Math.PI,hr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ra(e,i,o,a,u,h){var c,d,m;return(c=Math.sqrt(e*e+i*i))&&(e/=c,i/=c),(m=e*o+i*a)&&(o-=e*m,a-=i*m),(d=Math.sqrt(o*o+a*a))&&(o/=d,a/=d,m/=d),e*a<i*o&&(e=-e,i=-i,m=-m,c=-c),{translateX:u,translateY:h,rotate:Math.atan2(i,e)*ss,skewX:Math.atan(m)*ss,scaleX:c,scaleY:d}}var Fn;function Kc(e){const i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return i.isIdentity?hr:ra(i.a,i.b,i.c,i.d,i.e,i.f)}function Jc(e){return e==null||(Fn||(Fn=document.createElementNS("http://www.w3.org/2000/svg","g")),Fn.setAttribute("transform",e),!(e=Fn.transform.baseVal.consolidate()))?hr:(e=e.matrix,ra(e.a,e.b,e.c,e.d,e.e,e.f))}function oa(e,i,o,a){function u(p){return p.length?p.pop()+" ":""}function h(p,v,_,y,b,E){if(p!==_||v!==y){var T=b.push("translate(",null,i,null,o);E.push({i:T-4,x:Rt(p,_)},{i:T-2,x:Rt(v,y)})}else(_||y)&&b.push("translate("+_+i+y+o)}function c(p,v,_,y){p!==v?(p-v>180?v+=360:v-p>180&&(p+=360),y.push({i:_.push(u(_)+"rotate(",null,a)-2,x:Rt(p,v)})):v&&_.push(u(_)+"rotate("+v+a)}function d(p,v,_,y){p!==v?y.push({i:_.push(u(_)+"skewX(",null,a)-2,x:Rt(p,v)}):v&&_.push(u(_)+"skewX("+v+a)}function m(p,v,_,y,b,E){if(p!==_||v!==y){var T=b.push(u(b)+"scale(",null,",",null,")");E.push({i:T-4,x:Rt(p,_)},{i:T-2,x:Rt(v,y)})}else(_!==1||y!==1)&&b.push(u(b)+"scale("+_+","+y+")")}return function(p,v){var _=[],y=[];return p=e(p),v=e(v),h(p.translateX,p.translateY,v.translateX,v.translateY,_,y),c(p.rotate,v.rotate,_,y),d(p.skewX,v.skewX,_,y),m(p.scaleX,p.scaleY,v.scaleX,v.scaleY,_,y),p=v=null,function(b){for(var E=-1,T=y.length,k;++E<T;)_[(k=y[E]).i]=k.x(b);return _.join("")}}}var jc=oa(Kc,"px, ","px)","deg)"),Qc=oa(Jc,", ",")",")"),Ze=0,ln=0,en=0,sa=1e3,Qn,hn,ti=0,ye=0,hi=0,mn=typeof performance=="object"&&performance.now?performance:Date,aa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mr(){return ye||(aa(tf),ye=mn.now()+hi)}function tf(){ye=0}function ei(){this._call=this._time=this._next=null}ei.prototype=ua.prototype={constructor:ei,restart:function(e,i,o){if(typeof e!="function")throw new TypeError("callback is not a function");o=(o==null?Mr():+o)+(i==null?0:+i),!this._next&&hn!==this&&(hn?hn._next=this:Qn=this,hn=this),this._call=e,this._time=o,cr()},stop:function(){this._call&&(this._call=null,this._time=1/0,cr())}};function ua(e,i,o){var a=new ei;return a.restart(e,i,o),a}function ef(){Mr(),++Ze;for(var e=Qn,i;e;)(i=ye-e._time)>=0&&e._call.call(void 0,i),e=e._next;--Ze}function as(){ye=(ti=mn.now())+hi,Ze=ln=0;try{ef()}finally{Ze=0,rf(),ye=0}}function nf(){var e=mn.now(),i=e-ti;i>sa&&(hi-=i,ti=e)}function rf(){for(var e,i=Qn,o,a=1/0;i;)i._call?(a>i._time&&(a=i._time),e=i,i=i._next):(o=i._next,i._next=null,i=e?e._next=o:Qn=o);hn=e,cr(a)}function cr(e){if(!Ze){ln&&(ln=clearTimeout(ln));var i=e-ye;i>24?(e<1/0&&(ln=setTimeout(as,e-mn.now()-hi)),en&&(en=clearInterval(en))):(en||(ti=mn.now(),en=setInterval(nf,sa)),Ze=1,aa(as))}}function us(e,i,o){var a=new ei;return i=i==null?0:+i,a.restart(u=>{a.stop(),e(u+i)},i,o),a}var of=Hs("start","end","cancel","interrupt"),sf=[],la=0,ls=1,fr=2,$n=3,hs=4,dr=5,qn=6;function ci(e,i,o,a,u,h){var c=e.__transition;if(!c)e.__transition={};else if(o in c)return;af(e,o,{name:i,index:a,group:u,on:of,tween:sf,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:la})}function Pr(e,i){var o=Wt(e,i);if(o.state>la)throw new Error("too late; already scheduled");return o}function Xt(e,i){var o=Wt(e,i);if(o.state>$n)throw new Error("too late; already running");return o}function Wt(e,i){var o=e.__transition;if(!o||!(o=o[i]))throw new Error("transition not found");return o}function af(e,i,o){var a=e.__transition,u;a[i]=o,o.timer=ua(h,0,o.time);function h(p){o.state=ls,o.timer.restart(c,o.delay,o.time),o.delay<=p&&c(p-o.delay)}function c(p){var v,_,y,b;if(o.state!==ls)return m();for(v in a)if(b=a[v],b.name===o.name){if(b.state===$n)return us(c);b.state===hs?(b.state=qn,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete a[v]):+v<i&&(b.state=qn,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete a[v])}if(us(function(){o.state===$n&&(o.state=hs,o.timer.restart(d,o.delay,o.time),d(p))}),o.state=fr,o.on.call("start",e,e.__data__,o.index,o.group),o.state===fr){for(o.state=$n,u=new Array(y=o.tween.length),v=0,_=-1;v<y;++v)(b=o.tween[v].value.call(e,e.__data__,o.index,o.group))&&(u[++_]=b);u.length=_+1}}function d(p){for(var v=p<o.duration?o.ease.call(null,p/o.duration):(o.timer.restart(m),o.state=dr,1),_=-1,y=u.length;++_<y;)u[_].call(e,v);o.state===dr&&(o.on.call("end",e,e.__data__,o.index,o.group),m())}function m(){o.state=qn,o.timer.stop(),delete a[i];for(var p in a)return;delete e.__transition}}function uf(e,i){var o=e.__transition,a,u,h=!0,c;if(o){i=i==null?null:i+"";for(c in o){if((a=o[c]).name!==i){h=!1;continue}u=a.state>fr&&a.state<dr,a.state=qn,a.timer.stop(),a.on.call(u?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete o[c]}h&&delete e.__transition}}function lf(e){return this.each(function(){uf(this,e)})}function hf(e,i){var o,a;return function(){var u=Xt(this,e),h=u.tween;if(h!==o){a=o=h;for(var c=0,d=a.length;c<d;++c)if(a[c].name===i){a=a.slice(),a.splice(c,1);break}}u.tween=a}}function cf(e,i,o){var a,u;if(typeof o!="function")throw new Error;return function(){var h=Xt(this,e),c=h.tween;if(c!==a){u=(a=c).slice();for(var d={name:i,value:o},m=0,p=u.length;m<p;++m)if(u[m].name===i){u[m]=d;break}m===p&&u.push(d)}h.tween=u}}function ff(e,i){var o=this._id;if(e+="",arguments.length<2){for(var a=Wt(this.node(),o).tween,u=0,h=a.length,c;u<h;++u)if((c=a[u]).name===e)return c.value;return null}return this.each((i==null?hf:cf)(o,e,i))}function Cr(e,i,o){var a=e._id;return e.each(function(){var u=Xt(this,a);(u.value||(u.value={}))[i]=o.apply(this,arguments)}),function(u){return Wt(u,a).value[i]}}function ha(e,i){var o;return(typeof i=="number"?Rt:i instanceof ve?jn:(o=ve(i))?(i=o,jn):ia)(e,i)}function df(e){return function(){this.removeAttribute(e)}}function mf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pf(e,i,o){var a,u=o+"",h;return function(){var c=this.getAttribute(e);return c===u?null:c===a?h:h=i(a=c,o)}}function _f(e,i,o){var a,u=o+"",h;return function(){var c=this.getAttributeNS(e.space,e.local);return c===u?null:c===a?h:h=i(a=c,o)}}function gf(e,i,o){var a,u,h;return function(){var c,d=o(this),m;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),m=d+"",c===m?null:c===a&&m===u?h:(u=m,h=i(a=c,d)))}}function vf(e,i,o){var a,u,h;return function(){var c,d=o(this),m;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),m=d+"",c===m?null:c===a&&m===u?h:(u=m,h=i(a=c,d)))}}function yf(e,i){var o=li(e),a=o==="transform"?Qc:ha;return this.attrTween(e,typeof i=="function"?(o.local?vf:gf)(o,a,Cr(this,"attr."+e,i)):i==null?(o.local?mf:df)(o):(o.local?_f:pf)(o,a,i))}function wf(e,i){return function(o){this.setAttribute(e,i.call(this,o))}}function xf(e,i){return function(o){this.setAttributeNS(e.space,e.local,i.call(this,o))}}function bf(e,i){var o,a;function u(){var h=i.apply(this,arguments);return h!==a&&(o=(a=h)&&xf(e,h)),o}return u._value=i,u}function Tf(e,i){var o,a;function u(){var h=i.apply(this,arguments);return h!==a&&(o=(a=h)&&wf(e,h)),o}return u._value=i,u}function Lf(e,i){var o="attr."+e;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(i==null)return this.tween(o,null);if(typeof i!="function")throw new Error;var a=li(e);return this.tween(o,(a.local?bf:Tf)(a,i))}function Mf(e,i){return function(){Pr(this,e).delay=+i.apply(this,arguments)}}function Pf(e,i){return i=+i,function(){Pr(this,e).delay=i}}function Cf(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Mf:Pf)(i,e)):Wt(this.node(),i).delay}function Sf(e,i){return function(){Xt(this,e).duration=+i.apply(this,arguments)}}function Ef(e,i){return i=+i,function(){Xt(this,e).duration=i}}function kf(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Sf:Ef)(i,e)):Wt(this.node(),i).duration}function Af(e,i){if(typeof i!="function")throw new Error;return function(){Xt(this,e).ease=i}}function Df(e){var i=this._id;return arguments.length?this.each(Af(i,e)):Wt(this.node(),i).ease}function If(e,i){return function(){var o=i.apply(this,arguments);if(typeof o!="function")throw new Error;Xt(this,e).ease=o}}function Bf(e){if(typeof e!="function")throw new Error;return this.each(If(this._id,e))}function zf(e){typeof e!="function"&&(e=$s(e));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var h=i[u],c=h.length,d=a[u]=[],m,p=0;p<c;++p)(m=h[p])&&e.call(m,m.__data__,p,h)&&d.push(m);return new ie(a,this._parents,this._name,this._id)}function Of(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,o=e._groups,a=i.length,u=o.length,h=Math.min(a,u),c=new Array(a),d=0;d<h;++d)for(var m=i[d],p=o[d],v=m.length,_=c[d]=new Array(v),y,b=0;b<v;++b)(y=m[b]||p[b])&&(_[b]=y);for(;d<a;++d)c[d]=i[d];return new ie(c,this._parents,this._name,this._id)}function Nf(e){return(e+"").trim().split(/^|\s+/).every(function(i){var o=i.indexOf(".");return o>=0&&(i=i.slice(0,o)),!i||i==="start"})}function Zf(e,i,o){var a,u,h=Nf(i)?Pr:Xt;return function(){var c=h(this,e),d=c.on;d!==a&&(u=(a=d).copy()).on(i,o),c.on=u}}function Ff(e,i){var o=this._id;return arguments.length<2?Wt(this.node(),o).on.on(e):this.each(Zf(o,e,i))}function Rf(e){return function(){var i=this.parentNode;for(var o in this.__transition)if(+o!==e)return;i&&i.removeChild(this)}}function Hf(){return this.on("end.remove",Rf(this._id))}function Wf(e){var i=this._name,o=this._id;typeof e!="function"&&(e=wr(e));for(var a=this._groups,u=a.length,h=new Array(u),c=0;c<u;++c)for(var d=a[c],m=d.length,p=h[c]=new Array(m),v,_,y=0;y<m;++y)(v=d[y])&&(_=e.call(v,v.__data__,y,d))&&("__data__"in v&&(_.__data__=v.__data__),p[y]=_,ci(p[y],i,o,y,p,Wt(v,o)));return new ie(h,this._parents,i,o)}function Uf(e){var i=this._name,o=this._id;typeof e!="function"&&(e=Us(e));for(var a=this._groups,u=a.length,h=[],c=[],d=0;d<u;++d)for(var m=a[d],p=m.length,v,_=0;_<p;++_)if(v=m[_]){for(var y=e.call(v,v.__data__,_,m),b,E=Wt(v,o),T=0,k=y.length;T<k;++T)(b=y[T])&&ci(b,i,o,T,y,E);h.push(y),c.push(v)}return new ie(h,c,i,o)}var $f=pn.prototype.constructor;function qf(){return new $f(this._groups,this._parents)}function Vf(e,i){var o,a,u;return function(){var h=Ne(this,e),c=(this.style.removeProperty(e),Ne(this,e));return h===c?null:h===o&&c===a?u:u=i(o=h,a=c)}}function ca(e){return function(){this.style.removeProperty(e)}}function Yf(e,i,o){var a,u=o+"",h;return function(){var c=Ne(this,e);return c===u?null:c===a?h:h=i(a=c,o)}}function Gf(e,i,o){var a,u,h;return function(){var c=Ne(this,e),d=o(this),m=d+"";return d==null&&(m=d=(this.style.removeProperty(e),Ne(this,e))),c===m?null:c===a&&m===u?h:(u=m,h=i(a=c,d))}}function Xf(e,i){var o,a,u,h="style."+i,c="end."+h,d;return function(){var m=Xt(this,e),p=m.on,v=m.value[h]==null?d||(d=ca(i)):void 0;(p!==o||u!==v)&&(a=(o=p).copy()).on(c,u=v),m.on=a}}function Kf(e,i,o){var a=(e+="")=="transform"?jc:ha;return i==null?this.styleTween(e,Vf(e,a)).on("end.style."+e,ca(e)):typeof i=="function"?this.styleTween(e,Gf(e,a,Cr(this,"style."+e,i))).each(Xf(this._id,e)):this.styleTween(e,Yf(e,a,i),o).on("end.style."+e,null)}function Jf(e,i,o){return function(a){this.style.setProperty(e,i.call(this,a),o)}}function jf(e,i,o){var a,u;function h(){var c=i.apply(this,arguments);return c!==u&&(a=(u=c)&&Jf(e,c,o)),a}return h._value=i,h}function Qf(e,i,o){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(i==null)return this.tween(a,null);if(typeof i!="function")throw new Error;return this.tween(a,jf(e,i,o??""))}function td(e){return function(){this.textContent=e}}function ed(e){return function(){var i=e(this);this.textContent=i??""}}function nd(e){return this.tween("text",typeof e=="function"?ed(Cr(this,"text",e)):td(e==null?"":e+""))}function id(e){return function(i){this.textContent=e.call(this,i)}}function rd(e){var i,o;function a(){var u=e.apply(this,arguments);return u!==o&&(i=(o=u)&&id(u)),i}return a._value=e,a}function od(e){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,rd(e))}function sd(){for(var e=this._name,i=this._id,o=fa(),a=this._groups,u=a.length,h=0;h<u;++h)for(var c=a[h],d=c.length,m,p=0;p<d;++p)if(m=c[p]){var v=Wt(m,i);ci(m,e,o,p,c,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new ie(a,this._parents,e,o)}function ad(){var e,i,o=this,a=o._id,u=o.size();return new Promise(function(h,c){var d={value:c},m={value:function(){--u===0&&h()}};o.each(function(){var p=Xt(this,a),v=p.on;v!==e&&(i=(e=v).copy(),i._.cancel.push(d),i._.interrupt.push(d),i._.end.push(m)),p.on=i}),u===0&&h()})}var ud=0;function ie(e,i,o,a){this._groups=e,this._parents=i,this._name=o,this._id=a}function fa(){return++ud}var te=pn.prototype;ie.prototype={constructor:ie,select:Wf,selectAll:Uf,selectChild:te.selectChild,selectChildren:te.selectChildren,filter:zf,merge:Of,selection:qf,transition:sd,call:te.call,nodes:te.nodes,node:te.node,size:te.size,empty:te.empty,each:te.each,on:Ff,attr:yf,attrTween:Lf,style:Kf,styleTween:Qf,text:nd,textTween:od,remove:Hf,tween:ff,delay:Cf,duration:kf,ease:Df,easeVarying:Bf,end:ad,[Symbol.iterator]:te[Symbol.iterator]};function ld(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hd={time:null,delay:0,duration:250,ease:ld};function cd(e,i){for(var o;!(o=e.__transition)||!(o=o[i]);)if(!(e=e.parentNode))throw new Error(`transition ${i} not found`);return o}function fd(e){var i,o;e instanceof ie?(i=e._id,e=e._name):(i=fa(),(o=hd).time=Mr(),e=e==null?null:e+"");for(var a=this._groups,u=a.length,h=0;h<u;++h)for(var c=a[h],d=c.length,m,p=0;p<d;++p)(m=c[p])&&ci(m,e,i,p,c,o||cd(m,i));return new ie(a,this._parents,e,i)}pn.prototype.interrupt=lf;pn.prototype.transition=fd;const mr=Math.PI,pr=2*mr,pe=1e-6,dd=pr-pe;function da(e){this._+=e[0];for(let i=1,o=e.length;i<o;++i)this._+=arguments[i]+e[i]}function md(e){let i=Math.floor(e);if(!(i>=0))throw new Error(`invalid digits: ${e}`);if(i>15)return da;const o=10**i;return function(a){this._+=a[0];for(let u=1,h=a.length;u<h;++u)this._+=Math.round(arguments[u]*o)/o+a[u]}}class pd{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?da:md(i)}moveTo(i,o){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+o}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,o){this._append`L${this._x1=+i},${this._y1=+o}`}quadraticCurveTo(i,o,a,u){this._append`Q${+i},${+o},${this._x1=+a},${this._y1=+u}`}bezierCurveTo(i,o,a,u,h,c){this._append`C${+i},${+o},${+a},${+u},${this._x1=+h},${this._y1=+c}`}arcTo(i,o,a,u,h){if(i=+i,o=+o,a=+a,u=+u,h=+h,h<0)throw new Error(`negative radius: ${h}`);let c=this._x1,d=this._y1,m=a-i,p=u-o,v=c-i,_=d-o,y=v*v+_*_;if(this._x1===null)this._append`M${this._x1=i},${this._y1=o}`;else if(y>pe)if(!(Math.abs(_*m-p*v)>pe)||!h)this._append`L${this._x1=i},${this._y1=o}`;else{let b=a-c,E=u-d,T=m*m+p*p,k=b*b+E*E,z=Math.sqrt(T),R=Math.sqrt(y),I=h*Math.tan((mr-Math.acos((T+y-k)/(2*z*R)))/2),Z=I/R,V=I/z;Math.abs(Z-1)>pe&&this._append`L${i+Z*v},${o+Z*_}`,this._append`A${h},${h},0,0,${+(_*b>v*E)},${this._x1=i+V*m},${this._y1=o+V*p}`}}arc(i,o,a,u,h,c){if(i=+i,o=+o,a=+a,c=!!c,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(u),m=a*Math.sin(u),p=i+d,v=o+m,_=1^c,y=c?u-h:h-u;this._x1===null?this._append`M${p},${v}`:(Math.abs(this._x1-p)>pe||Math.abs(this._y1-v)>pe)&&this._append`L${p},${v}`,a&&(y<0&&(y=y%pr+pr),y>dd?this._append`A${a},${a},0,1,${_},${i-d},${o-m}A${a},${a},0,1,${_},${this._x1=p},${this._y1=v}`:y>pe&&this._append`A${a},${a},0,${+(y>=mr)},${_},${this._x1=i+a*Math.cos(h)},${this._y1=o+a*Math.sin(h)}`)}rect(i,o,a,u){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+o}h${a=+a}v${+u}h${-a}Z`}toString(){return this._}}function _d(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ni(e,i){if(!isFinite(e)||e===0)return null;var o=(e=i?e.toExponential(i-1):e.toExponential()).indexOf("e"),a=e.slice(0,o);return[a.length>1?a[0]+a.slice(2):a,+e.slice(o+1)]}function Fe(e){return e=ni(Math.abs(e)),e?e[1]:NaN}function gd(e,i){return function(o,a){for(var u=o.length,h=[],c=0,d=e[0],m=0;u>0&&d>0&&(m+d+1>a&&(d=Math.max(1,a-m)),h.push(o.substring(u-=d,u+d)),!((m+=d+1)>a));)d=e[c=(c+1)%e.length];return h.reverse().join(i)}}function vd(e){return function(i){return i.replace(/[0-9]/g,function(o){return e[+o]})}}var yd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ii(e){if(!(i=yd.exec(e)))throw new Error("invalid format: "+e);var i;return new Sr({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}ii.prototype=Sr.prototype;function Sr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Sr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wd(e){t:for(var i=e.length,o=1,a=-1,u;o<i;++o)switch(e[o]){case".":a=u=o;break;case"0":a===0&&(a=o),u=o;break;default:if(!+e[o])break t;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(u+1):e}var ri;function xd(e,i){var o=ni(e,i);if(!o)return ri=void 0,e.toPrecision(i);var a=o[0],u=o[1],h=u-(ri=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,c=a.length;return h===c?a:h>c?a+new Array(h-c+1).join("0"):h>0?a.slice(0,h)+"."+a.slice(h):"0."+new Array(1-h).join("0")+ni(e,Math.max(0,i+h-1))[0]}function cs(e,i){var o=ni(e,i);if(!o)return e+"";var a=o[0],u=o[1];return u<0?"0."+new Array(-u).join("0")+a:a.length>u+1?a.slice(0,u+1)+"."+a.slice(u+1):a+new Array(u-a.length+2).join("0")}const fs={"%":(e,i)=>(e*100).toFixed(i),b:e=>Math.round(e).toString(2),c:e=>e+"",d:_d,e:(e,i)=>e.toExponential(i),f:(e,i)=>e.toFixed(i),g:(e,i)=>e.toPrecision(i),o:e=>Math.round(e).toString(8),p:(e,i)=>cs(e*100,i),r:cs,s:xd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ds(e){return e}var ms=Array.prototype.map,ps=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bd(e){var i=e.grouping===void 0||e.thousands===void 0?ds:gd(ms.call(e.grouping,Number),e.thousands+""),o=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?ds:vd(ms.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function p(_,y){_=ii(_);var b=_.fill,E=_.align,T=_.sign,k=_.symbol,z=_.zero,R=_.width,I=_.comma,Z=_.precision,V=_.trim,S=_.type;S==="n"?(I=!0,S="g"):fs[S]||(Z===void 0&&(Z=12),V=!0,S="g"),(z||b==="0"&&E==="=")&&(z=!0,b="0",E="=");var O=(y&&y.prefix!==void 0?y.prefix:"")+(k==="$"?o:k==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():""),st=(k==="$"?a:/[%p]/.test(S)?c:"")+(y&&y.suffix!==void 0?y.suffix:""),nt=fs[S],ht=/[defgprs%]/.test(S);Z=Z===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,Z)):Math.max(0,Math.min(20,Z));function W(P){var q=O,H=st,Q,at,it;if(S==="c")H=nt(P)+H,P="";else{P=+P;var N=P<0||1/P<0;if(P=isNaN(P)?m:nt(Math.abs(P),Z),V&&(P=wd(P)),N&&+P==0&&T!=="+"&&(N=!1),q=(N?T==="("?T:d:T==="-"||T==="("?"":T)+q,H=(S==="s"&&!isNaN(P)&&ri!==void 0?ps[8+ri/3]:"")+H+(N&&T==="("?")":""),ht){for(Q=-1,at=P.length;++Q<at;)if(it=P.charCodeAt(Q),48>it||it>57){H=(it===46?u+P.slice(Q+1):P.slice(Q))+H,P=P.slice(0,Q);break}}}I&&!z&&(P=i(P,1/0));var dt=q.length+P.length+H.length,B=dt<R?new Array(R-dt+1).join(b):"";switch(I&&z&&(P=i(B+P,B.length?R-H.length:1/0),B=""),E){case"<":P=q+P+H+B;break;case"=":P=q+B+P+H;break;case"^":P=B.slice(0,dt=B.length>>1)+q+P+H+B.slice(dt);break;default:P=B+q+P+H;break}return h(P)}return W.toString=function(){return _+""},W}function v(_,y){var b=Math.max(-8,Math.min(8,Math.floor(Fe(y)/3)))*3,E=Math.pow(10,-b),T=p((_=ii(_),_.type="f",_),{suffix:ps[8+b/3]});return function(k){return T(E*k)}}return{format:p,formatPrefix:v}}var Rn,ma,pa;Td({thousands:",",grouping:[3],currency:["$",""]});function Td(e){return Rn=bd(e),ma=Rn.format,pa=Rn.formatPrefix,Rn}function Ld(e){return Math.max(0,-Fe(Math.abs(e)))}function Md(e,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fe(i)/3)))*3-Fe(Math.abs(e)))}function Pd(e,i){return e=Math.abs(e),i=Math.abs(i)-e,Math.max(0,Fe(i)-Fe(e))+1}function _a(e,i){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(i).domain(e);break}return this}function Cd(e){return function(){return e}}function Sd(e){return+e}var _s=[0,1];function Ie(e){return e}function _r(e,i){return(i-=e=+e)?function(o){return(o-e)/i}:Cd(isNaN(i)?NaN:.5)}function Ed(e,i){var o;return e>i&&(o=e,e=i,i=o),function(a){return Math.max(e,Math.min(i,a))}}function kd(e,i,o){var a=e[0],u=e[1],h=i[0],c=i[1];return u<a?(a=_r(u,a),h=o(c,h)):(a=_r(a,u),h=o(h,c)),function(d){return h(a(d))}}function Ad(e,i,o){var a=Math.min(e.length,i.length)-1,u=new Array(a),h=new Array(a),c=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),i=i.slice().reverse());++c<a;)u[c]=_r(e[c],e[c+1]),h[c]=o(i[c],i[c+1]);return function(d){var m=Dl(e,d,1,a)-1;return h[m](u[m](d))}}function ga(e,i){return i.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Dd(){var e=_s,i=_s,o=Lr,a,u,h,c=Ie,d,m,p;function v(){var y=Math.min(e.length,i.length);return c!==Ie&&(c=Ed(e[0],e[y-1])),d=y>2?Ad:kd,m=p=null,_}function _(y){return y==null||isNaN(y=+y)?h:(m||(m=d(e.map(a),i,o)))(a(c(y)))}return _.invert=function(y){return c(u((p||(p=d(i,e.map(a),Rt)))(y)))},_.domain=function(y){return arguments.length?(e=Array.from(y,Sd),v()):e.slice()},_.range=function(y){return arguments.length?(i=Array.from(y),v()):i.slice()},_.rangeRound=function(y){return i=Array.from(y),o=Xc,v()},_.clamp=function(y){return arguments.length?(c=y?!0:Ie,v()):c!==Ie},_.interpolate=function(y){return arguments.length?(o=y,v()):o},_.unknown=function(y){return arguments.length?(h=y,_):h},function(y,b){return a=y,u=b,v()}}function va(){return Dd()(Ie,Ie)}function Id(e,i,o,a){var u=or(e,i,o),h;switch(a=ii(a??",f"),a.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(i));return a.precision==null&&!isNaN(h=Md(u,c))&&(a.precision=h),pa(a,c)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(h=Pd(u,Math.max(Math.abs(e),Math.abs(i))))&&(a.precision=h-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(h=Ld(u))&&(a.precision=h-(a.type==="%")*2);break}}return ma(a)}function Bd(e){var i=e.domain;return e.ticks=function(o){var a=i();return Ol(a[0],a[a.length-1],o??10)},e.tickFormat=function(o,a){var u=i();return Id(u[0],u[u.length-1],o??10,a)},e.nice=function(o){o==null&&(o=10);var a=i(),u=0,h=a.length-1,c=a[u],d=a[h],m,p,v=10;for(d<c&&(p=c,c=d,d=p,p=u,u=h,h=p);v-- >0;){if(p=rr(c,d,o),p===m)return a[u]=c,a[h]=d,i(a);if(p>0)c=Math.floor(c/p)*p,d=Math.ceil(d/p)*p;else if(p<0)c=Math.ceil(c*p)/p,d=Math.floor(d*p)/p;else break;m=p}return e},e}function ya(){var e=va();return e.copy=function(){return ga(e,ya())},_a.apply(e,arguments),Bd(e)}function zd(e,i){e=e.slice();var o=0,a=e.length-1,u=e[o],h=e[a],c;return h<u&&(c=o,o=a,a=c,c=u,u=h,h=c),e[o]=i.floor(u),e[a]=i.ceil(h),e}const Ki=new Date,Ji=new Date;function yt(e,i,o,a){function u(h){return e(h=arguments.length===0?new Date:new Date(+h)),h}return u.floor=h=>(e(h=new Date(+h)),h),u.ceil=h=>(e(h=new Date(h-1)),i(h,1),e(h),h),u.round=h=>{const c=u(h),d=u.ceil(h);return h-c<d-h?c:d},u.offset=(h,c)=>(i(h=new Date(+h),c==null?1:Math.floor(c)),h),u.range=(h,c,d)=>{const m=[];if(h=u.ceil(h),d=d==null?1:Math.floor(d),!(h<c)||!(d>0))return m;let p;do m.push(p=new Date(+h)),i(h,d),e(h);while(p<h&&h<c);return m},u.filter=h=>yt(c=>{if(c>=c)for(;e(c),!h(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;i(c,-1),!h(c););else for(;--d>=0;)for(;i(c,1),!h(c););}),o&&(u.count=(h,c)=>(Ki.setTime(+h),Ji.setTime(+c),e(Ki),e(Ji),Math.floor(o(Ki,Ji))),u.every=h=>(h=Math.floor(h),!isFinite(h)||!(h>0)?null:h>1?u.filter(a?c=>a(c)%h===0:c=>u.count(0,c)%h===0):u)),u}const oi=yt(()=>{},(e,i)=>{e.setTime(+e+i)},(e,i)=>i-e);oi.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yt(i=>{i.setTime(Math.floor(i/e)*e)},(i,o)=>{i.setTime(+i+o*e)},(i,o)=>(o-i)/e):oi);oi.range;const ee=1e3,zt=ee*60,ne=zt*60,re=ne*24,Er=re*7,gs=re*30,ji=re*365,Be=yt(e=>{e.setTime(e-e.getMilliseconds())},(e,i)=>{e.setTime(+e+i*ee)},(e,i)=>(i-e)/ee,e=>e.getUTCSeconds());Be.range;const kr=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ee)},(e,i)=>{e.setTime(+e+i*zt)},(e,i)=>(i-e)/zt,e=>e.getMinutes());kr.range;const Od=yt(e=>{e.setUTCSeconds(0,0)},(e,i)=>{e.setTime(+e+i*zt)},(e,i)=>(i-e)/zt,e=>e.getUTCMinutes());Od.range;const fi=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ee-e.getMinutes()*zt)},(e,i)=>{e.setTime(+e+i*ne)},(e,i)=>(i-e)/ne,e=>e.getHours());fi.range;const Nd=yt(e=>{e.setUTCMinutes(0,0,0)},(e,i)=>{e.setTime(+e+i*ne)},(e,i)=>(i-e)/ne,e=>e.getUTCHours());Nd.range;const gn=yt(e=>e.setHours(0,0,0,0),(e,i)=>e.setDate(e.getDate()+i),(e,i)=>(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*zt)/re,e=>e.getDate()-1);gn.range;const Ar=yt(e=>{e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i)},(e,i)=>(i-e)/re,e=>e.getUTCDate()-1);Ar.range;const Zd=yt(e=>{e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i)},(e,i)=>(i-e)/re,e=>Math.floor(e/re));Zd.range;function xe(e){return yt(i=>{i.setDate(i.getDate()-(i.getDay()+7-e)%7),i.setHours(0,0,0,0)},(i,o)=>{i.setDate(i.getDate()+o*7)},(i,o)=>(o-i-(o.getTimezoneOffset()-i.getTimezoneOffset())*zt)/Er)}const di=xe(0),si=xe(1),Fd=xe(2),Rd=xe(3),Re=xe(4),Hd=xe(5),Wd=xe(6);di.range;si.range;Fd.range;Rd.range;Re.range;Hd.range;Wd.range;function be(e){return yt(i=>{i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-e)%7),i.setUTCHours(0,0,0,0)},(i,o)=>{i.setUTCDate(i.getUTCDate()+o*7)},(i,o)=>(o-i)/Er)}const wa=be(0),ai=be(1),Ud=be(2),$d=be(3),He=be(4),qd=be(5),Vd=be(6);wa.range;ai.range;Ud.range;$d.range;He.range;qd.range;Vd.range;const Dr=yt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,i)=>{e.setMonth(e.getMonth()+i)},(e,i)=>i.getMonth()-e.getMonth()+(i.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Dr.range;const Yd=yt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCMonth(e.getUTCMonth()+i)},(e,i)=>i.getUTCMonth()-e.getUTCMonth()+(i.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Yd.range;const oe=yt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,i)=>{e.setFullYear(e.getFullYear()+i)},(e,i)=>i.getFullYear()-e.getFullYear(),e=>e.getFullYear());oe.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(i=>{i.setFullYear(Math.floor(i.getFullYear()/e)*e),i.setMonth(0,1),i.setHours(0,0,0,0)},(i,o)=>{i.setFullYear(i.getFullYear()+o*e)});oe.range;const we=yt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i)},(e,i)=>i.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());we.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(i=>{i.setUTCFullYear(Math.floor(i.getUTCFullYear()/e)*e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,o)=>{i.setUTCFullYear(i.getUTCFullYear()+o*e)});we.range;function Gd(e,i,o,a,u,h){const c=[[Be,1,ee],[Be,5,5*ee],[Be,15,15*ee],[Be,30,30*ee],[h,1,zt],[h,5,5*zt],[h,15,15*zt],[h,30,30*zt],[u,1,ne],[u,3,3*ne],[u,6,6*ne],[u,12,12*ne],[a,1,re],[a,2,2*re],[o,1,Er],[i,1,gs],[i,3,3*gs],[e,1,ji]];function d(p,v,_){const y=v<p;y&&([p,v]=[v,p]);const b=_&&typeof _.range=="function"?_:m(p,v,_),E=b?b.range(p,+v+1):[];return y?E.reverse():E}function m(p,v,_){const y=Math.abs(v-p)/_,b=yr(([,,k])=>k).right(c,y);if(b===c.length)return e.every(or(p/ji,v/ji,_));if(b===0)return oi.every(Math.max(or(p,v,_),1));const[E,T]=c[y/c[b-1][2]<c[b][2]/y?b-1:b];return E.every(T)}return[d,m]}const[Xd,Kd]=Gd(oe,Dr,di,gn,fi,kr);function Qi(e){if(0<=e.y&&e.y<100){var i=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return i.setFullYear(e.y),i}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tr(e){if(0<=e.y&&e.y<100){var i=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return i.setUTCFullYear(e.y),i}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nn(e,i,o){return{y:e,m:i,d:o,H:0,M:0,S:0,L:0}}function Jd(e){var i=e.dateTime,o=e.date,a=e.time,u=e.periods,h=e.days,c=e.shortDays,d=e.months,m=e.shortMonths,p=rn(u),v=on(u),_=rn(h),y=on(h),b=rn(c),E=on(c),T=rn(d),k=on(d),z=rn(m),R=on(m),I={a:it,A:N,b:dt,B,c:null,d:Ts,e:Ts,f:wm,g:km,G:Dm,H:gm,I:vm,j:ym,L:xa,m:xm,M:bm,p:et,q:vt,Q:Ps,s:Cs,S:Tm,u:Lm,U:Mm,V:Pm,w:Cm,W:Sm,x:null,X:null,y:Em,Y:Am,Z:Im,"%":Ms},Z={a:wt,A:mt,b:ut,B:J,c:null,d:Ls,e:Ls,f:Nm,g:Ym,G:Xm,H:Bm,I:zm,j:Om,L:Ta,m:Zm,M:Fm,p:Ot,q:Ut,Q:Ps,s:Cs,S:Rm,u:Hm,U:Wm,V:Um,w:$m,W:qm,x:null,X:null,y:Vm,Y:Gm,Z:Km,"%":Ms},V={a:ht,A:W,b:P,B:q,c:H,d:xs,e:xs,f:dm,g:ws,G:ys,H:bs,I:bs,j:lm,L:fm,m:um,M:hm,p:nt,q:am,Q:pm,s:_m,S:cm,u:nm,U:im,V:rm,w:em,W:om,x:Q,X:at,y:ws,Y:ys,Z:sm,"%":mm};I.x=S(o,I),I.X=S(a,I),I.c=S(i,I),Z.x=S(o,Z),Z.X=S(a,Z),Z.c=S(i,Z);function S(D,G){return function(j){var C=[],xt=-1,lt=0,Pt=D.length,Ct,Nt,le;for(j instanceof Date||(j=new Date(+j));++xt<Pt;)D.charCodeAt(xt)===37&&(C.push(D.slice(lt,xt)),(Nt=vs[Ct=D.charAt(++xt)])!=null?Ct=D.charAt(++xt):Nt=Ct==="e"?" ":"0",(le=G[Ct])&&(Ct=le(j,Nt)),C.push(Ct),lt=xt+1);return C.push(D.slice(lt,xt)),C.join("")}}function O(D,G){return function(j){var C=nn(1900,void 0,1),xt=st(C,D,j+="",0),lt,Pt;if(xt!=j.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(C.s*1e3+("L"in C?C.L:0));if(G&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+C.p*12),C.m===void 0&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(lt=tr(nn(C.y,0,1)),Pt=lt.getUTCDay(),lt=Pt>4||Pt===0?ai.ceil(lt):ai(lt),lt=Ar.offset(lt,(C.V-1)*7),C.y=lt.getUTCFullYear(),C.m=lt.getUTCMonth(),C.d=lt.getUTCDate()+(C.w+6)%7):(lt=Qi(nn(C.y,0,1)),Pt=lt.getDay(),lt=Pt>4||Pt===0?si.ceil(lt):si(lt),lt=gn.offset(lt,(C.V-1)*7),C.y=lt.getFullYear(),C.m=lt.getMonth(),C.d=lt.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),Pt="Z"in C?tr(nn(C.y,0,1)).getUTCDay():Qi(nn(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+C.W*7-(Pt+5)%7:C.w+C.U*7-(Pt+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,tr(C)):Qi(C)}}function st(D,G,j,C){for(var xt=0,lt=G.length,Pt=j.length,Ct,Nt;xt<lt;){if(C>=Pt)return-1;if(Ct=G.charCodeAt(xt++),Ct===37){if(Ct=G.charAt(xt++),Nt=V[Ct in vs?G.charAt(xt++):Ct],!Nt||(C=Nt(D,j,C))<0)return-1}else if(Ct!=j.charCodeAt(C++))return-1}return C}function nt(D,G,j){var C=p.exec(G.slice(j));return C?(D.p=v.get(C[0].toLowerCase()),j+C[0].length):-1}function ht(D,G,j){var C=b.exec(G.slice(j));return C?(D.w=E.get(C[0].toLowerCase()),j+C[0].length):-1}function W(D,G,j){var C=_.exec(G.slice(j));return C?(D.w=y.get(C[0].toLowerCase()),j+C[0].length):-1}function P(D,G,j){var C=z.exec(G.slice(j));return C?(D.m=R.get(C[0].toLowerCase()),j+C[0].length):-1}function q(D,G,j){var C=T.exec(G.slice(j));return C?(D.m=k.get(C[0].toLowerCase()),j+C[0].length):-1}function H(D,G,j){return st(D,i,G,j)}function Q(D,G,j){return st(D,o,G,j)}function at(D,G,j){return st(D,a,G,j)}function it(D){return c[D.getDay()]}function N(D){return h[D.getDay()]}function dt(D){return m[D.getMonth()]}function B(D){return d[D.getMonth()]}function et(D){return u[+(D.getHours()>=12)]}function vt(D){return 1+~~(D.getMonth()/3)}function wt(D){return c[D.getUTCDay()]}function mt(D){return h[D.getUTCDay()]}function ut(D){return m[D.getUTCMonth()]}function J(D){return d[D.getUTCMonth()]}function Ot(D){return u[+(D.getUTCHours()>=12)]}function Ut(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var G=S(D+="",I);return G.toString=function(){return D},G},parse:function(D){var G=O(D+="",!1);return G.toString=function(){return D},G},utcFormat:function(D){var G=S(D+="",Z);return G.toString=function(){return D},G},utcParse:function(D){var G=O(D+="",!0);return G.toString=function(){return D},G}}}var vs={"-":"",_:" ",0:"0"},Lt=/^\s*\d+/,jd=/^%/,Qd=/[\\^$*+?|[\]().{}]/g;function ot(e,i,o){var a=e<0?"-":"",u=(a?-e:e)+"",h=u.length;return a+(h<o?new Array(o-h+1).join(i)+u:u)}function tm(e){return e.replace(Qd,"\\$&")}function rn(e){return new RegExp("^(?:"+e.map(tm).join("|")+")","i")}function on(e){return new Map(e.map((i,o)=>[i.toLowerCase(),o]))}function em(e,i,o){var a=Lt.exec(i.slice(o,o+1));return a?(e.w=+a[0],o+a[0].length):-1}function nm(e,i,o){var a=Lt.exec(i.slice(o,o+1));return a?(e.u=+a[0],o+a[0].length):-1}function im(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.U=+a[0],o+a[0].length):-1}function rm(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.V=+a[0],o+a[0].length):-1}function om(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.W=+a[0],o+a[0].length):-1}function ys(e,i,o){var a=Lt.exec(i.slice(o,o+4));return a?(e.y=+a[0],o+a[0].length):-1}function ws(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),o+a[0].length):-1}function sm(e,i,o){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(o,o+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),o+a[0].length):-1}function am(e,i,o){var a=Lt.exec(i.slice(o,o+1));return a?(e.q=a[0]*3-3,o+a[0].length):-1}function um(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.m=a[0]-1,o+a[0].length):-1}function xs(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.d=+a[0],o+a[0].length):-1}function lm(e,i,o){var a=Lt.exec(i.slice(o,o+3));return a?(e.m=0,e.d=+a[0],o+a[0].length):-1}function bs(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.H=+a[0],o+a[0].length):-1}function hm(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.M=+a[0],o+a[0].length):-1}function cm(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.S=+a[0],o+a[0].length):-1}function fm(e,i,o){var a=Lt.exec(i.slice(o,o+3));return a?(e.L=+a[0],o+a[0].length):-1}function dm(e,i,o){var a=Lt.exec(i.slice(o,o+6));return a?(e.L=Math.floor(a[0]/1e3),o+a[0].length):-1}function mm(e,i,o){var a=jd.exec(i.slice(o,o+1));return a?o+a[0].length:-1}function pm(e,i,o){var a=Lt.exec(i.slice(o));return a?(e.Q=+a[0],o+a[0].length):-1}function _m(e,i,o){var a=Lt.exec(i.slice(o));return a?(e.s=+a[0],o+a[0].length):-1}function Ts(e,i){return ot(e.getDate(),i,2)}function gm(e,i){return ot(e.getHours(),i,2)}function vm(e,i){return ot(e.getHours()%12||12,i,2)}function ym(e,i){return ot(1+gn.count(oe(e),e),i,3)}function xa(e,i){return ot(e.getMilliseconds(),i,3)}function wm(e,i){return xa(e,i)+"000"}function xm(e,i){return ot(e.getMonth()+1,i,2)}function bm(e,i){return ot(e.getMinutes(),i,2)}function Tm(e,i){return ot(e.getSeconds(),i,2)}function Lm(e){var i=e.getDay();return i===0?7:i}function Mm(e,i){return ot(di.count(oe(e)-1,e),i,2)}function ba(e){var i=e.getDay();return i>=4||i===0?Re(e):Re.ceil(e)}function Pm(e,i){return e=ba(e),ot(Re.count(oe(e),e)+(oe(e).getDay()===4),i,2)}function Cm(e){return e.getDay()}function Sm(e,i){return ot(si.count(oe(e)-1,e),i,2)}function Em(e,i){return ot(e.getFullYear()%100,i,2)}function km(e,i){return e=ba(e),ot(e.getFullYear()%100,i,2)}function Am(e,i){return ot(e.getFullYear()%1e4,i,4)}function Dm(e,i){var o=e.getDay();return e=o>=4||o===0?Re(e):Re.ceil(e),ot(e.getFullYear()%1e4,i,4)}function Im(e){var i=e.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+ot(i/60|0,"0",2)+ot(i%60,"0",2)}function Ls(e,i){return ot(e.getUTCDate(),i,2)}function Bm(e,i){return ot(e.getUTCHours(),i,2)}function zm(e,i){return ot(e.getUTCHours()%12||12,i,2)}function Om(e,i){return ot(1+Ar.count(we(e),e),i,3)}function Ta(e,i){return ot(e.getUTCMilliseconds(),i,3)}function Nm(e,i){return Ta(e,i)+"000"}function Zm(e,i){return ot(e.getUTCMonth()+1,i,2)}function Fm(e,i){return ot(e.getUTCMinutes(),i,2)}function Rm(e,i){return ot(e.getUTCSeconds(),i,2)}function Hm(e){var i=e.getUTCDay();return i===0?7:i}function Wm(e,i){return ot(wa.count(we(e)-1,e),i,2)}function La(e){var i=e.getUTCDay();return i>=4||i===0?He(e):He.ceil(e)}function Um(e,i){return e=La(e),ot(He.count(we(e),e)+(we(e).getUTCDay()===4),i,2)}function $m(e){return e.getUTCDay()}function qm(e,i){return ot(ai.count(we(e)-1,e),i,2)}function Vm(e,i){return ot(e.getUTCFullYear()%100,i,2)}function Ym(e,i){return e=La(e),ot(e.getUTCFullYear()%100,i,2)}function Gm(e,i){return ot(e.getUTCFullYear()%1e4,i,4)}function Xm(e,i){var o=e.getUTCDay();return e=o>=4||o===0?He(e):He.ceil(e),ot(e.getUTCFullYear()%1e4,i,4)}function Km(){return"+0000"}function Ms(){return"%"}function Ps(e){return+e}function Cs(e){return Math.floor(+e/1e3)}var De,Ir;Jm({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Jm(e){return De=Jd(e),Ir=De.format,De.parse,De.utcFormat,De.utcParse,De}function jm(e){return new Date(e)}function Qm(e){return e instanceof Date?+e:+new Date(+e)}function Ma(e,i,o,a,u,h,c,d,m,p){var v=va(),_=v.invert,y=v.domain,b=p(".%L"),E=p(":%S"),T=p("%I:%M"),k=p("%I %p"),z=p("%a %d"),R=p("%b %d"),I=p("%B"),Z=p("%Y");function V(S){return(m(S)<S?b:d(S)<S?E:c(S)<S?T:h(S)<S?k:a(S)<S?u(S)<S?z:R:o(S)<S?I:Z)(S)}return v.invert=function(S){return new Date(_(S))},v.domain=function(S){return arguments.length?y(Array.from(S,Qm)):y().map(jm)},v.ticks=function(S){var O=y();return e(O[0],O[O.length-1],S??10)},v.tickFormat=function(S,O){return O==null?V:p(O)},v.nice=function(S){var O=y();return(!S||typeof S.range!="function")&&(S=i(O[0],O[O.length-1],S??10)),S?y(zd(O,S)):v},v.copy=function(){return ga(v,Ma(e,i,o,a,u,h,c,d,m,p))},v}function tp(){return _a.apply(Ma(Xd,Kd,oe,Dr,di,gn,fi,kr,Be,Ir).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Tt(e){return function(){return e}}function Pa(e){let i=3;return e.digits=function(o){if(!arguments.length)return i;if(o==null)i=null;else{const a=Math.floor(o);if(!(a>=0))throw new RangeError(`invalid digits: ${o}`);i=a}return e},()=>new pd(i)}function Ca(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sa(e){this._context=e}Sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,i){switch(e=+e,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;default:this._context.lineTo(e,i);break}}};function Ea(e){return new Sa(e)}function ka(e){return e[0]}function Aa(e){return e[1]}function Da(e,i){var o=Tt(!0),a=null,u=Ea,h=null,c=Pa(d);e=typeof e=="function"?e:e===void 0?ka:Tt(e),i=typeof i=="function"?i:i===void 0?Aa:Tt(i);function d(m){var p,v=(m=Ca(m)).length,_,y=!1,b;for(a==null&&(h=u(b=c())),p=0;p<=v;++p)!(p<v&&o(_=m[p],p,m))===y&&((y=!y)?h.lineStart():h.lineEnd()),y&&h.point(+e(_,p,m),+i(_,p,m));if(b)return h=null,b+""||null}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Tt(+m),d):e},d.y=function(m){return arguments.length?(i=typeof m=="function"?m:Tt(+m),d):i},d.defined=function(m){return arguments.length?(o=typeof m=="function"?m:Tt(!!m),d):o},d.curve=function(m){return arguments.length?(u=m,a!=null&&(h=u(a)),d):u},d.context=function(m){return arguments.length?(m==null?a=h=null:h=u(a=m),d):a},d}function ep(e,i,o){var a=null,u=Tt(!0),h=null,c=Ea,d=null,m=Pa(p);e=typeof e=="function"?e:e===void 0?ka:Tt(+e),i=typeof i=="function"?i:Tt(i===void 0?0:+i),o=typeof o=="function"?o:o===void 0?Aa:Tt(+o);function p(_){var y,b,E,T=(_=Ca(_)).length,k,z=!1,R,I=new Array(T),Z=new Array(T);for(h==null&&(d=c(R=m())),y=0;y<=T;++y){if(!(y<T&&u(k=_[y],y,_))===z)if(z=!z)b=y,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),E=y-1;E>=b;--E)d.point(I[E],Z[E]);d.lineEnd(),d.areaEnd()}z&&(I[y]=+e(k,y,_),Z[y]=+i(k,y,_),d.point(a?+a(k,y,_):I[y],o?+o(k,y,_):Z[y]))}if(R)return d=null,R+""||null}function v(){return Da().defined(u).curve(c).context(h)}return p.x=function(_){return arguments.length?(e=typeof _=="function"?_:Tt(+_),a=null,p):e},p.x0=function(_){return arguments.length?(e=typeof _=="function"?_:Tt(+_),p):e},p.x1=function(_){return arguments.length?(a=_==null?null:typeof _=="function"?_:Tt(+_),p):a},p.y=function(_){return arguments.length?(i=typeof _=="function"?_:Tt(+_),o=null,p):i},p.y0=function(_){return arguments.length?(i=typeof _=="function"?_:Tt(+_),p):i},p.y1=function(_){return arguments.length?(o=_==null?null:typeof _=="function"?_:Tt(+_),p):o},p.lineX0=p.lineY0=function(){return v().x(e).y(i)},p.lineY1=function(){return v().x(e).y(o)},p.lineX1=function(){return v().x(a).y(i)},p.defined=function(_){return arguments.length?(u=typeof _=="function"?_:Tt(!!_),p):u},p.curve=function(_){return arguments.length?(c=_,h!=null&&(d=c(h)),p):c},p.context=function(_){return arguments.length?(_==null?h=d=null:d=c(h=_),p):h},p}function Ss(e){return e<0?-1:1}function Es(e,i,o){var a=e._x1-e._x0,u=i-e._x1,h=(e._y1-e._y0)/(a||u<0&&-0),c=(o-e._y1)/(u||a<0&&-0),d=(h*u+c*a)/(a+u);return(Ss(h)+Ss(c))*Math.min(Math.abs(h),Math.abs(c),.5*Math.abs(d))||0}function ks(e,i){var o=e._x1-e._x0;return o?(3*(e._y1-e._y0)/o-i)/2:i}function er(e,i,o){var a=e._x0,u=e._y0,h=e._x1,c=e._y1,d=(h-a)/3;e._context.bezierCurveTo(a+d,u+d*i,h-d,c-d*o,h,c)}function ui(e){this._context=e}ui.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:er(this,this._t0,ks(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,i){var o=NaN;if(e=+e,i=+i,!(e===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3,er(this,ks(this,o=Es(this,e,i)),o);break;default:er(this,this._t0,o=Es(this,e,i));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._t0=o}}};Object.create(ui.prototype).point=function(e,i){ui.prototype.point.call(this,i,e)};function As(e){return new ui(e)}function cn(e,i,o){this.k=e,this.x=i,this.y=o}cn.prototype={constructor:cn,scale:function(e){return e===1?this:new cn(this.k*e,this.x,this.y)},translate:function(e,i){return e===0&i===0?this:new cn(this.k,this.x+this.k*e,this.y+this.k*i)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};cn.prototype;const np="https://gemcxasoc2.execute-api.eu-north-1.amazonaws.com/dev/getTideData";function sn(e,i){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()||i}async function ip(){const e=await gr(np);return $.tideData=await e.json(),$.tideData}function rp(e){const i=new Date,o=document.getElementById("date-selector");o.innerHTML="";for(let u=0;u<6;u++){const h=new Date(i);h.setDate(i.getDate()+u);const c=h.toISOString().split("T")[0],d=document.createElement("button"),m=h.toLocaleString("en-US",{weekday:"short"});d.textContent=`${m} ${h.getDate()}`,d.dataset.date=c,d.setAttribute("aria-label",h.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})),d.addEventListener("click",()=>{$.selectedDate=c,document.querySelectorAll("#date-selector button").forEach(p=>p.classList.remove("selected")),d.classList.add("selected"),e()}),o.appendChild(d)}const a=o.querySelector("button");a&&(a.classList.add("selected"),$.selectedDate=a.dataset.date)}function Ia(){const e=document.getElementById("tide-front-inner")||document.getElementById("tide-box");if(!e)return;if(e.innerHTML="",!$.selectedBeach||!$.closestTideStation||!$.tideData[$.closestTideStation]){e.innerHTML='<div class="loading-skeleton">Unable to load tide data.</div>';return}const i=$.tideData[$.closestTideStation],o=new Date,a=i.map(T=>({...T,DateTime:new Date(T.DateTime)})).filter(T=>T.DateTime>o).sort((T,k)=>T.DateTime-k.DateTime),u=i.map(T=>({...T,DateTime:new Date(T.DateTime)})).filter(T=>T.DateTime<=o).sort((T,k)=>k.DateTime-T.DateTime),h=a.find(T=>T.EventType==="LowWater"),c=a.find(T=>T.EventType==="HighWater"),d=u[0],m=d?.EventType==="LowWater",p=document.createElement("div");p.className=`tide-status ${m?"is-rising":"is-falling"}`,p.innerHTML=`
    ${m?op():sp()}
    <span>${m?"Tide is rising":"Tide is falling"}</span>
  `,e.appendChild(p);const v=document.querySelector(".info-item.tide");v.classList.remove("rising","falling","filled"),v.offsetWidth,v.classList.add(m?"rising":"falling","filled"),[h,c].filter(Boolean).sort((T,k)=>T.DateTime-k.DateTime).slice(0,2).forEach((T,k)=>{const z=T.EventType==="LowWater"?"Low tide":"High tide",R=T.DateTime-o,I=Math.floor(R/(1e3*60*60)),Z=Math.floor(R/(1e3*60)%60),V=`${I}h ${Z}m`,S=T.DateTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),O=document.createElement("div");O.classList.add("tide-block"),k===0&&O.classList.add("highlight"),O.innerHTML=`
      <div class="tide-row">
        <span class="tide-kind">${z}</span>
        <span class="tide-countdown">in ${V}</span>
      </div>
      <time class="tide-time">at ${S}</time>
    `,e.appendChild(O)});const y=document.querySelector(".info-item.tide"),b=document.querySelector(".tide-clock-hand"),E=document.getElementById("tide-clock-caption");if(y&&b&&E&&d&&(h||c)){const T=m?c:h;if(T){const k=T.DateTime-d.DateTime,z=o-d.DateTime,R=Math.min(Math.max(z/k,0),1);let I;m?I=180+180*R:I=0+180*R,b.style.transform=`translate(-50%, -100%) rotate(${I%360}deg)`;const Z=T.DateTime-o,V=Math.max(0,Math.floor(Z/(1e3*60*60))),S=Math.max(0,Math.floor(Z/(1e3*60)%60)),O=`${V}h ${S}m`,nt=T.EventType==="LowWater"?"low tide":"high tide";E.textContent=`${O} to ${nt}`;const ht=document.getElementById("tide-clock-high-time"),W=document.getElementById("tide-clock-low-time");if(ht&&W){const P=it=>it?it.DateTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--",q=c||u.find(it=>it.EventType==="HighWater"),H=h||u.find(it=>it.EventType==="LowWater"),Q=m,at=!m;ht.textContent=at?"":P(q),W.textContent=Q?"":P(H),ht.classList.toggle("tide-clock-time--hidden",at),W.classList.toggle("tide-clock-time--hidden",Q)}}}if(y&&!y.dataset.tideDetailsInit){const T=document.getElementById("tide-details-button"),k=document.getElementById("tide-back-button");if(T&&k){y.dataset.tideDetailsInit="true",y.classList.add("tide-details-enabled");const z=R=>{const I=y.querySelector(".card-header");if(I&&I.contains(R.target))return;const Z=y.classList.toggle("is-flipped");T.setAttribute("aria-pressed",Z?"true":"false")};y.addEventListener("click",z),T.addEventListener("click",R=>{R.stopPropagation(),z(R)}),k.addEventListener("click",R=>{R.stopPropagation(),z(R)})}}}function op(e=""){return`
    <svg viewBox="0 0 24 24" class="tide-arrow ${e}">
      <path d="M12 20V4M12 4L6 10M12 4l6 6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`}function sp(e=""){return`
    <svg viewBox="0 0 24 24" class="tide-arrow ${e}">
      <path d="M12 4v16M12 20l-6-6M12 20l6-6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`}function Ba(e,i){const o=[],a=[1,2,3,3,2,1],u=[...e],h=new Date(i);h.setDate(h.getDate()-1);const c=new Date(i);if(c.setDate(c.getDate()+1),$.tideData[$.closestTideStation]&&u.push(...$.tideData[$.closestTideStation].map(p=>({...p,DateTime:new Date(p.DateTime)})).filter(p=>p.DateTime.toISOString().startsWith(h.toISOString().split("T")[0])||p.DateTime.toISOString().startsWith(c.toISOString().split("T")[0]))),u.sort((p,v)=>p.DateTime-v.DateTime),u.length===0)return o;const d=new Date(`${i}T00:00:00`);if(u[0].DateTime>d&&u.length>=2){const p=u[0],v=u.find(_=>_.DateTime<p.DateTime);if(v){const _=p.DateTime-v.DateTime,y=p.Height-v.Height,b=(d-v.DateTime)/_;o.push({DateTime:d,Height:v.Height+b*y})}}for(let p=0;p<u.length-1;p++){const v=u[p],_=u[p+1];v.DateTime instanceof Date||(v.DateTime=new Date(v.DateTime)),_.DateTime instanceof Date||(_.DateTime=new Date(_.DateTime));const y=(_.DateTime-v.DateTime)/6,b=_.Height-v.Height;o.push(v);let E=new Date(v.DateTime);a.forEach(T=>{const k=T/12*b;E=new Date(E.getTime()+y),o.push({DateTime:E,Height:o[o.length-1].Height+k})})}o.push(u[u.length-1]);const m=new Date(`${i}T23:59:59`);if(u[u.length-1].DateTime<m){const p=u[u.length-1];o.push({DateTime:m,Height:p.Height+.5})}return o.filter(p=>p.DateTime>=d&&p.DateTime<=m)}function Br(){if(!$.selectedDate||!$.closestTideStation)return;const i=($.tideData[$.closestTideStation]||[]).map(P=>({...P,DateTime:new Date(P.DateTime)})).filter(P=>P.DateTime.toISOString().startsWith($.selectedDate));if(i.length===0)return;const o=Ba(i,$.selectedDate),a=new Date(`${$.selectedDate}T03:00:00`),u=new Date(`${$.selectedDate}T21:00:00`),h=o.filter(P=>P.DateTime>=a&&P.DateTime<=u);if(h.length<2)return;const c=document.getElementById("tide-chart-container"),d={top:10,right:14,bottom:34,left:34},m=c.offsetWidth-d.left-d.right,p=210,v=sn("--color-chart-line","#90caf9"),_=sn("--color-chart-line","#90caf9"),y=sn("--color-chart-axis","#c6d5ea"),b=sn("--color-chart-grid","rgba(198, 213, 234, 0.22)"),E=sn("--color-text","#ffffff"),T=tp().domain([a,u]).range([0,m]),k=ya().domain([0,4.5]).range([p,0]);Yi("#tide-chart-container").html("");const z=Yi("#tide-chart-container").append("svg").attr("width",m+d.left+d.right).attr("height",p+d.top+d.bottom).attr("role","img").attr("aria-label","Tide height chart for the selected day").append("g").attr("transform",`translate(${d.left},${d.top})`),I=z.append("defs").append("linearGradient").attr("id","tide-area-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");I.append("stop").attr("offset","0%").attr("stop-color",_).attr("stop-opacity",.2),I.append("stop").attr("offset","100%").attr("stop-color",_).attr("stop-opacity",0);const Z=Da().x(P=>T(P.DateTime)).y(P=>k(P.Height)).curve(As),V=ep().x(P=>T(P.DateTime)).y0(k(0)).y1(P=>k(P.Height)).curve(As);z.append("path").datum(h).attr("fill","url(#tide-area-gradient)").attr("d",V),z.append("path").datum(h).attr("fill","none").attr("stroke",v).attr("stroke-width",3).attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("d",Z);const S=z.append("g").attr("transform",`translate(0,${p})`).call(Ul(T).ticks(fi.every(6)).tickFormat(P=>`${String(P.getHours()).padStart(2,"0")}:00`)),O=z.append("g").call(Xo(k).ticks(3).tickFormat(P=>`${P.toFixed(1)}m`));S.selectAll("path, line").attr("stroke",y),S.selectAll("text").attr("fill",y),O.selectAll("path, line").attr("stroke",y),O.selectAll("text").attr("fill",y),S.selectAll("text").attr("font-size","11px").attr("font-weight","500"),O.selectAll("text").attr("font-size","11px").attr("font-weight","500"),S.select(".domain").attr("stroke-opacity",.35),O.select(".domain").attr("stroke-opacity",0),O.selectAll(".tick line").attr("stroke-opacity",0),z.append("g").attr("class","tide-grid").call(Xo(k).ticks(3).tickSize(-m).tickFormat("")).selectAll("line").attr("stroke",b).attr("stroke-dasharray","1,7").attr("stroke-opacity",.5),z.select(".tide-grid path").attr("stroke","none");const st=Yi("#tide-chart-container").append("div").attr("class","tooltip").style("position","absolute").style("display","none").style("pointer-events","none"),nt=z.append("circle").attr("r",4).attr("fill",E).style("filter",`drop-shadow(0px 0px 6px ${E})`).style("display","none"),ht=c.offsetWidth,W=10;z.append("rect").attr("width",m).attr("height",p).attr("fill","transparent").on("mousemove",function(P){const[q]=Pc(P),H=T.invert(q),Q=h.reduce((N,dt)=>Math.abs(dt.DateTime-H)<Math.abs(N.DateTime-H)?dt:N),at=d.left+T(Q.DateTime),it=d.top+k(Q.Height);nt.attr("cx",T(Q.DateTime)).attr("cy",k(Q.Height)).style("display","block"),st.html(`<strong>${Ir("%H:%M")(Q.DateTime)}</strong><br>Height: ${Q.Height.toFixed(2)}m`).style("display","block").style("left",Math.max(50,Math.min(ht-50,at))+"px").style("top",it-W+"px").style("transform","translate(-50%, -100%)")}).on("mouseout",function(){nt.style("display","none"),st.style("display","none")})}function ap(e){return Number.isFinite(e)?e<=2?"Low":e<=5?"Moderate":e<=7?"High":e<=10?"Very High":"Extreme":""}const up={0:["Clear",""],1:["Mainly clear",""],2:["Partly cloudy",""],3:["Overcast",""],45:["Fog",""],48:["Rime fog",""],51:["Light drizzle",""],53:["Moderate drizzle",""],55:["Dense drizzle",""],56:["Light freezing drizzle",""],57:["Dense freezing drizzle",""],61:["Slight rain",""],63:["Moderate rain",""],65:["Heavy rain",""],66:["Light freezing rain",""],67:["Heavy freezing rain",""],71:["Slight snow",""],73:["Moderate snow",""],75:["Heavy snow",""],77:["Snow grains",""],80:["Slight rain showers",""],81:["Moderate rain showers",""],82:["Violent rain showers",""],85:["Slight snow showers",""],86:["Heavy snow showers",""],95:["Thunderstorm",""],96:["Thunderstorm with slight hail",""],99:["Thunderstorm with heavy hail",""]};async function lp(e){if(!e?.coords)return;const i=e.coords[0],o=e.coords[1];try{const u=await(await gr(`https://api.open-meteo.com/v1/forecast?latitude=${i}&longitude=${o}&hourly=temperature_2m,weathercode,wind_speed_10m,precipitation_probability,relative_humidity_2m,uv_index&current_weather=true`)).json(),h=u.current_weather,c=u.hourly,d=new Date(h.time);let m=0,p=1/0;c.time.forEach((q,H)=>{const Q=Math.abs(new Date(q)-d);Q<p&&(p=Q,m=H)});const v=h.temperature??"--",_=h.windspeed??"--",y=parseFloat(_)||0;$.currentWindSpeed=y;const b=typeof h.winddirection=="number"&&Number.isFinite(h.winddirection)?h.winddirection:null;$.currentWindDirectionDeg=b;const E=c.precipitation_probability?.[m]??"--",T=c.relative_humidity_2m?.[m]??"--",k=c.uv_index?.[m]??"--",z=h.weathercode,[R,I]=up[z]||["Unknown",""];document.getElementById("weather-icon").textContent=I,document.getElementById("weather-temp-big").textContent=v,document.getElementById("weather-condition-text").textContent=R,document.getElementById("weather-rain").textContent=`${E}%`,document.getElementById("weather-humidity").textContent=`${T}%`,document.getElementById("weather-wind").textContent=`${_} km/h`;const Z=document.getElementById("weather-box");let V="cloudy";z===0||z===1?V="sunny":z===2?V="cloudy":z===3||z===45||z===48?V="overcast":z===51||z===53||z===55?V="drizzle":V="rainy",Z&&(Z.classList.remove("weather-sunny","weather-cloudy","weather-overcast","weather-rainy","weather-drizzle"),Z.classList.add(`weather-${V}`)),Ds(V);const S=document.getElementById("wind-level"),O=document.querySelector(".wind-gust");if(S){let q="Calm breeze";y>=35?q="Very windy":y>=20?q="Breezy":y>=10&&(q="Light breeze"),S.textContent=q}const st=document.querySelector(".wind-arrow-icon");if(st&&(y>=20?st.textContent="":y<=5?st.textContent="":st.textContent=""),O){const q=Math.max(1.4,3.2-Math.min(y,40)/18);O.style.setProperty("--wind-gust-duration",`${q}s`),O.style.opacity=y<3?"0.45":"1"}const nt=parseFloat(k),ht=document.getElementById("uv-index-value"),W=document.getElementById("uv-level"),P=document.getElementById("uv-bar-fill");if(ht&&W){ht.textContent=Number.isFinite(nt)?nt.toFixed(1):"--";const q=ap(nt);W.textContent=q}if(P){const q=Number.isFinite(nt)?Math.min(100,nt/11*100):0;P.style.width=`${100-q}%`}}catch{document.getElementById("weather-condition-text").textContent="Weather unavailable",document.getElementById("weather-rain").textContent="--%",document.getElementById("weather-humidity").textContent="--%",document.getElementById("weather-wind").textContent="-- km/h";const u=document.getElementById("wind-level"),h=document.querySelector(".wind-gust"),c=document.getElementById("uv-index-value"),d=document.getElementById("uv-level");u&&(u.textContent="Wind data unavailable"),h&&(h.style.setProperty("--wind-gust-duration","3.2s"),h.style.opacity="0.45"),c&&(c.textContent="--"),d&&(d.textContent="");const m=document.getElementById("uv-bar-fill");m&&(m.style.width="100%"),Ds(null)}}function Ds(e){const i=document.getElementById("weather-box");if(!i)return;const o=i.querySelector(".weather-rain.front-row"),a=i.querySelector(".weather-rain.back-row");if(!o||!a||(o.innerHTML="",a.innerHTML="",e!=="rainy"&&e!=="drizzle"))return;let u=0;const h=55,c=e==="drizzle"?1.8:1;for(;u<h;){const d=Math.floor(Math.random()*98)+1,m=Math.floor(Math.random()*3)+3;if(u+=m*c,u>h)break;const p=`0.${d}s`,v=`0.5${d}s`,_=()=>{const E=document.createElement("div");E.className="weather-drop",E.style.animationDelay=p,E.style.animationDuration=v;const T=document.createElement("div");T.className="weather-stem",T.style.animationDelay=p,T.style.animationDuration=v;const k=document.createElement("div");return k.className="weather-splat",k.style.animationDelay=p,k.style.animationDuration=v,E.appendChild(T),E.appendChild(k),E},y=_();y.style.left=`${u}%`,y.style.bottom=`${100+m*2}%`,o.appendChild(y);const b=_();b.style.right=`${u}%`,b.style.bottom=`${100+m*2}%`,a.appendChild(b)}}const hp="8f563c2a34086b0f41340a3b1526ea4f",cp={Sandown:80,Shanklin:80,Ventnor:80,"Compton Bay":80,"East Cowes":80,"Osborne Bay":80,"Ryde Beach":80,"Appley Beach":80,"Seagrove Bay":80,"Sandown Bay":80},fp=87;async function dp(e){if(!e)return;const i=cp[e.name]??fp;try{const o=`https://coastalmonitoring.org/observations/waves/latest?key=${hp}&sensor=${i}`,u=await(await gr(o)).text(),c=new DOMParser().parseFromString(u,"application/xml"),d=c.querySelector("ms\\:hs, hs"),m=c.querySelector("ms\\:hmax, hmax"),p=c.querySelector("ms\\:tp, tp"),v=c.querySelector("ms\\:tz, tz"),_=c.querySelector("ms\\:pdir, pdir"),y=c.querySelector("ms\\:spread, spread"),b=c.querySelector("ms\\:te, te"),E=c.querySelector("ms\\:sst, sst"),T=c.querySelector("ms\\:power, power"),k=parseFloat(d?.textContent??"0")||0,z=parseFloat(m?.textContent??"0")||0,R=parseFloat(p?.textContent??"0")||0,I=parseFloat(v?.textContent??"0")||0,Z=parseFloat(_?.textContent??"0")||0,V=parseFloat(y?.textContent??"0")||0,S=parseFloat(b?.textContent??"0")||0,O=parseFloat(E?.textContent??"0")||0,st=parseFloat(T?.textContent??"")||null;$.currentWaveHeight=k,$.currentSeaTemperature=O,$.currentWavePeriod=R||I||0,$.currentWavePower=st,mp(k,R);const nt=document.getElementById("wave-height"),ht=document.getElementById("wave-tp");nt&&(nt.textContent=`${k.toFixed(2)} m`),ht&&(ht.textContent=R?`${R.toFixed(1)} s`:"--");const W=Math.min(k/2.5,1)*100,P=document.getElementById("wave-fill");P&&(P.style.height=`${W}%`);let q="Calm";k>1.2?q="Rough waves ":k>.6?q="Moderate surf":k>.3&&(q="Gentle waves");const H=document.getElementById("wave-description");H&&(H.textContent=q);const Q=document.getElementById("sea-temp-value");Q&&O&&(Q.textContent=`${O.toFixed(1)} C`);const at=document.getElementById("wave-details"),it=document.getElementById("wave-details-button"),N=document.getElementById("wave-back-button"),dt=document.getElementById("wave-box");if(at&&it&&N&&dt&&(at.innerHTML=`
        <div class="wave-details-grid">
          <div class="wave-detail">
            <span class="wave-detail-label">Hmax</span>
            <span class="wave-detail-value">${z?z.toFixed(2)+" m":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Tz</span>
            <span class="wave-detail-value">${I?I.toFixed(1)+" s":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Dir</span>
            <span class="wave-detail-value">${Z?Math.round(Z)+"":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Spread</span>
            <span class="wave-detail-value">${V?Math.round(V)+"":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Te</span>
            <span class="wave-detail-value">${S?S.toFixed(1)+" s":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">SST</span>
            <span class="wave-detail-value">${O?O.toFixed(1)+" C":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Power</span>
            <span class="wave-detail-value">${st!=null?st.toFixed(1)+" kW/m":"--"}</span>
          </div>
        </div>
      `,!dt.dataset.waveDetailsInit)){dt.dataset.waveDetailsInit="true",dt.classList.add("wave-details-enabled");const B=et=>{const vt=dt.querySelector(".card-header");if(vt&&vt.contains(et.target))return;const wt=dt.classList.toggle("is-flipped");it.setAttribute("aria-pressed",wt?"true":"false")};dt.addEventListener("click",B),it.addEventListener("click",et=>{et.stopPropagation(),B(et)}),N.addEventListener("click",et=>{et.stopPropagation(),B(et)})}}catch{$.currentWavePower=null;const a=document.getElementById("wave-description"),u=document.getElementById("wave-tp");a&&(a.textContent="Unavailable"),u&&(u.textContent="--")}}function mp(e,i){const o=Math.max(2.2,Math.min(e*6,8)),a=3.5,u=28,c=`
    <svg viewBox="0 0 120 ${u}" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 ${a}
        C 16 ${Math.max(.2,a-o)}, 44 ${a+o*.45}, 60 ${a}
        C 76 ${Math.max(.2,a-o)}, 104 ${a+o*.45}, 120 ${a}
        V${u} H0 Z"
        fill="#778ba5" fill-opacity="1"/>
    </svg>`,d=`data:image/svg+xml;utf8,${encodeURIComponent(c)}`,m=document.getElementById("wave-fill");if(m){m.style.setProperty("--wave-svg",`url("${d}")`);const p=i&&isFinite(i)?i:6,v=Math.max(3,Math.min(p*1.1,14));m.style.setProperty("--wave-speed-1",`${v}s`),m.style.setProperty("--wave-speed-2",`${(v*1.6).toFixed(1)}s`)}}const za="stw-favourites",Oa="stw-theme",Na="stw-collapsibles";function pp(){const e=localStorage.getItem(Oa);return e==="light"||e==="dark"?e:"light"}function _p(e){const i=document.getElementById("theme-toggle");if(!i)return;const o=e==="light";i.setAttribute("aria-pressed",String(o));const u=`Switch to ${o?"dark mode":"light mode"}`;i.setAttribute("aria-label",u),i.setAttribute("title",u),i.textContent=o?"":""}function Is(e){document.documentElement.setAttribute("data-theme",e),_p(e)}function gp(e){const i=document.getElementById("theme-toggle");if(!i)return"dark";const o=pp();return Is(o),e&&e(o),i.addEventListener("click",()=>{const u=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";localStorage.setItem(Oa,u),Is(u),e&&e(u)}),o}function zr(){try{const e=localStorage.getItem(Na);return e?JSON.parse(e):{}}catch{return{}}}function Za(e,i){const o=zr();o[e]=i,localStorage.setItem(Na,JSON.stringify(o))}function vp(){const e=zr();document.querySelectorAll("[data-collapsible-toggle]").forEach(o=>{const a=o.getAttribute("aria-controls"),u=a?document.getElementById(a):null,h=o.closest(".collapsible-card");if(!u||!h)return;const c=p=>{o.setAttribute("aria-expanded",String(p)),u.classList.toggle("collapsed",!p),h.classList.toggle("is-collapsed",!p),a&&Za(a,p)},d=e[a],m=d!==void 0?d:o.getAttribute("aria-expanded")!=="false";c(m),o.addEventListener("click",()=>{const p=o.getAttribute("aria-expanded")==="true";c(!p)})})}function yp(){const e=document.getElementById("favourite-toggle");e.addEventListener("click",()=>{const i=$.selectedBeach;if(!i)return;const o=Or(),a=o.indexOf(i.name);a>=0?o.splice(a,1):o.push(i.name),localStorage.setItem(za,JSON.stringify(o)),Ra(i.name),e.classList.add("bounce"),setTimeout(()=>e.classList.remove("bounce"),400),Fa()})}let Vn=null;function wp(e,i){Vn={beaches:e,onSelectBeach:i},Fa()}function xp(){const e=document.getElementById("beach-tags-toggle"),i=document.querySelector(".beach-description-card"),o=document.getElementById("beach-description");if(!e||!i||!o)return;const a="beach-description",u=zr(),h=p=>{e.setAttribute("aria-expanded",String(p)),e.setAttribute("aria-label",p?"Hide beach details":"Show beach details"),o.classList.toggle("collapsed",!p),i.classList.toggle("is-collapsed",!p),Za(a,p)},c=Object.prototype.hasOwnProperty.call(u,a),d=u[a],m=c?d:!0;h(m),!c&&m&&e.classList.add("pulse"),e.addEventListener("click",()=>{e.classList.remove("pulse");const p=e.getAttribute("aria-expanded")==="true";h(!p)})}function Or(){try{return JSON.parse(localStorage.getItem(za)||"[]")}catch{return[]}}function Fa(){if(!Vn)return;const e=document.getElementById("favourites-bar");if(!e)return;const i=Or();if(e.innerHTML="",!i.length){const o=document.createElement("div");o.className="favourites-empty",o.textContent="Tap the heart to add favourites",e.appendChild(o);return}i.forEach(o=>{const a=Vn.beaches.find(h=>h.name===o);if(!a)return;const u=document.createElement("button");u.type="button",u.className="favourite-pill",u.textContent=o,$.selectedBeach&&$.selectedBeach.name===o&&u.classList.add("is-active"),u.addEventListener("click",()=>{Vn.onSelectBeach(a);const h=document.getElementById("favourites-bar");h&&h.querySelectorAll(".favourite-pill").forEach(c=>c.classList.toggle("is-active",c===u))}),e.appendChild(u)})}function Ra(e){const i=document.getElementById("favourite-toggle"),o=Or().includes(e);i.classList.toggle("favourited",o),i.setAttribute("aria-pressed",String(o)),i.textContent=o?"":""}function nr(e){const i=$.selectedBeach,o=$.tideData[$.closestTideStation]||[],a=document.getElementById("beach-media"),u=document.getElementById("beach-description-text"),h=document.getElementById("beach-conditions");if(!a||!u||!h||!i)return;const c=e[i.name]||{};a.innerHTML="",c.video?bp(a,c,i.name):c.image?Tp(a,c,i.name):Lp(a),Mp(u,h,c,o),Pp(c,i.name)}function bp(e,i,o){e._swapTimeout&&(clearTimeout(e._swapTimeout),e._swapTimeout=null),e.classList.remove("beach-media--video-loading");let a=null;if(i.image)a=document.createElement("img"),a.src=i.image,a.alt=o+" photo",e.appendChild(a),requestAnimationFrame(()=>a.classList.add("show")),i.video&&e.classList.add("beach-media--video-loading");else{const d=document.createElement("div");d.style.background="#0f0f0f",e.appendChild(d),requestAnimationFrame(()=>d.classList.add("show"))}const u=/youtube\.com|youtu\.be|vimeo\.com/i.test(i.video);let h;if(u){const d=i.video+(i.video.includes("?")?"&":"?")+"autoplay=1&mute=1&rel=0&modestbranding=1&controls=1&playsinline=1",m=document.createElement("iframe");m.src=d,m.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",m.referrerPolicy="strict-origin-when-cross-origin",m.allowFullscreen=!0,m.title=`${o} beach video`,h=m}else{const d=document.createElement("video");d.src=i.video,d.playsInline=!0,d.controls=!0,h=d}e.appendChild(h);const c=()=>{e.classList.remove("beach-media--video-loading"),requestAnimationFrame(()=>{h.classList.add("show"),a?a.classList.remove("show"):e.firstChild&&e.firstChild!==h&&e.firstChild.classList.remove("show"),setTimeout(()=>{[...e.children].forEach(d=>{d!==h&&!d.classList.contains("show")&&d.remove()})},600)})};e._swapTimeout=setTimeout(()=>{if(u)c();else if(h.tagName==="VIDEO"){const d=setTimeout(c,800);h.addEventListener("canplay",()=>{clearTimeout(d),c()},{once:!0})}else c()},3700)}function Tp(e,i,o){const a=document.createElement("img");a.src=i.image,a.alt=o+" photo",e.appendChild(a),requestAnimationFrame(()=>a.classList.add("show"))}function Lp(e){const i=document.createElement("div");i.textContent="No media available",i.style.color="#666",i.style.padding="20px",e.appendChild(i),requestAnimationFrame(()=>i.classList.add("show"))}function Mp(e,i,o,a){const u=new Date,h=a.map(W=>({...W,DateTime:new Date(W.DateTime)})).filter(W=>W.DateTime.toISOString().startsWith($.selectedDate));let c="--";if(h.length>0){const W=Ba(h,$.selectedDate);if(W.length>0){let P=0,q=1/0;W.forEach((N,dt)=>{const B=Math.abs(N.DateTime-u);B<q&&(q=B,P=dt)});const H=W[P];c=H?.Height?.toFixed(2)??"--";const Q=W[Math.min(P+1,W.length-1)],at=W[Math.max(P-1,0)],it=Q&&Q.DateTime>H.DateTime?Q:at;it&&typeof it.Height=="number"&&typeof H.Height=="number"&&(it.Height>H.Height||it.Height<H.Height)}}const d=$.currentWindSpeed||0,m=$.currentWaveHeight||0,p=$.currentSeaTemperature||0,v=$.currentWavePeriod||0,_=$.currentWindDirectionDeg;let y="--";if(typeof _=="number"&&Number.isFinite(_)){const W=["N","NE","E","SE","S","SW","W","NW"],P=Math.round(_%360/45)%8;y=W[P]}let b="decent for swimming";d>15||m>1.2?b="probably rough for swimming":d<5&&parseFloat(c)>1&&m<.3&&(b="ideal for a swim");const E=o?.text??"No description available for this beach.";e.textContent=E;const T=document.getElementById("cond-tide"),k=document.getElementById("cond-waves"),z=document.getElementById("cond-waves-period"),R=document.getElementById("cond-waves-power"),I=document.getElementById("cond-sea-temp"),Z=document.getElementById("cond-wind"),V=document.getElementById("cond-wind-arrow"),S=document.getElementById("cond-wind-dir-text"),O=document.getElementById("cond-eval");T&&(T.textContent=`${c} m`);const st=document.getElementById("cond-tide-next"),nt=document.getElementById("cond-tide-arrow");if(st&&h.length>0){const W=$.selectedDate,q=a.map(H=>({...H,DateTime:new Date(H.DateTime)})).filter(H=>H.DateTime.toISOString().startsWith(W)&&H.DateTime>u&&(H.EventType==="HighWater"||H.EventType==="LowWater")).sort((H,Q)=>H.DateTime-Q.DateTime)[0];if(q){const H=q.DateTime-u,Q=Math.max(0,Math.floor(H/(1e3*60*60))),at=Math.max(0,Math.floor(H/(1e3*60)%60)),it=Q.toString(),N=at.toString().padStart(2,"0");st.textContent=`${it}h ${N}m`,nt&&(nt.textContent=q.EventType==="LowWater"?"":"")}else st.textContent="--",nt&&(nt.textContent="")}k&&(k.textContent=`${m.toFixed(1)} m`),z&&(z.textContent=v?`${v.toFixed(1)} s`:"-- s");const ht=$.currentWavePower;R&&(R.textContent=ht!=null?`${ht.toFixed(1)} kW/m`:"-- kW/m"),I&&(I.textContent=p?`${p.toFixed(1)} C`:"-- C"),Z&&(Z.textContent=`${d.toFixed(0)} km/h`),V&&typeof _=="number"&&Number.isFinite(_)&&V.style.setProperty("--wind-direction-deg",`${_}deg`),S&&(S.textContent=y),O&&(O.textContent=b==="ideal for a swim"?"Ideal for a swim":b==="probably rough for swimming"?"Rough for swimming":"Decent for swimming",O.classList.remove("condition-eval--ok","condition-eval--caution","condition-eval--rough"),b==="ideal for a swim"?O.classList.add("condition-eval--ok"):b==="probably rough for swimming"?O.classList.add("condition-eval--rough"):O.classList.add("condition-eval--caution"))}function Pp(e,i){const o=document.getElementById("beach-tags");if(!o)return;const u=(e?.text??i??"Beach details").toLowerCase(),h={Sandown:["sandy","swimming","family"],Shanklin:["golden","esplanade","cliffs"],Ventnor:["sheltered","cliffs","warm"],"Compton Bay":["wild","surf","fossils"],Totland:["quiet","views","sunset"],"Colwell Bay":["calm","family","sunset"],"Gurnard Bay":["quiet","sailing","views"],"East Cowes":["historic","solent","views"],"Osborne Bay":["secluded","pebbly","victoria"],"Ryde Beach":["long","sandy","pier"],"Appley Beach":["sandy","tower","quiet"],"Seagrove Bay":["sheltered","calm","relaxed"]}[i];let c;if(h)c=h;else{const d=new Set(["a","an","the","one","of","and","with","for","to","by","on","at","in"]);if(c=u.replace(/[^a-z\s]/g," ").split(/\s+/).filter(m=>m.length>1&&!d.has(m)).slice(0,3),c.length<3){const m=u.replace(/[^a-z\s]/g," ").split(/\s+/).filter(Boolean).slice(0,3);c=c.length?c:m}}c.length?o.textContent=c.join("  "):o.textContent="Beach  details"}const Cp=60;function Sp(){const e=document.querySelector(".banner");if(!e)return;let i=window.scrollY??document.documentElement.scrollTop;function o(){const a=window.scrollY??document.documentElement.scrollTop;a<=Cp?e.classList.remove("banner--hidden"):a>i?e.classList.add("banner--hidden"):e.classList.remove("banner--hidden"),i=a}window.addEventListener("scroll",o,{passive:!0})}const Ha="stw-tutorial-dismissed",Nr=[{id:"map",target:"#map",message:"Tap a beach on the map to see its conditions and details.",arrow:"bottom"},{id:"beach-name",target:".info-header",message:"Selected beach and quick summary. Add it to favourites with the heart.",arrow:"bottom"},{id:"beach-details",target:"#beach-tags-toggle",message:"Tap here to hide/show the details about the beach. A live video will load here if available.",arrow:"bottom"},{id:"conditions",target:".beach-conditions-card",message:"Tide, waves, sea temp and wind at a glance.",arrow:"bottom"},{id:"chevrons",target:".beach-conditions-card .tile-toggle",message:"Tap the chevrons to collapse or expand a section.",arrow:"bottom"},{id:"tide",target:".info-item.tide",message:"Tide times and heights for your chosen beach.",arrow:"bottom"},{id:"waves",target:"#wave-box",message:"Wave height and power from local buoys.",arrow:"bottom"},{id:"flippable",target:".wave-details-button",message:"Cards with a pulsing icon can be tapped for more info.",arrow:"bottom"},{id:"weather",target:"#weather-box",message:"Weather, rain chance and UV for your chosen beach.",arrow:"bottom"},{id:"favourites",target:"#favourites-bar",message:"Shortcuts to your favourite beaches.",arrow:"top"},{id:"theme",target:"#theme-toggle",message:"Switch between light and dark mode.",arrow:"top"},{id:"bulb",target:"#tutorial-restore",message:"Tap the bulb to see the tutorial again anytime.",arrow:"top"}];function Zr(){try{const e=localStorage.getItem(Ha);return e?JSON.parse(e):[]}catch{return[]}}function Wa(e){try{localStorage.setItem(Ha,JSON.stringify(e))}catch{}}function Ua(e,i){if(!i)return;const o=i.getBoundingClientRect(),a=e.dataset.arrow||"bottom";e.style.position="fixed",e.style.left="",e.style.right="",e.style.top="",e.style.bottom="";const u=8,h=e.getBoundingClientRect(),c=12;let d=0,m=0;a==="bottom"?(d=o.left+o.width/2-h.width/2,m=o.bottom+u,e.style.top=`${m}px`):(d=o.left+o.width/2-h.width/2,m=o.top-h.height-u,e.style.top=`${m}px`,e.style.bottom="auto"),d=Math.max(c,Math.min(window.innerWidth-h.width-c,d)),e.style.left=`${d}px`;const v=o.left+o.width/2-d,_=Math.max(7,Math.min(h.width-7,v));e.style.setProperty("--arrow-offset",`${_}px`)}function $a(){const e=Zr();return Nr.find(i=>!e.includes(i.id))??null}function Ep(e){const i=document.querySelector(e.target);if(!i)return null;const o=document.createElement("div");return o.className=`tutorial-tip tutorial-tip--${e.arrow}`,o.dataset.tutorialId=e.id,o.dataset.arrow=e.arrow,o.setAttribute("role","dialog"),o.setAttribute("aria-label","Tip"),o.innerHTML=`
    <span class="tutorial-tip-arrow" aria-hidden="true"></span>
    <p class="tutorial-tip-message">${e.message}</p>
    <button type="button" class="tutorial-tip-dismiss" aria-label="Dismiss tip">Got it</button>
  `,o.querySelector(".tutorial-tip-dismiss").addEventListener("click",()=>kp(e.id)),{wrap:o,targetEl:i}}function Bs(){const e=document.getElementById("tutorial-overlays");if(!e)return;const i=e.querySelector(".tutorial-tip");if(!i)return;const o=Nr.find(u=>u.id===i.dataset.tutorialId),a=o&&document.querySelector(o.target);a&&Ua(i,a)}function kp(e){const i=Zr();i.includes(e)||(Wa([...i,e]),qa(),Yn())}function Yn(){const e=Zr(),i=document.getElementById("tutorial-restore");if(!i)return;const o=Nr.every(h=>e.includes(h.id)),a=$a(),u=o||a&&a.id==="bulb";i.style.display=u?"":"none",i.setAttribute("aria-hidden",u?"false":"true")}function qa(){const e=document.getElementById("tutorial-overlays");if(!e)return;e.innerHTML="";const i=$a();if(!i){Yn();return}const o=Ep(i);if(!o){Yn();return}const{wrap:a,targetEl:u}=o;e.appendChild(a),requestAnimationFrame(()=>Ua(a,u)),Yn()}function Va(){qa()}function Ap(){Wa([]),Va();const e=document.getElementById("tutorial-restore");e&&(e.style.display="none")}function Dp(){if(!document.getElementById("tutorial-overlays"))return;Va(),window.addEventListener("scroll",Bs,{passive:!0}),window.addEventListener("resize",Bs);const i=document.getElementById("tutorial-restore");i&&i.addEventListener("click",()=>{Ap()})}const Ip=[{name:"Sandown",coords:[50.651659,-1.160827]},{name:"Shanklin",coords:[50.627777,-1.177225]},{name:"Ventnor",coords:[50.594139,-1.208685]},{name:"Compton Bay",coords:[50.65481,-1.467071]},{name:"Totland",coords:[50.682695,-1.544676]},{name:"Colwell Bay",coords:[50.693213,-1.534249]},{name:"Gurnard Bay",coords:[50.76263,-1.324066]},{name:"East Cowes",coords:[50.759,-1.289]},{name:"Osborne Bay",coords:[50.755122,-1.255789]},{name:"Ryde Beach",coords:[50.731372,-1.149723]},{name:"Appley Beach",coords:[50.727313,-1.138162]},{name:"Seagrove Bay",coords:[50.717,-1.111]}],Bp={Ryde:[50.729486,-1.16245],"Bembridge Approach":[50.685,-1.073],"Totland Bay":[50.682695,-1.544676],Cowes:[50.763,-1.298],Sandown:[50.651659,-1.160827],Yarmouth:[50.705,-1.5],Ventnor:[50.594139,-1.208685],"Freshwater Bay":[50.668,-1.526],Foreland:[50.685,-1.085]},zp={Sandown:{image:"https://lh5.googleusercontent.com/p/AF1QipNTDVuQN1X-pRhtDOvkzgH88J6pzXJuqDTnaVEv=w408-h544-k-no",video:"https://www.youtube.com/embed/zITv7NFN0HI?si=xfSA1IfC7Ofm0WbJ&autoplay=1&mute=1&rel=1&modestbranding=1&controls=0&showinfo=0",text:"A long sandy beach popular for swimming and family fun, backed by a traditional promenade."},Shanklin:{image:"https://res.dayoutwiththekids.co.uk/image/upload/v1594048503/attractions/s/shanklin-beach-bc9df5f3/34868-shanklin-beach-newport-01.jpg",text:"Charming seafront with golden sands, a Victorian esplanade, and dramatic cliffs."},Ventnor:{image:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0d/b0/a2/16/atlantic-ocean-at-ventnor.jpg?w=1200&h=-1&s=1",video:"https://www.youtube.com/embed/3nah_tJ5_LA",text:"A sheltered south-facing beach beneath steep cliffs, with a Victorian seaside character and some of the warmest waters on the island."},"Compton Bay":{image:"https://upload.wikimedia.org/wikipedia/commons/4/47/Compton_Bay%2C_Isle_of_Wight%2C_UK.jpg",text:"A dramatic sweep of sand backed by crumbling clay cliffs, popular with surfers and fossil hunters. One of the island's most unspoilt beaches."},Totland:{image:"https://coastradar.com/wp-content/uploads/2022/12/Totland-Bay-Pier.jpg",video:"https://www.youtube.com/embed/9CGoqgBdf20",text:"A peaceful pebble-and-sand beach at the western tip of the island, with views towards the Needles and Hurst Castle."},"Colwell Bay":{image:"https://cdn.isleofwight.com/wp-content/uploads/Colwell-Beach-colwell-isle-of-wight-e1590669934690.jpg",video:"https://www.youtube.com/embed/9CGoqgBdf20",text:"A family-friendly bay with a mix of sand and shingle, offering calm waters and fine sunset views across the Solent."},"Gurnard Bay":{image:"https://upload.wikimedia.org/wikipedia/commons/6/68/Flickr_-_ronsaunders47_-_GURNARD_BAY_NR_COWES._ISLE_OF_WIGHT_UK..jpg",text:"A quiet village beach on the north coast, popular with dinghy sailors, with views across the Solent to the mainland."},"East Cowes":{image:"https://lh3.googleusercontent.com/gps-cs-s/AHVAwerJDiaM9vKgp0EmUQUg4dKof7oMel7KwJDf0qd1tjQM45eENfm9KzNuQOhnou77uj4fJ_U66Otw7m9rB76cPqC1DsDpXnP-uCa8-7_Z-aFu0a7Deitlv4XgHY65Ki6tE8dT2-E=s1360-w1360-h1020-rw",video:"https://www.youtube.com/embed/90ZXm5zNhRs",text:"A small beach near the historic Osborne House, with views of the busy Solent shipping lanes and the Cowes waterfront."},"Osborne Bay":{image:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Osborne_Bay%2C_Isle_of_Wight%2C_UK.jpg/500px-Osborne_Bay%2C_Isle_of_Wight%2C_UK.jpg",text:"A secluded pebbly beach on the grounds of Queen Victoria's former residence, accessible from the coastal path."},"Ryde Beach":{image:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/26/69/74/71/ryde-beach-oct-2022.jpg?w=1200&h=1200&s=1",text:"One of the island's longest sandy beaches, stretching from the pier eastward, with excellent facilities and shallow paddling waters."},"Appley Beach":{image:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2d/25/2a/1e/caption.jpg?w=1200&h=1200&s=1",text:"A sandy beach east of Ryde, recognisable by its distinctive Appley Tower. A quieter alternative to busy Ryde Beach."},"Seagrove Bay":{image:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/22/e8/c0/bb/beautiful-seagrove-bay.jpg?w=900&h=500&s=1",text:"A small, sheltered bay near Bembridge, offering calm swimming and a relaxed atmosphere away from the busier resorts."}},Op={beaches:Ip,tideStations:Bp,descriptions:zp},{beaches:zs,tideStations:Os,descriptions:ir}=Op;function Np(e){$.selectedBeach=e,$.closestTideStation=gl(e.coords,Os),document.getElementById("selected-beach-name").textContent=e.name;const i=Os[$.closestTideStation];i&&Cl(i),Ra(e.name),Ia(),Br(),nr(ir),lp(e).then(()=>nr(ir)),dp(e).then(()=>nr(ir))}const Ns=Zs(Np,150);function Zp(){Ia(),Br()}async function Fp(){Ll(),gp(Ml),Sp(),Dp(),vp(),yp(),xp();try{await ip()}catch{document.getElementById("tide-box").innerHTML='<div class="loading-skeleton">Failed to load tide data. Please refresh the page.</div>'}rp(Zp),Pl(zs,Ns),wp(zs,Ns),window.addEventListener("resize",Zs(Br,250))}document.addEventListener("DOMContentLoaded",Fp);
