(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const c of h.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(u){if(u.ep)return;u.ep=!0;const h=o(u);fetch(u.href,h)}})();const V={selectedBeach:null,closestTideStation:null,selectedDate:new Date().toISOString().split("T")[0],currentWindSpeed:0,currentWindDirectionDeg:null,currentWaveHeight:0,currentSeaTemperature:0,currentWavePeriod:0,currentWavePower:null,tideData:{},sunriseTime:null,sunsetTime:null};function sl(e,i){if(!e||!i||e.length<2||i.length<2)return 1/0;const o=v=>v*(Math.PI/180),a=6371,u=o(i[0]-e[0]),h=o(i[1]-e[1]),c=o(e[0]),d=o(i[0]),_=Math.sin(u/2)**2+Math.sin(h/2)**2*Math.cos(c)*Math.cos(d),m=2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_));return a*m}function al(e,i){let o=null,a=1/0;return Object.entries(i).forEach(([u,h])=>{const c=sl(e,h);c<a&&(a=c,o=u)}),o}function Bs(e,i){let o;return(...a)=>{clearTimeout(o),o=setTimeout(()=>e(...a),i)}}async function pr(e,i={},o=3,a=1e3){for(let u=0;u<=o;u++)try{const h=await fetch(e,i);if(!h.ok)throw new Error(`HTTP ${h.status}`);return h}catch(h){if(u===o)throw h;await new Promise(c=>setTimeout(c,a*Math.pow(2,u)))}}function ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var an={exports:{}};var ll=an.exports,$o;function hl(){return $o||($o=1,(function(e,i){(function(o,a){a(i)})(ll,(function(o){var a="1.9.4";function u(t){var n,r,s,l;for(r=1,s=arguments.length;r<s;r++){l=arguments[r];for(n in l)t[n]=l[n]}return t}var h=Object.create||(function(){function t(){}return function(n){return t.prototype=n,new t}})();function c(t,n){var r=Array.prototype.slice;if(t.bind)return t.bind.apply(t,r.call(arguments,1));var s=r.call(arguments,2);return function(){return t.apply(n,s.length?s.concat(r.call(arguments)):arguments)}}var d=0;function _(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,n,r){var s,l,f,g;return g=function(){s=!1,l&&(f.apply(r,l),l=!1)},f=function(){s?l=arguments:(t.apply(r,arguments),setTimeout(g,n),s=!0)},f}function v(t,n,r){var s=n[1],l=n[0],f=s-l;return t===s&&r?t:((t-l)%f+f)%f+l}function p(){return!1}function y(t,n){if(n===!1)return t;var r=Math.pow(10,n===void 0?6:n);return Math.round(t*r)/r}function T(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function C(t){return T(t).split(/\s+/)}function b(t,n){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?h(t.options):{});for(var r in n)t.options[r]=n[r];return t.options}function k(t,n,r){var s=[];for(var l in t)s.push(encodeURIComponent(r?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!n||n.indexOf("?")===-1?"?":"&")+s.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function R(t,n){return t.replace(z,function(r,s){var l=n[s];if(l===void 0)throw new Error("No value provided for variable "+r);return typeof l=="function"&&(l=l(n)),l})}var I=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function N(t,n){for(var r=0;r<t.length;r++)if(t[r]===n)return r;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function S(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var O=0;function ot(t){var n=+new Date,r=Math.max(0,16-(n-O));return O=n+r,window.setTimeout(t,r)}var nt=window.requestAnimationFrame||S("RequestAnimationFrame")||ot,U=window.cancelAnimationFrame||S("CancelAnimationFrame")||S("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function W(t,n,r){if(r&&nt===ot)t.call(n);else return nt.call(window,c(t,n))}function E(t){t&&U.call(window,t)}var q={__proto__:null,extend:u,create:h,bind:c,get lastId(){return d},stamp:_,throttle:m,wrapNum:v,falseFn:p,formatNum:y,trim:T,splitWords:C,setOptions:b,getParamString:k,template:R,isArray:I,indexOf:N,emptyImageUrl:Y,requestFn:nt,cancelFn:U,requestAnimFrame:W,cancelAnimFrame:E};function H(){}H.extend=function(t){var n=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,s=h(r);s.constructor=n,n.prototype=s;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(n[l]=this[l]);return t.statics&&u(n,t.statics),t.includes&&(st(t.includes),u.apply(null,[s].concat(t.includes))),u(s,t),delete s.statics,delete s.includes,s.options&&(s.options=r.options?h(r.options):{},u(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,g=s._initHooks.length;f<g;f++)s._initHooks[f].call(this)}},n},H.include=function(t){var n=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},H.mergeOptions=function(t){return u(this.prototype.options,t),this},H.addInitHook=function(t){var n=Array.prototype.slice.call(arguments,1),r=typeof t=="function"?t:function(){this[t].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function st(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=I(t)?t:[t];for(var n=0;n<t.length;n++)t[n]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(t,n,r){if(typeof t=="object")for(var s in t)this._on(s,t[s],n);else{t=C(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],n,r)}return this},off:function(t,n,r){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],n);else{t=C(t);for(var l=arguments.length===1,f=0,g=t.length;f<g;f++)l?this._off(t[f]):this._off(t[f],n,r)}return this},_on:function(t,n,r,s){if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}if(this._listens(t,n,r)===!1){r===this&&(r=void 0);var l={fn:n,ctx:r};s&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,n,r){var s,l,f;if(this._events&&(s=this._events[t],!!s)){if(arguments.length===1){if(this._firingCount)for(l=0,f=s.length;l<f;l++)s[l].fn=p;delete this._events[t];return}if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}var g=this._listens(t,n,r);if(g!==!1){var w=s[g];this._firingCount&&(w.fn=p,this._events[t]=s=s.slice()),s.splice(g,1)}}},fire:function(t,n,r){if(!this.listens(t,r))return this;var s=u({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var f=0,g=l.length;f<g;f++){var w=l[f],x=w.fn;w.once&&this.off(t,x,w.ctx),x.call(w.ctx||this,s)}this._firingCount--}}return r&&this._propagateEvent(s),this},listens:function(t,n,r,s){typeof t!="string"&&console.warn('"string" type argument expected');var l=n;typeof n!="function"&&(s=!!n,l=void 0,r=void 0);var f=this._events&&this._events[t];if(f&&f.length&&this._listens(t,l,r)!==!1)return!0;if(s){for(var g in this._eventParents)if(this._eventParents[g].listens(t,n,r,s))return!0}return!1},_listens:function(t,n,r){if(!this._events)return!1;var s=this._events[t]||[];if(!n)return!!s.length;r===this&&(r=void 0);for(var l=0,f=s.length;l<f;l++)if(s[l].fn===n&&s[l].ctx===r)return l;return!1},once:function(t,n,r){if(typeof t=="object")for(var s in t)this._on(s,t[s],n,!0);else{t=C(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],n,r,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[_(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[_(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var at=H.extend(lt);function Z(t,n,r){this.x=r?Math.round(t):t,this.y=r?Math.round(n):n}var gt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(t){return this.clone()._add(B(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(B(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=gt(this.x),this.y=gt(this.y),this},distanceTo:function(t){t=B(t);var n=t.x-this.x,r=t.y-this.y;return Math.sqrt(n*n+r*r)},equals:function(t){return t=B(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=B(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function B(t,n,r){return t instanceof Z?t:I(t)?new Z(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Z(t.x,t.y):new Z(t,n,r)}function et(t,n){if(t)for(var r=n?[t,n]:t,s=0,l=r.length;s<l;s++)this.extend(r[s])}et.prototype={extend:function(t){var n,r;if(!t)return this;if(t instanceof Z||typeof t[0]=="number"||"x"in t)n=r=B(t);else if(t=vt(t),n=t.min,r=t.max,!n||!r)return this;return!this.min&&!this.max?(this.min=n.clone(),this.max=r.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this},getCenter:function(t){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var n,r;return typeof t[0]=="number"||t instanceof Z?t=B(t):t=vt(t),t instanceof et?(n=t.min,r=t.max):n=r=t,n.x>=this.min.x&&r.x<=this.max.x&&n.y>=this.min.y&&r.y<=this.max.y},intersects:function(t){t=vt(t);var n=this.min,r=this.max,s=t.min,l=t.max,f=l.x>=n.x&&s.x<=r.x,g=l.y>=n.y&&s.y<=r.y;return f&&g},overlaps:function(t){t=vt(t);var n=this.min,r=this.max,s=t.min,l=t.max,f=l.x>n.x&&s.x<r.x,g=l.y>n.y&&s.y<r.y;return f&&g},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var n=this.min,r=this.max,s=Math.abs(n.x-r.x)*t,l=Math.abs(n.y-r.y)*t;return vt(B(n.x-s,n.y-l),B(r.x+s,r.y+l))},equals:function(t){return t?(t=vt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function vt(t,n){return!t||t instanceof et?t:new et(t,n)}function wt(t,n){if(t)for(var r=n?[t,n]:t,s=0,l=r.length;s<l;s++)this.extend(r[s])}wt.prototype={extend:function(t){var n=this._southWest,r=this._northEast,s,l;if(t instanceof ut)s=t,l=t;else if(t instanceof wt){if(s=t._southWest,l=t._northEast,!s||!l)return this}else return t?this.extend(j(t)||dt(t)):this;return!n&&!r?(this._southWest=new ut(s.lat,s.lng),this._northEast=new ut(l.lat,l.lng)):(n.lat=Math.min(s.lat,n.lat),n.lng=Math.min(s.lng,n.lng),r.lat=Math.max(l.lat,r.lat),r.lng=Math.max(l.lng,r.lng)),this},pad:function(t){var n=this._southWest,r=this._northEast,s=Math.abs(n.lat-r.lat)*t,l=Math.abs(n.lng-r.lng)*t;return new wt(new ut(n.lat-s,n.lng-l),new ut(r.lat+s,r.lng+l))},getCenter:function(){return new ut((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ut(this.getNorth(),this.getWest())},getSouthEast:function(){return new ut(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof ut||"lat"in t?t=j(t):t=dt(t);var n=this._southWest,r=this._northEast,s,l;return t instanceof wt?(s=t.getSouthWest(),l=t.getNorthEast()):s=l=t,s.lat>=n.lat&&l.lat<=r.lat&&s.lng>=n.lng&&l.lng<=r.lng},intersects:function(t){t=dt(t);var n=this._southWest,r=this._northEast,s=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>=n.lat&&s.lat<=r.lat,g=l.lng>=n.lng&&s.lng<=r.lng;return f&&g},overlaps:function(t){t=dt(t);var n=this._southWest,r=this._northEast,s=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>n.lat&&s.lat<r.lat,g=l.lng>n.lng&&s.lng<r.lng;return f&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,n){return t?(t=dt(t),this._southWest.equals(t.getSouthWest(),n)&&this._northEast.equals(t.getNorthEast(),n)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function dt(t,n){return t instanceof wt?t:new wt(t,n)}function ut(t,n,r){if(isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n,r!==void 0&&(this.alt=+r)}ut.prototype={equals:function(t,n){if(!t)return!1;t=j(t);var r=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return r<=(n===void 0?1e-9:n)},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return Ut.distance(this,j(t))},wrap:function(){return Ut.wrapLatLng(this)},toBounds:function(t){var n=180*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return dt([this.lat-n,this.lng-r],[this.lat+n,this.lng+r])},clone:function(){return new ut(this.lat,this.lng,this.alt)}};function j(t,n,r){return t instanceof ut?t:I(t)&&typeof t[0]!="object"?t.length===3?new ut(t[0],t[1],t[2]):t.length===2?new ut(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new ut(t.lat,"lng"in t?t.lng:t.lon,t.alt):n===void 0?null:new ut(t,n,r)}var Ot={latLngToPoint:function(t,n){var r=this.projection.project(t),s=this.scale(n);return this.transformation._transform(r,s)},pointToLatLng:function(t,n){var r=this.scale(n),s=this.transformation.untransform(t,r);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var n=this.projection.bounds,r=this.scale(t),s=this.transformation.transform(n.min,r),l=this.transformation.transform(n.max,r);return new et(s,l)},infinite:!1,wrapLatLng:function(t){var n=this.wrapLng?v(t.lng,this.wrapLng,!0):t.lng,r=this.wrapLat?v(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new ut(r,n,s)},wrapLatLngBounds:function(t){var n=t.getCenter(),r=this.wrapLatLng(n),s=n.lat-r.lat,l=n.lng-r.lng;if(s===0&&l===0)return t;var f=t.getSouthWest(),g=t.getNorthEast(),w=new ut(f.lat-s,f.lng-l),x=new ut(g.lat-s,g.lng-l);return new wt(w,x)}},Ut=u({},Ot,{wrapLng:[-180,180],R:6371e3,distance:function(t,n){var r=Math.PI/180,s=t.lat*r,l=n.lat*r,f=Math.sin((n.lat-t.lat)*r/2),g=Math.sin((n.lng-t.lng)*r/2),w=f*f+Math.cos(s)*Math.cos(l)*g*g,x=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return this.R*x}}),D=6378137,X={R:D,MAX_LATITUDE:85.0511287798,project:function(t){var n=Math.PI/180,r=this.MAX_LATITUDE,s=Math.max(Math.min(r,t.lat),-r),l=Math.sin(s*n);return new Z(this.R*t.lng*n,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var n=180/Math.PI;return new ut((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*n,t.x*n/this.R)},bounds:(function(){var t=D*Math.PI;return new et([-t,-t],[t,t])})()};function Q(t,n,r,s){if(I(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=n,this._c=r,this._d=s}Q.prototype={transform:function(t,n){return this._transform(t.clone(),n)},_transform:function(t,n){return n=n||1,t.x=n*(this._a*t.x+this._b),t.y=n*(this._c*t.y+this._d),t},untransform:function(t,n){return n=n||1,new Z((t.x/n-this._b)/this._a,(t.y/n-this._d)/this._c)}};function P(t,n,r,s){return new Q(t,n,r,s)}var xt=u({},Ut,{code:"EPSG:3857",projection:X,transformation:(function(){var t=.5/(Math.PI*X.R);return P(t,.5,-t,.5)})()}),ht=u({},xt,{code:"EPSG:900913"});function Pt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function St(t,n){var r="",s,l,f,g,w,x;for(s=0,f=t.length;s<f;s++){for(w=t[s],l=0,g=w.length;l<g;l++)x=w[l],r+=(l?"L":"M")+x.x+" "+x.y;r+=n?F.svg?"z":"x":""}return r||"M0 0"}var Nt=document.documentElement.style,le="ActiveXObject"in window,Na=le&&!document.addEventListener,Or="msLaunchUri"in navigator&&!("documentMode"in document),di=$t("webkit"),Nr=$t("android"),Zr=$t("android 2")||$t("android 3"),Za=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Fa=Nr&&$t("Google")&&Za<537&&!("AudioNode"in window),mi=!!window.opera,Fr=!Or&&$t("chrome"),Rr=$t("gecko")&&!di&&!mi&&!le,Ra=!Fr&&$t("safari"),Hr=$t("phantom"),Wr="OTransition"in Nt,Ha=navigator.platform.indexOf("Win")===0,Ur=le&&"transition"in Nt,_i="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zr,$r="MozPerspective"in Nt,Wa=!window.L_DISABLE_3D&&(Ur||_i||$r)&&!Wr&&!Hr,We=typeof orientation<"u"||$t("mobile"),Ua=We&&di,$a=We&&_i,qr=!window.PointerEvent&&window.MSPointerEvent,Vr=!!(window.PointerEvent||qr),Yr="ontouchstart"in window||!!window.TouchEvent,qa=!window.L_NO_TOUCH&&(Yr||Vr),Va=We&&mi,Ya=We&&Rr,Ga=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xa=(function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",p,n),window.removeEventListener("testPassiveEventSupport",p,n)}catch{}return t})(),Ka=(function(){return!!document.createElement("canvas").getContext})(),pi=!!(document.createElementNS&&Pt("svg").createSVGRect),Ja=!!pi&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ja=!pi&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch{return!1}})(),Qa=navigator.platform.indexOf("Mac")===0,tu=navigator.platform.indexOf("Linux")===0;function $t(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var F={ie:le,ielt9:Na,edge:Or,webkit:di,android:Nr,android23:Zr,androidStock:Fa,opera:mi,chrome:Fr,gecko:Rr,safari:Ra,phantom:Hr,opera12:Wr,win:Ha,ie3d:Ur,webkit3d:_i,gecko3d:$r,any3d:Wa,mobile:We,mobileWebkit:Ua,mobileWebkit3d:$a,msPointer:qr,pointer:Vr,touch:qa,touchNative:Yr,mobileOpera:Va,mobileGecko:Ya,retina:Ga,passiveEvents:Xa,canvas:Ka,svg:pi,vml:ja,inlineSvg:Ja,mac:Qa,linux:tu},Gr=F.msPointer?"MSPointerDown":"pointerdown",Xr=F.msPointer?"MSPointerMove":"pointermove",Kr=F.msPointer?"MSPointerUp":"pointerup",Jr=F.msPointer?"MSPointerCancel":"pointercancel",gi={touchstart:Gr,touchmove:Xr,touchend:Kr,touchcancel:Jr},jr={touchstart:su,touchmove:vn,touchend:vn,touchcancel:vn},be={},Qr=!1;function eu(t,n,r){return n==="touchstart"&&ou(),jr[n]?(r=jr[n].bind(this,r),t.addEventListener(gi[n],r,!1),r):(console.warn("wrong event specified:",n),p)}function nu(t,n,r){if(!gi[n]){console.warn("wrong event specified:",n);return}t.removeEventListener(gi[n],r,!1)}function iu(t){be[t.pointerId]=t}function ru(t){be[t.pointerId]&&(be[t.pointerId]=t)}function to(t){delete be[t.pointerId]}function ou(){Qr||(document.addEventListener(Gr,iu,!0),document.addEventListener(Xr,ru,!0),document.addEventListener(Kr,to,!0),document.addEventListener(Jr,to,!0),Qr=!0)}function vn(t,n){if(n.pointerType!==(n.MSPOINTER_TYPE_MOUSE||"mouse")){n.touches=[];for(var r in be)n.touches.push(be[r]);n.changedTouches=[n],t(n)}}function su(t,n){n.MSPOINTER_TYPE_TOUCH&&n.pointerType===n.MSPOINTER_TYPE_TOUCH&&Mt(n),vn(t,n)}function au(t){var n={},r,s;for(s in t)r=t[s],n[s]=r&&r.bind?r.bind(t):r;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}var uu=200;function lu(t,n){t.addEventListener("dblclick",n);var r=0,s;function l(f){if(f.detail!==1){s=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var g=oo(f);if(!(g.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!g.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var w=Date.now();w-r<=uu?(s++,s===2&&n(au(f))):s=1,r=w}}}return t.addEventListener("click",l),{dblclick:n,simDblclick:l}}function hu(t,n){t.removeEventListener("dblclick",n.dblclick),t.removeEventListener("click",n.simDblclick)}var vi=xn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ue=xn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),eo=Ue==="webkitTransition"||Ue==="OTransition"?Ue+"End":"transitionend";function no(t){return typeof t=="string"?document.getElementById(t):t}function $e(t,n){var r=t.style[n]||t.currentStyle&&t.currentStyle[n];if((!r||r==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);r=s?s[n]:null}return r==="auto"?null:r}function it(t,n,r){var s=document.createElement(t);return s.className=n||"",r&&r.appendChild(s),s}function ft(t){var n=t.parentNode;n&&n.removeChild(t)}function yn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Le(t){var n=t.parentNode;n&&n.lastChild!==t&&n.appendChild(t)}function Me(t){var n=t.parentNode;n&&n.firstChild!==t&&n.insertBefore(t,n.firstChild)}function yi(t,n){if(t.classList!==void 0)return t.classList.contains(n);var r=wn(t);return r.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(r)}function K(t,n){if(t.classList!==void 0)for(var r=C(n),s=0,l=r.length;s<l;s++)t.classList.add(r[s]);else if(!yi(t,n)){var f=wn(t);wi(t,(f?f+" ":"")+n)}}function mt(t,n){t.classList!==void 0?t.classList.remove(n):wi(t,T((" "+wn(t)+" ").replace(" "+n+" "," ")))}function wi(t,n){t.className.baseVal===void 0?t.className=n:t.className.baseVal=n}function wn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Dt(t,n){"opacity"in t.style?t.style.opacity=n:"filter"in t.style&&cu(t,n)}function cu(t,n){var r=!1,s="DXImageTransform.Microsoft.Alpha";try{r=t.filters.item(s)}catch{if(n===1)return}n=Math.round(n*100),r?(r.Enabled=n!==100,r.Opacity=n):t.style.filter+=" progid:"+s+"(opacity="+n+")"}function xn(t){for(var n=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in n)return t[r];return!1}function he(t,n,r){var s=n||new Z(0,0);t.style[vi]=(F.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(r?" scale("+r+")":"")}function _t(t,n){t._leaflet_pos=n,F.any3d?he(t,n):(t.style.left=n.x+"px",t.style.top=n.y+"px")}function ce(t){return t._leaflet_pos||new Z(0,0)}var qe,Ve,xi;if("onselectstart"in document)qe=function(){G(window,"selectstart",Mt)},Ve=function(){ct(window,"selectstart",Mt)};else{var Ye=xn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qe=function(){if(Ye){var t=document.documentElement.style;xi=t[Ye],t[Ye]="none"}},Ve=function(){Ye&&(document.documentElement.style[Ye]=xi,xi=void 0)}}function Ti(){G(window,"dragstart",Mt)}function bi(){ct(window,"dragstart",Mt)}var Tn,Li;function Mi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(bn(),Tn=t,Li=t.style.outlineStyle,t.style.outlineStyle="none",G(window,"keydown",bn))}function bn(){Tn&&(Tn.style.outlineStyle=Li,Tn=void 0,Li=void 0,ct(window,"keydown",bn))}function io(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Pi(t){var n=t.getBoundingClientRect();return{x:n.width/t.offsetWidth||1,y:n.height/t.offsetHeight||1,boundingClientRect:n}}var fu={__proto__:null,TRANSFORM:vi,TRANSITION:Ue,TRANSITION_END:eo,get:no,getStyle:$e,create:it,remove:ft,empty:yn,toFront:Le,toBack:Me,hasClass:yi,addClass:K,removeClass:mt,setClass:wi,getClass:wn,setOpacity:Dt,testProp:xn,setTransform:he,setPosition:_t,getPosition:ce,get disableTextSelection(){return qe},get enableTextSelection(){return Ve},disableImageDrag:Ti,enableImageDrag:bi,preventOutline:Mi,restoreOutline:bn,getSizedParentNode:io,getScale:Pi};function G(t,n,r,s){if(n&&typeof n=="object")for(var l in n)Ci(t,l,n[l],r);else{n=C(n);for(var f=0,g=n.length;f<g;f++)Ci(t,n[f],r,s)}return this}var qt="_leaflet_events";function ct(t,n,r,s){if(arguments.length===1)ro(t),delete t[qt];else if(n&&typeof n=="object")for(var l in n)Ei(t,l,n[l],r);else if(n=C(n),arguments.length===2)ro(t,function(w){return N(n,w)!==-1});else for(var f=0,g=n.length;f<g;f++)Ei(t,n[f],r,s);return this}function ro(t,n){for(var r in t[qt]){var s=r.split(/\d/)[0];(!n||n(s))&&Ei(t,s,null,null,r)}}var Si={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ci(t,n,r,s){var l=n+_(r)+(s?"_"+_(s):"");if(t[qt]&&t[qt][l])return this;var f=function(w){return r.call(s||t,w||window.event)},g=f;!F.touchNative&&F.pointer&&n.indexOf("touch")===0?f=eu(t,n,f):F.touch&&n==="dblclick"?f=lu(t,f):"addEventListener"in t?n==="touchstart"||n==="touchmove"||n==="wheel"||n==="mousewheel"?t.addEventListener(Si[n]||n,f,F.passiveEvents?{passive:!1}:!1):n==="mouseenter"||n==="mouseleave"?(f=function(w){w=w||window.event,Ai(t,w)&&g(w)},t.addEventListener(Si[n],f,!1)):t.addEventListener(n,g,!1):t.attachEvent("on"+n,f),t[qt]=t[qt]||{},t[qt][l]=f}function Ei(t,n,r,s,l){l=l||n+_(r)+(s?"_"+_(s):"");var f=t[qt]&&t[qt][l];if(!f)return this;!F.touchNative&&F.pointer&&n.indexOf("touch")===0?nu(t,n,f):F.touch&&n==="dblclick"?hu(t,f):"removeEventListener"in t?t.removeEventListener(Si[n]||n,f,!1):t.detachEvent("on"+n,f),t[qt][l]=null}function fe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ki(t){return Ci(t,"wheel",fe),this}function Ge(t){return G(t,"mousedown touchstart dblclick contextmenu",fe),t._leaflet_disable_click=!0,this}function Mt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function de(t){return Mt(t),fe(t),this}function oo(t){if(t.composedPath)return t.composedPath();for(var n=[],r=t.target;r;)n.push(r),r=r.parentNode;return n}function so(t,n){if(!n)return new Z(t.clientX,t.clientY);var r=Pi(n),s=r.boundingClientRect;return new Z((t.clientX-s.left)/r.x-n.clientLeft,(t.clientY-s.top)/r.y-n.clientTop)}var du=F.linux&&F.chrome?window.devicePixelRatio:F.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ao(t){return F.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/du:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Ai(t,n){var r=n.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t}var mu={__proto__:null,on:G,off:ct,stopPropagation:fe,disableScrollPropagation:ki,disableClickPropagation:Ge,preventDefault:Mt,stop:de,getPropagationPath:oo,getMousePosition:so,getWheelDelta:ao,isExternalTarget:Ai,addListener:G,removeListener:ct},uo=at.extend({run:function(t,n,r,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=ce(t),this._offset=n.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=W(this._animate,this),this._step()},_step:function(t){var n=+new Date-this._startTime,r=this._duration*1e3;n<r?this._runFrame(this._easeOut(n/r),t):(this._runFrame(1),this._complete())},_runFrame:function(t,n){var r=this._startPos.add(this._offset.multiplyBy(t));n&&r._round(),_t(this._el,r),this.fire("step")},_complete:function(){E(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),tt=at.extend({options:{crs:xt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,n){n=b(this,n),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),n.maxBounds&&this.setMaxBounds(n.maxBounds),n.zoom!==void 0&&(this._zoom=this._limitZoom(n.zoom)),n.center&&n.zoom!==void 0&&this.setView(j(n.center),n.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ue&&F.any3d&&!F.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),G(this._proxy,eo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,r){if(n=n===void 0?this._zoom:this._limitZoom(n),t=this._limitCenter(j(t),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=u({animate:r.animate},r.zoom),r.pan=u({animate:r.animate,duration:r.duration},r.pan));var s=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,r.zoom):this._tryAnimatedPan(t,r.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,n,r.pan&&r.pan.noMoveStart),this},setZoom:function(t,n){return this._loaded?this.setView(this.getCenter(),t,{zoom:n}):(this._zoom=t,this)},zoomIn:function(t,n){return t=t||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,n)},zoomOut:function(t,n){return t=t||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,n)},setZoomAround:function(t,n,r){var s=this.getZoomScale(n),l=this.getSize().divideBy(2),f=t instanceof Z?t:this.latLngToContainerPoint(t),g=f.subtract(l).multiplyBy(1-1/s),w=this.containerPointToLatLng(l.add(g));return this.setView(w,n,{zoom:r})},_getBoundsCenterZoom:function(t,n){n=n||{},t=t.getBounds?t.getBounds():dt(t);var r=B(n.paddingTopLeft||n.padding||[0,0]),s=B(n.paddingBottomRight||n.padding||[0,0]),l=this.getBoundsZoom(t,!1,r.add(s));if(l=typeof n.maxZoom=="number"?Math.min(n.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var f=s.subtract(r).divideBy(2),g=this.project(t.getSouthWest(),l),w=this.project(t.getNorthEast(),l),x=this.unproject(g.add(w).divideBy(2).add(f),l);return{center:x,zoom:l}},fitBounds:function(t,n){if(t=dt(t),!t.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(t,n);return this.setView(r.center,r.zoom,n)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,n){return this.setView(t,this._zoom,{pan:n})},panBy:function(t,n){if(t=B(t).round(),n=n||{},!t.x&&!t.y)return this.fire("moveend");if(n.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new uo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),n.animate!==!1){K(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,r,n.duration||.25,n.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,n,r){if(r=r||{},r.animate===!1||!F.any3d)return this.setView(t,n,r);this._stop();var s=this.project(this.getCenter()),l=this.project(t),f=this.getSize(),g=this._zoom;t=j(t),n=n===void 0?g:n;var w=Math.max(f.x,f.y),x=w*this.getZoomScale(g,n),M=l.distanceTo(s)||1,A=1.42,$=A*A;function J(pt){var zn=pt?-1:1,nl=pt?x:w,il=x*x-w*w+zn*$*$*M*M,rl=2*nl*$*M,Wi=il/rl,Uo=Math.sqrt(Wi*Wi+1)-Wi,ol=Uo<1e-9?-18:Math.log(Uo);return ol}function Ct(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function Tt(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function Bt(pt){return Ct(pt)/Tt(pt)}var Et=J(0);function Ae(pt){return w*(Tt(Et)/Tt(Et+A*pt))}function ju(pt){return w*(Tt(Et)*Bt(Et+A*pt)-Ct(Et))/$}function Qu(pt){return 1-Math.pow(1-pt,1.5)}var tl=Date.now(),Ho=(J(1)-Et)/A,el=r.duration?1e3*r.duration:1e3*Ho*.8;function Wo(){var pt=(Date.now()-tl)/el,zn=Qu(pt)*Ho;pt<=1?(this._flyToFrame=W(Wo,this),this._move(this.unproject(s.add(l.subtract(s).multiplyBy(ju(zn)/M)),g),this.getScaleZoom(w/Ae(zn),g),{flyTo:!0})):this._move(t,n)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),Wo.call(this),this},flyToBounds:function(t,n){var r=this._getBoundsCenterZoom(t,n);return this.flyTo(r.center,r.zoom,n)},setMaxBounds:function(t){return t=dt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var n=this.options.minZoom;return this.options.minZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var n=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,n){this._enforcingBounds=!0;var r=this.getCenter(),s=this._limitCenter(r,this._zoom,dt(t));return r.equals(s)||this.panTo(s,n),this._enforcingBounds=!1,this},panInside:function(t,n){n=n||{};var r=B(n.paddingTopLeft||n.padding||[0,0]),s=B(n.paddingBottomRight||n.padding||[0,0]),l=this.project(this.getCenter()),f=this.project(t),g=this.getPixelBounds(),w=vt([g.min.add(r),g.max.subtract(s)]),x=w.getSize();if(!w.contains(f)){this._enforcingBounds=!0;var M=f.subtract(w.getCenter()),A=w.extend(f).getSize().subtract(x);l.x+=M.x<0?-A.x:A.x,l.y+=M.y<0?-A.y:A.y,this.panTo(this.unproject(l),n),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),s=n.divideBy(2).round(),l=r.divideBy(2).round(),f=s.subtract(l);return!f.x&&!f.y?this:(t.animate&&t.pan?this.panBy(f):(t.pan&&this._rawPanBy(f),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=c(this._handleGeolocationResponse,this),r=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var n=t.code,r=t.message||(n===1?"permission denied":n===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var n=t.coords.latitude,r=t.coords.longitude,s=new ut(n,r),l=s.toBounds(t.coords.accuracy*2),f=this._locateOptions;if(f.setView){var g=this.getBoundsZoom(l);this.setView(s,f.maxZoom?Math.min(g,f.maxZoom):g)}var w={latlng:s,bounds:l,timestamp:t.timestamp};for(var x in t.coords)typeof t.coords[x]=="number"&&(w[x]=t.coords[x]);this.fire("locationfound",w)}},addHandler:function(t,n){if(!n)return this;var r=this[t]=new n(this);return this._handlers.push(r),this.options[t]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(E(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ft(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,n){var r="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=it("div",r,n||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),n=this.unproject(t.getBottomLeft()),r=this.unproject(t.getTopRight());return new wt(n,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,n,r){t=dt(t),r=B(r||[0,0]);var s=this.getZoom()||0,l=this.getMinZoom(),f=this.getMaxZoom(),g=t.getNorthWest(),w=t.getSouthEast(),x=this.getSize().subtract(r),M=vt(this.project(w,s),this.project(g,s)).getSize(),A=F.any3d?this.options.zoomSnap:1,$=x.x/M.x,J=x.y/M.y,Ct=n?Math.max($,J):Math.min($,J);return s=this.getScaleZoom(Ct,s),A&&(s=Math.round(s/(A/100))*(A/100),s=n?Math.ceil(s/A)*A:Math.floor(s/A)*A),Math.max(l,Math.min(f,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,n){var r=this._getTopLeftPoint(t,n);return new et(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,n){var r=this.options.crs;return n=n===void 0?this._zoom:n,r.scale(t)/r.scale(n)},getScaleZoom:function(t,n){var r=this.options.crs;n=n===void 0?this._zoom:n;var s=r.zoom(t*r.scale(n));return isNaN(s)?1/0:s},project:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.latLngToPoint(j(t),n)},unproject:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.pointToLatLng(B(t),n)},layerPointToLatLng:function(t){var n=B(t).add(this.getPixelOrigin());return this.unproject(n)},latLngToLayerPoint:function(t){var n=this.project(j(t))._round();return n._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(dt(t))},distance:function(t,n){return this.options.crs.distance(j(t),j(n))},containerPointToLayerPoint:function(t){return B(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return B(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var n=this.containerPointToLayerPoint(B(t));return this.layerPointToLatLng(n)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return so(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var n=this._container=no(t);if(n){if(n._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");G(n,"scroll",this._onScroll,this),this._containerId=_(n)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&F.any3d,K(t,"leaflet-container"+(F.touch?" leaflet-touch":"")+(F.retina?" leaflet-retina":"")+(F.ielt9?" leaflet-oldie":"")+(F.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var n=$e(t,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&n!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_t(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(K(t.markerPane,"leaflet-zoom-hide"),K(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,n,r){_t(this._mapPane,new Z(0,0));var s=!this._loaded;this._loaded=!0,n=this._limitZoom(n),this.fire("viewprereset");var l=this._zoom!==n;this._moveStart(l,r)._move(t,n)._moveEnd(l),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,n){return t&&this.fire("zoomstart"),n||this.fire("movestart"),this},_move:function(t,n,r,s){n===void 0&&(n=this._zoom);var l=this._zoom!==n;return this._zoom=n,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),s?r&&r.pinch&&this.fire("zoom",r):((l||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return E(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_t(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[_(this._container)]=this;var n=t?ct:G;n(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&n(window,"resize",this._onResize,this),F.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){E(this._resizeRequest),this._resizeRequest=W(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,n){for(var r=[],s,l=n==="mouseout"||n==="mouseover",f=t.target||t.srcElement,g=!1;f;){if(s=this._targets[_(f)],s&&(n==="click"||n==="preclick")&&this._draggableMoved(s)){g=!0;break}if(s&&s.listens(n,!0)&&(l&&!Ai(f,t)||(r.push(s),l))||f===this._container)break;f=f.parentNode}return!r.length&&!g&&!l&&this.listens(n,!0)&&(r=[this]),r},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var n=t.target||t.srcElement;if(!(!this._loaded||n._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(n))){var r=t.type;r==="mousedown"&&Mi(n),this._fireDOMEvent(t,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,r){if(t.type==="click"){var s=u({},t);s.type="preclick",this._fireDOMEvent(s,s.type,r)}var l=this._findEventTargets(t,n);if(r){for(var f=[],g=0;g<r.length;g++)r[g].listens(n,!0)&&f.push(r[g]);l=f.concat(l)}if(l.length){n==="contextmenu"&&Mt(t);var w=l[0],x={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var M=w.getLatLng&&(!w._radius||w._radius<=10);x.containerPoint=M?this.latLngToContainerPoint(w.getLatLng()):this.mouseEventToContainerPoint(t),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=M?w.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(g=0;g<l.length;g++)if(l[g].fire(n,x,!0),x.originalEvent._stopped||l[g].options.bubblingMouseEvents===!1&&N(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,n=this._handlers.length;t<n;t++)this._handlers[t].disable()},whenReady:function(t,n){return this._loaded?t.call(n||this,{target:this}):this.on("load",t,n),this},_getMapPanePos:function(){return ce(this._mapPane)||new Z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,n){var r=t&&n!==void 0?this._getNewPixelOrigin(t,n):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,n){var r=this.getSize()._divideBy(2);return this.project(t,n)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,n,r){var s=this._getNewPixelOrigin(r,n);return this.project(t,n)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,n,r){var s=this._getNewPixelOrigin(r,n);return vt([this.project(t.getSouthWest(),n)._subtract(s),this.project(t.getNorthWest(),n)._subtract(s),this.project(t.getSouthEast(),n)._subtract(s),this.project(t.getNorthEast(),n)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,n,r){if(!r)return t;var s=this.project(t,n),l=this.getSize().divideBy(2),f=new et(s.subtract(l),s.add(l)),g=this._getBoundsOffset(f,r,n);return Math.abs(g.x)<=1&&Math.abs(g.y)<=1?t:this.unproject(s.add(g),n)},_limitOffset:function(t,n){if(!n)return t;var r=this.getPixelBounds(),s=new et(r.min.add(t),r.max.add(t));return t.add(this._getBoundsOffset(s,n))},_getBoundsOffset:function(t,n,r){var s=vt(this.project(n.getNorthEast(),r),this.project(n.getSouthWest(),r)),l=s.min.subtract(t.min),f=s.max.subtract(t.max),g=this._rebound(l.x,-f.x),w=this._rebound(l.y,-f.y);return new Z(g,w)},_rebound:function(t,n){return t+n>0?Math.round(t-n)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(n))},_limitZoom:function(t){var n=this.getMinZoom(),r=this.getMaxZoom(),s=F.any3d?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(n,Math.min(r,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,n){var r=this._getCenterOffset(t)._trunc();return(n&&n.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,n),!0)},_createAnimProxy:function(){var t=this._proxy=it("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(n){var r=vi,s=this._proxy.style[r];he(this._proxy,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1)),s===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),n=this.getZoom();he(this._proxy,this.project(t,n),this.getZoomScale(n,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,n,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(n-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(n),l=this._getCenterOffset(t)._divideBy(1-1/s);return r.animate!==!0&&!this.getSize().contains(l)?!1:(W(function(){this._moveStart(!0,r.noMoveStart||!1)._animateZoom(t,n,!0)},this),!0)},_animateZoom:function(t,n,r,s){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=n,K(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:n,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function _u(t,n){return new tt(t,n)}var Zt=H.extend({options:{position:"topright"},initialize:function(t){b(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var n=this._map;return n&&n.removeControl(this),this.options.position=t,n&&n.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var n=this._container=this.onAdd(t),r=this.getPosition(),s=t._controlCorners[r];return K(n,"leaflet-control"),r.indexOf("bottom")!==-1?s.insertBefore(n,s.firstChild):s.appendChild(n),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Xe=function(t){return new Zt(t)};tt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},n="leaflet-",r=this._controlContainer=it("div",n+"control-container",this._container);function s(l,f){var g=n+l+" "+n+f;t[l+f]=it("div",g,r)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ft(this._controlCorners[t]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var lo=Zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,n,r,s){return r<s?-1:s<r?1:0}},initialize:function(t,n,r){b(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in n)this._addLayer(n[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Zt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,n){return this._addLayer(t,n),this._map?this._update():this},addOverlay:function(t,n){return this._addLayer(t,n,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var n=this._getLayer(_(t));return n&&this._layers.splice(this._layers.indexOf(n),1),this._map?this._update():this},expand:function(){K(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(K(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",n=this._container=it("div",t),r=this.options.collapsed;n.setAttribute("aria-haspopup",!0),Ge(n),ki(n);var s=this._section=it("section",t+"-list");r&&(this._map.on("click",this.collapse,this),G(n,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=it("a",t+"-toggle",n);l.href="#",l.title="Layers",l.setAttribute("role","button"),G(l,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){Mt(f),this._expandSafely()}},this),r||this.expand(),this._baseLayersList=it("div",t+"-base",s),this._separator=it("div",t+"-separator",s),this._overlaysList=it("div",t+"-overlays",s),n.appendChild(s)},_getLayer:function(t){for(var n=0;n<this._layers.length;n++)if(this._layers[n]&&_(this._layers[n].layer)===t)return this._layers[n]},_addLayer:function(t,n,r){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:n,overlay:r}),this.options.sortLayers&&this._layers.sort(c(function(s,l){return this.options.sortFunction(s.layer,l.layer,s.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;yn(this._baseLayersList),yn(this._overlaysList),this._layerControlInputs=[];var t,n,r,s,l=0;for(r=0;r<this._layers.length;r++)s=this._layers[r],this._addItem(s),n=n||s.overlay,t=t||!s.overlay,l+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var n=this._getLayer(_(t.target)),r=n.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;r&&this._map.fire(r,n)},_createRadioElement:function(t,n){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(n?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=r,s.firstChild},_addItem:function(t){var n=document.createElement("label"),r=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=r):s=this._createRadioElement("leaflet-base-layers_"+_(this),r),this._layerControlInputs.push(s),s.layerId=_(t.layer),G(s,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var f=document.createElement("span");n.appendChild(f),f.appendChild(s),f.appendChild(l);var g=t.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,n,r,s=[],l=[];this._handlingClick=!0;for(var f=t.length-1;f>=0;f--)n=t[f],r=this._getLayer(n.layerId).layer,n.checked?s.push(r):n.checked||l.push(r);for(f=0;f<l.length;f++)this._map.hasLayer(l[f])&&this._map.removeLayer(l[f]);for(f=0;f<s.length;f++)this._map.hasLayer(s[f])||this._map.addLayer(s[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,n,r,s=this._map.getZoom(),l=t.length-1;l>=0;l--)n=t[l],r=this._getLayer(n.layerId).layer,n.disabled=r.options.minZoom!==void 0&&s<r.options.minZoom||r.options.maxZoom!==void 0&&s>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,G(t,"click",Mt),this.expand();var n=this;setTimeout(function(){ct(t,"click",Mt),n._preventClick=!1})}}),pu=function(t,n,r){return new lo(t,n,r)},Di=Zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var n="leaflet-control-zoom",r=it("div",n+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,n+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,n+"-out",r,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,n,r,s,l){var f=it("a",r,s);return f.innerHTML=t,f.href="#",f.title=n,f.setAttribute("role","button"),f.setAttribute("aria-label",n),Ge(f),G(f,"click",de),G(f,"click",l,this),G(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var t=this._map,n="leaflet-disabled";mt(this._zoomInButton,n),mt(this._zoomOutButton,n),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(K(this._zoomOutButton,n),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(K(this._zoomInButton,n),this._zoomInButton.setAttribute("aria-disabled","true"))}});tt.mergeOptions({zoomControl:!0}),tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Di,this.addControl(this.zoomControl))});var gu=function(t){return new Di(t)},ho=Zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var n="leaflet-control-scale",r=it("div",n),s=this.options;return this._addScales(s,n+"-line",r),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),r},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,n,r){t.metric&&(this._mScale=it("div",n,r)),t.imperial&&(this._iScale=it("div",n,r))},_update:function(){var t=this._map,n=t.getSize().y/2,r=t.distance(t.containerPointToLatLng([0,n]),t.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(r)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var n=this._getRoundNum(t),r=n<1e3?n+" m":n/1e3+" km";this._updateScale(this._mScale,r,n/t)},_updateImperial:function(t){var n=t*3.2808399,r,s,l;n>5280?(r=n/5280,s=this._getRoundNum(r),this._updateScale(this._iScale,s+" mi",s/r)):(l=this._getRoundNum(n),this._updateScale(this._iScale,l+" ft",l/n))},_updateScale:function(t,n,r){t.style.width=Math.round(this.options.maxWidth*r)+"px",t.innerHTML=n},_getRoundNum:function(t){var n=Math.pow(10,(Math.floor(t)+"").length-1),r=t/n;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,n*r}}),vu=function(t){return new ho(t)},yu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ii=Zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(F.inlineSvg?yu+" ":"")+"Leaflet</a>"},initialize:function(t){b(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=it("div","leaflet-control-attribution"),Ge(this._container);for(var n in t._layers)t._layers[n].getAttribution&&this.addAttribution(t._layers[n].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var n in this._attributions)this._attributions[n]&&t.push(n);var r=[];this.options.prefix&&r.push(this.options.prefix),t.length&&r.push(t.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});tt.mergeOptions({attributionControl:!0}),tt.addInitHook(function(){this.options.attributionControl&&new Ii().addTo(this)});var wu=function(t){return new Ii(t)};Zt.Layers=lo,Zt.Zoom=Di,Zt.Scale=ho,Zt.Attribution=Ii,Xe.layers=pu,Xe.zoom=gu,Xe.scale=vu,Xe.attribution=wu;var Vt=H.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vt.addTo=function(t,n){return t.addHandler(n,this),this};var xu={Events:lt},co=F.touch?"touchstart mousedown":"mousedown",se=at.extend({options:{clickTolerance:3},initialize:function(t,n,r,s){b(this,s),this._element=t,this._dragStartTarget=n||t,this._preventOutline=r},enable:function(){this._enabled||(G(this._dragStartTarget,co,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(se._dragging===this&&this.finishDrag(!0),ct(this._dragStartTarget,co,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!yi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){se._dragging===this&&this.finishDrag();return}if(!(se._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(se._dragging=this,this._preventOutline&&Mi(this._element),Ti(),qe(),!this._moving)){this.fire("down");var n=t.touches?t.touches[0]:t,r=io(this._element);this._startPoint=new Z(n.clientX,n.clientY),this._startPos=ce(this._element),this._parentScale=Pi(r);var s=t.type==="mousedown";G(document,s?"mousemove":"touchmove",this._onMove,this),G(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var n=t.touches&&t.touches.length===1?t.touches[0]:t,r=new Z(n.clientX,n.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,Mt(t),this._moved||(this.fire("dragstart"),this._moved=!0,K(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),K(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_t(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ct(document,"mousemove touchmove",this._onMove,this),ct(document,"mouseup touchend touchcancel",this._onUp,this),bi(),Ve();var n=this._moved&&this._moving;this._moving=!1,se._dragging=!1,n&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function fo(t,n,r){var s,l=[1,4,2,8],f,g,w,x,M,A,$,J;for(f=0,A=t.length;f<A;f++)t[f]._code=me(t[f],n);for(w=0;w<4;w++){for($=l[w],s=[],f=0,A=t.length,g=A-1;f<A;g=f++)x=t[f],M=t[g],x._code&$?M._code&$||(J=Ln(M,x,$,n,r),J._code=me(J,n),s.push(J)):(M._code&$&&(J=Ln(M,x,$,n,r),J._code=me(J,n),s.push(J)),s.push(x));t=s}return t}function mo(t,n){var r,s,l,f,g,w,x,M,A;if(!t||t.length===0)throw new Error("latlngs not passed");It(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var $=j([0,0]),J=dt(t),Ct=J.getNorthWest().distanceTo(J.getSouthWest())*J.getNorthEast().distanceTo(J.getNorthWest());Ct<1700&&($=Bi(t));var Tt=t.length,Bt=[];for(r=0;r<Tt;r++){var Et=j(t[r]);Bt.push(n.project(j([Et.lat-$.lat,Et.lng-$.lng])))}for(w=x=M=0,r=0,s=Tt-1;r<Tt;s=r++)l=Bt[r],f=Bt[s],g=l.y*f.x-f.y*l.x,x+=(l.x+f.x)*g,M+=(l.y+f.y)*g,w+=g*3;w===0?A=Bt[0]:A=[x/w,M/w];var Ae=n.unproject(B(A));return j([Ae.lat+$.lat,Ae.lng+$.lng])}function Bi(t){for(var n=0,r=0,s=0,l=0;l<t.length;l++){var f=j(t[l]);n+=f.lat,r+=f.lng,s++}return j([n/s,r/s])}var Tu={__proto__:null,clipPolygon:fo,polygonCenter:mo,centroid:Bi};function _o(t,n){if(!n||!t.length)return t.slice();var r=n*n;return t=Mu(t,r),t=Lu(t,r),t}function po(t,n,r){return Math.sqrt(Ke(t,n,r,!0))}function bu(t,n,r){return Ke(t,n,r)}function Lu(t,n){var r=t.length,s=typeof Uint8Array<"u"?Uint8Array:Array,l=new s(r);l[0]=l[r-1]=1,zi(t,l,n,0,r-1);var f,g=[];for(f=0;f<r;f++)l[f]&&g.push(t[f]);return g}function zi(t,n,r,s,l){var f=0,g,w,x;for(w=s+1;w<=l-1;w++)x=Ke(t[w],t[s],t[l],!0),x>f&&(g=w,f=x);f>r&&(n[g]=1,zi(t,n,r,s,g),zi(t,n,r,g,l))}function Mu(t,n){for(var r=[t[0]],s=1,l=0,f=t.length;s<f;s++)Pu(t[s],t[l])>n&&(r.push(t[s]),l=s);return l<f-1&&r.push(t[f-1]),r}var go;function vo(t,n,r,s,l){var f=s?go:me(t,r),g=me(n,r),w,x,M;for(go=g;;){if(!(f|g))return[t,n];if(f&g)return!1;w=f||g,x=Ln(t,n,w,r,l),M=me(x,r),w===f?(t=x,f=M):(n=x,g=M)}}function Ln(t,n,r,s,l){var f=n.x-t.x,g=n.y-t.y,w=s.min,x=s.max,M,A;return r&8?(M=t.x+f*(x.y-t.y)/g,A=x.y):r&4?(M=t.x+f*(w.y-t.y)/g,A=w.y):r&2?(M=x.x,A=t.y+g*(x.x-t.x)/f):r&1&&(M=w.x,A=t.y+g*(w.x-t.x)/f),new Z(M,A,l)}function me(t,n){var r=0;return t.x<n.min.x?r|=1:t.x>n.max.x&&(r|=2),t.y<n.min.y?r|=4:t.y>n.max.y&&(r|=8),r}function Pu(t,n){var r=n.x-t.x,s=n.y-t.y;return r*r+s*s}function Ke(t,n,r,s){var l=n.x,f=n.y,g=r.x-l,w=r.y-f,x=g*g+w*w,M;return x>0&&(M=((t.x-l)*g+(t.y-f)*w)/x,M>1?(l=r.x,f=r.y):M>0&&(l+=g*M,f+=w*M)),g=t.x-l,w=t.y-f,s?g*g+w*w:new Z(l,f)}function It(t){return!I(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function yo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),It(t)}function wo(t,n){var r,s,l,f,g,w,x,M;if(!t||t.length===0)throw new Error("latlngs not passed");It(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var A=j([0,0]),$=dt(t),J=$.getNorthWest().distanceTo($.getSouthWest())*$.getNorthEast().distanceTo($.getNorthWest());J<1700&&(A=Bi(t));var Ct=t.length,Tt=[];for(r=0;r<Ct;r++){var Bt=j(t[r]);Tt.push(n.project(j([Bt.lat-A.lat,Bt.lng-A.lng])))}for(r=0,s=0;r<Ct-1;r++)s+=Tt[r].distanceTo(Tt[r+1])/2;if(s===0)M=Tt[0];else for(r=0,f=0;r<Ct-1;r++)if(g=Tt[r],w=Tt[r+1],l=g.distanceTo(w),f+=l,f>s){x=(f-s)/l,M=[w.x-x*(w.x-g.x),w.y-x*(w.y-g.y)];break}var Et=n.unproject(B(M));return j([Et.lat+A.lat,Et.lng+A.lng])}var Su={__proto__:null,simplify:_o,pointToSegmentDistance:po,closestPointOnSegment:bu,clipSegment:vo,_getEdgeIntersection:Ln,_getBitCode:me,_sqClosestPointOnSegment:Ke,isFlat:It,_flat:yo,polylineCenter:wo},Oi={project:function(t){return new Z(t.lng,t.lat)},unproject:function(t){return new ut(t.y,t.x)},bounds:new et([-180,-90],[180,90])},Ni={R:6378137,R_MINOR:6356752314245179e-9,bounds:new et([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var n=Math.PI/180,r=this.R,s=t.lat*n,l=this.R_MINOR/r,f=Math.sqrt(1-l*l),g=f*Math.sin(s),w=Math.tan(Math.PI/4-s/2)/Math.pow((1-g)/(1+g),f/2);return s=-r*Math.log(Math.max(w,1e-10)),new Z(t.lng*n*r,s)},unproject:function(t){for(var n=180/Math.PI,r=this.R,s=this.R_MINOR/r,l=Math.sqrt(1-s*s),f=Math.exp(-t.y/r),g=Math.PI/2-2*Math.atan(f),w=0,x=.1,M;w<15&&Math.abs(x)>1e-7;w++)M=l*Math.sin(g),M=Math.pow((1-M)/(1+M),l/2),x=Math.PI/2-2*Math.atan(f*M)-g,g+=x;return new ut(g*n,t.x*n/r)}},Cu={__proto__:null,LonLat:Oi,Mercator:Ni,SphericalMercator:X},Eu=u({},Ut,{code:"EPSG:3395",projection:Ni,transformation:(function(){var t=.5/(Math.PI*Ni.R);return P(t,.5,-t,.5)})()}),xo=u({},Ut,{code:"EPSG:4326",projection:Oi,transformation:P(1/180,1,-1/180,.5)}),ku=u({},Ot,{projection:Oi,transformation:P(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,n){var r=n.lng-t.lng,s=n.lat-t.lat;return Math.sqrt(r*r+s*s)},infinite:!0});Ot.Earth=Ut,Ot.EPSG3395=Eu,Ot.EPSG3857=xt,Ot.EPSG900913=ht,Ot.EPSG4326=xo,Ot.Simple=ku;var Ft=at.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[_(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[_(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var n=t.target;if(n.hasLayer(this)){if(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents){var r=this.getEvents();n.on(r,this),this.once("remove",function(){n.off(r,this)},this)}this.onAdd(n),this.fire("add"),n.fire("layeradd",{layer:this})}}});tt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var n=_(t);return this._layers[n]?this:(this._layers[n]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var n=_(t);return this._layers[n]?(this._loaded&&t.onRemove(this),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return _(t)in this._layers},eachLayer:function(t,n){for(var r in this._layers)t.call(n,this._layers[r]);return this},_addLayers:function(t){t=t?I(t)?t:[t]:[];for(var n=0,r=t.length;n<r;n++)this.addLayer(t[n])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[_(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var n=_(t);this._zoomBoundLayers[n]&&(delete this._zoomBoundLayers[n],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,n=-1/0,r=this._getZoomSpan();for(var s in this._zoomBoundLayers){var l=this._zoomBoundLayers[s].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),n=l.maxZoom===void 0?n:Math.max(n,l.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=t===1/0?void 0:t,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pe=Ft.extend({initialize:function(t,n){b(this,n),this._layers={};var r,s;if(t)for(r=0,s=t.length;r<s;r++)this.addLayer(t[r])},addLayer:function(t){var n=this.getLayerId(t);return this._layers[n]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var n=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[n]&&this._map.removeLayer(this._layers[n]),delete this._layers[n],this},hasLayer:function(t){var n=typeof t=="number"?t:this.getLayerId(t);return n in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var n=Array.prototype.slice.call(arguments,1),r,s;for(r in this._layers)s=this._layers[r],s[t]&&s[t].apply(s,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,n){for(var r in this._layers)t.call(n,this._layers[r]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return _(t)}}),Au=function(t,n){return new Pe(t,n)},Kt=Pe.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pe.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pe.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new wt;for(var n in this._layers){var r=this._layers[n];t.extend(r.getBounds?r.getBounds():r.getLatLng())}return t}}),Du=function(t,n){return new Kt(t,n)},Se=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){b(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,n){var r=this._getIconUrl(t);if(!r){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(r,n&&n.tagName==="IMG"?n:null);return this._setIconStyles(s,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(t,n){var r=this.options,s=r[n+"Size"];typeof s=="number"&&(s=[s,s]);var l=B(s),f=B(n==="shadow"&&r.shadowAnchor||r.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+n+" "+(r.className||""),f&&(t.style.marginLeft=-f.x+"px",t.style.marginTop=-f.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,n){return n=n||document.createElement("img"),n.src=t,n},_getIconUrl:function(t){return F.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Iu(t){return new Se(t)}var Je=Se.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Je.imagePath!="string"&&(Je.imagePath=this._detectIconPath()),(this.options.imagePath||Je.imagePath)+Se.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var n=function(r,s,l){var f=s.exec(r);return f&&f[l]};return t=n(t,/^url\((['"])?(.+)\1\)$/,2),t&&n(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=it("div","leaflet-default-icon-path",document.body),n=$e(t,"background-image")||$e(t,"backgroundImage");if(document.body.removeChild(t),n=this._stripUrl(n),n)return n;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-11-1):""}}),To=Vt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new se(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),K(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var n=this._marker,r=n._map,s=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,f=ce(n._icon),g=r.getPixelBounds(),w=r.getPixelOrigin(),x=vt(g.min._subtract(w).add(l),g.max._subtract(w).subtract(l));if(!x.contains(f)){var M=B((Math.max(x.max.x,f.x)-x.max.x)/(g.max.x-x.max.x)-(Math.min(x.min.x,f.x)-x.min.x)/(g.min.x-x.min.x),(Math.max(x.max.y,f.y)-x.max.y)/(g.max.y-x.max.y)-(Math.min(x.min.y,f.y)-x.min.y)/(g.min.y-x.min.y)).multiplyBy(s);r.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),_t(n._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=W(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(E(this._panRequest),this._panRequest=W(this._adjustPan.bind(this,t)))},_onDrag:function(t){var n=this._marker,r=n._shadow,s=ce(n._icon),l=n._map.layerPointToLatLng(s);r&&_t(r,s),n._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,n.fire("move",t).fire("drag",t)},_onDragEnd:function(t){E(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Mn=Ft.extend({options:{icon:new Je,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,n){b(this,n),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var n=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=t.icon.createIcon(this._icon),s=!1;r!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(r.title=t.title),r.tagName==="IMG"&&(r.alt=t.alt||"")),K(r,n),t.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&G(r,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),f=!1;l!==this._shadow&&(this._removeShadow(),f=!0),l&&(K(l,n),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&f&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&_t(this._icon,t),this._shadow&&_t(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(n)},_initInteraction:function(){if(this.options.interactive&&(K(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),To)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new To(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Dt(this._icon,t),this._shadow&&Dt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var n=this.options.icon.options,r=n.iconSize?B(n.iconSize):B(0,0),s=n.iconAnchor?B(n.iconAnchor):B(0,0);t.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:r.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Bu(t,n){return new Mn(t,n)}var ae=Ft.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return b(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pn=ae.extend({options:{fill:!0,radius:10},initialize:function(t,n){b(this,n),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var n=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var n=t&&t.radius||this._radius;return ae.prototype.setStyle.call(this,t),this.setRadius(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,n=this._radiusY||t,r=this._clickTolerance(),s=[t+r,n+r];this._pxBounds=new et(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zu(t,n){return new Pn(t,n)}var Zi=Pn.extend({initialize:function(t,n,r){if(typeof n=="number"&&(n=u({},r,{radius:n})),b(this,n),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new wt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ae.prototype.setStyle,_project:function(){var t=this._latlng.lng,n=this._latlng.lat,r=this._map,s=r.options.crs;if(s.distance===Ut.distance){var l=Math.PI/180,f=this._mRadius/Ut.R/l,g=r.project([n+f,t]),w=r.project([n-f,t]),x=g.add(w).divideBy(2),M=r.unproject(x).lat,A=Math.acos((Math.cos(f*l)-Math.sin(n*l)*Math.sin(M*l))/(Math.cos(n*l)*Math.cos(M*l)))/l;(isNaN(A)||A===0)&&(A=f/Math.cos(Math.PI/180*n)),this._point=x.subtract(r.getPixelOrigin()),this._radius=isNaN(A)?0:x.x-r.project([M,t-A]).x,this._radiusY=x.y-g.y}else{var $=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint($).x}this._updateBounds()}});function Ou(t,n,r){return new Zi(t,n,r)}var Jt=ae.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,n){b(this,n),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var n=1/0,r=null,s=Ke,l,f,g=0,w=this._parts.length;g<w;g++)for(var x=this._parts[g],M=1,A=x.length;M<A;M++){l=x[M-1],f=x[M];var $=s(t,l,f,!0);$<n&&(n=$,r=s(t,l,f))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,n){return n=n||this._defaultShape(),t=j(t),n.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new wt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return It(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var n=[],r=It(t),s=0,l=t.length;s<l;s++)r?(n[s]=j(t[s]),this._bounds.extend(n[s])):n[s]=this._convertLatLngs(t[s]);return n},_project:function(){var t=new et;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),n=new Z(t,t);this._rawPxBounds&&(this._pxBounds=new et([this._rawPxBounds.min.subtract(n),this._rawPxBounds.max.add(n)]))},_projectLatlngs:function(t,n,r){var s=t[0]instanceof ut,l=t.length,f,g;if(s){for(g=[],f=0;f<l;f++)g[f]=this._map.latLngToLayerPoint(t[f]),r.extend(g[f]);n.push(g)}else for(f=0;f<l;f++)this._projectLatlngs(t[f],n,r)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var n=this._parts,r,s,l,f,g,w,x;for(r=0,l=0,f=this._rings.length;r<f;r++)for(x=this._rings[r],s=0,g=x.length;s<g-1;s++)w=vo(x[s],x[s+1],t,s,!0),w&&(n[l]=n[l]||[],n[l].push(w[0]),(w[1]!==x[s+1]||s===g-2)&&(n[l].push(w[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,n=this.options.smoothFactor,r=0,s=t.length;r<s;r++)t[r]=_o(t[r],n)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,n){var r,s,l,f,g,w,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,f=this._parts.length;r<f;r++)for(w=this._parts[r],s=0,g=w.length,l=g-1;s<g;l=s++)if(!(!n&&s===0)&&po(t,w[l],w[s])<=x)return!0;return!1}});function Nu(t,n){return new Jt(t,n)}Jt._flat=yo;var Ce=Jt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var n=Jt.prototype._convertLatLngs.call(this,t),r=n.length;return r>=2&&n[0]instanceof ut&&n[0].equals(n[r-1])&&n.pop(),n},_setLatLngs:function(t){Jt.prototype._setLatLngs.call(this,t),It(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return It(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,n=this.options.weight,r=new Z(n,n);if(t=new et(t.min.subtract(r),t.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,l=this._rings.length,f;s<l;s++)f=fo(this._rings[s],t,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var n=!1,r,s,l,f,g,w,x,M;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,x=this._parts.length;f<x;f++)for(r=this._parts[f],g=0,M=r.length,w=M-1;g<M;w=g++)s=r[g],l=r[w],s.y>t.y!=l.y>t.y&&t.x<(l.x-s.x)*(t.y-s.y)/(l.y-s.y)+s.x&&(n=!n);return n||Jt.prototype._containsPoint.call(this,t,!0)}});function Zu(t,n){return new Ce(t,n)}var jt=Kt.extend({initialize:function(t,n){b(this,n),this._layers={},t&&this.addData(t)},addData:function(t){var n=I(t)?t:t.features,r,s,l;if(n){for(r=0,s=n.length;r<s;r++)l=n[r],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var f=this.options;if(f.filter&&!f.filter(t))return this;var g=Sn(t,f);return g?(g.feature=kn(t),g.defaultOptions=g.options,this.resetStyle(g),f.onEachFeature&&f.onEachFeature(t,g),this.addLayer(g)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(n){this._setLayerStyle(n,t)},this)},_setLayerStyle:function(t,n){t.setStyle&&(typeof n=="function"&&(n=n(t.feature)),t.setStyle(n))}});function Sn(t,n){var r=t.type==="Feature"?t.geometry:t,s=r?r.coordinates:null,l=[],f=n&&n.pointToLayer,g=n&&n.coordsToLatLng||Fi,w,x,M,A;if(!s&&!r)return null;switch(r.type){case"Point":return w=g(s),bo(f,t,w,n);case"MultiPoint":for(M=0,A=s.length;M<A;M++)w=g(s[M]),l.push(bo(f,t,w,n));return new Kt(l);case"LineString":case"MultiLineString":return x=Cn(s,r.type==="LineString"?0:1,g),new Jt(x,n);case"Polygon":case"MultiPolygon":return x=Cn(s,r.type==="Polygon"?1:2,g),new Ce(x,n);case"GeometryCollection":for(M=0,A=r.geometries.length;M<A;M++){var $=Sn({geometry:r.geometries[M],type:"Feature",properties:t.properties},n);$&&l.push($)}return new Kt(l);case"FeatureCollection":for(M=0,A=r.features.length;M<A;M++){var J=Sn(r.features[M],n);J&&l.push(J)}return new Kt(l);default:throw new Error("Invalid GeoJSON object.")}}function bo(t,n,r,s){return t?t(n,r):new Mn(r,s&&s.markersInheritOptions&&s)}function Fi(t){return new ut(t[1],t[0],t[2])}function Cn(t,n,r){for(var s=[],l=0,f=t.length,g;l<f;l++)g=n?Cn(t[l],n-1,r):(r||Fi)(t[l]),s.push(g);return s}function Ri(t,n){return t=j(t),t.alt!==void 0?[y(t.lng,n),y(t.lat,n),y(t.alt,n)]:[y(t.lng,n),y(t.lat,n)]}function En(t,n,r,s){for(var l=[],f=0,g=t.length;f<g;f++)l.push(n?En(t[f],It(t[f])?0:n-1,r,s):Ri(t[f],s));return!n&&r&&l.length>0&&l.push(l[0].slice()),l}function Ee(t,n){return t.feature?u({},t.feature,{geometry:n}):kn(n)}function kn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Hi={toGeoJSON:function(t){return Ee(this,{type:"Point",coordinates:Ri(this.getLatLng(),t)})}};Mn.include(Hi),Zi.include(Hi),Pn.include(Hi),Jt.include({toGeoJSON:function(t){var n=!It(this._latlngs),r=En(this._latlngs,n?1:0,!1,t);return Ee(this,{type:(n?"Multi":"")+"LineString",coordinates:r})}}),Ce.include({toGeoJSON:function(t){var n=!It(this._latlngs),r=n&&!It(this._latlngs[0]),s=En(this._latlngs,r?2:n?1:0,!0,t);return n||(s=[s]),Ee(this,{type:(r?"Multi":"")+"Polygon",coordinates:s})}}),Pe.include({toMultiPoint:function(t){var n=[];return this.eachLayer(function(r){n.push(r.toGeoJSON(t).geometry.coordinates)}),Ee(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(t){var n=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(n==="MultiPoint")return this.toMultiPoint(t);var r=n==="GeometryCollection",s=[];return this.eachLayer(function(l){if(l.toGeoJSON){var f=l.toGeoJSON(t);if(r)s.push(f.geometry);else{var g=kn(f);g.type==="FeatureCollection"?s.push.apply(s,g.features):s.push(g)}}}),r?Ee(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function Lo(t,n){return new jt(t,n)}var Fu=Lo,An=Ft.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,n,r){this._url=t,this._bounds=dt(n),b(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(K(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Le(this._image),this},bringToBack:function(){return this._map&&Me(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=dt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",n=this._image=t?this._url:it("img");if(K(n,"leaflet-image-layer"),this._zoomAnimated&&K(n,"leaflet-zoom-animated"),this.options.className&&K(n,this.options.className),n.onselectstart=p,n.onmousemove=p,n.onload=c(this.fire,this,"load"),n.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=n.src;return}n.src=this._url,n.alt=this.options.alt},_animateZoom:function(t){var n=this._map.getZoomScale(t.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;he(this._image,r,n)},_reset:function(){var t=this._image,n=new et(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=n.getSize();_t(t,n.min),t.style.width=r.x+"px",t.style.height=r.y+"px"},_updateOpacity:function(){Dt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Ru=function(t,n,r){return new An(t,n,r)},Mo=An.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",n=this._image=t?this._url:it("video");if(K(n,"leaflet-image-layer"),this._zoomAnimated&&K(n,"leaflet-zoom-animated"),this.options.className&&K(n,this.options.className),n.onselectstart=p,n.onmousemove=p,n.onloadeddata=c(this.fire,this,"load"),t){for(var r=n.getElementsByTagName("source"),s=[],l=0;l<r.length;l++)s.push(r[l].src);this._url=r.length>0?s:[n.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(n.style,"objectFit")&&(n.style.objectFit="fill"),n.autoplay=!!this.options.autoplay,n.loop=!!this.options.loop,n.muted=!!this.options.muted,n.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var g=it("source");g.src=this._url[f],n.appendChild(g)}}});function Hu(t,n,r){return new Mo(t,n,r)}var Po=An.extend({_initImage:function(){var t=this._image=this._url;K(t,"leaflet-image-layer"),this._zoomAnimated&&K(t,"leaflet-zoom-animated"),this.options.className&&K(t,this.options.className),t.onselectstart=p,t.onmousemove=p}});function Wu(t,n,r){return new Po(t,n,r)}var Yt=Ft.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,n){t&&(t instanceof ut||I(t))?(this._latlng=j(t),b(this,n)):(b(this,t),this._source=n),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Dt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Dt(this._container,1),this.bringToFront(),this.options.interactive&&(K(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Dt(this._container,0),this._removeTimeout=setTimeout(c(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Le(this._container),this},bringToBack:function(){return this._map&&Me(this._container),this},_prepareOpen:function(t){var n=this._source;if(!n._map)return!1;if(n instanceof Kt){n=null;var r=this._source._layers;for(var s in r)if(r[s]._map){n=r[s];break}if(!n)return!1;this._source=n}if(!t)if(n.getCenter)t=n.getCenter();else if(n.getLatLng)t=n.getLatLng();else if(n.getBounds)t=n.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,n=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof n=="string")t.innerHTML=n;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(n)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),n=B(this.options.offset),r=this._getAnchor();this._zoomAnimated?_t(this._container,t.add(r)):n=n.add(t).add(r);var s=this._containerBottom=-n.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=s+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});tt.include({_initOverlay:function(t,n,r,s){var l=n;return l instanceof t||(l=new t(s).setContent(n)),r&&l.setLatLng(r),l}}),Ft.include({_initOverlay:function(t,n,r,s){var l=r;return l instanceof t?(b(l,s),l._source=this):(l=n&&!s?n:new t(s,this),l.setContent(r)),l}});var Dn=Yt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Yt.prototype.openOn.call(this,t)},onAdd:function(t){Yt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ae||this._source.on("preclick",fe))},onRemove:function(t){Yt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ae||this._source.off("preclick",fe))},getEvents:function(){var t=Yt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",n=this._container=it("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=it("div",t+"-content-wrapper",n);if(this._contentNode=it("div",t+"-content",r),Ge(n),ki(this._contentNode),G(n,"contextmenu",fe),this._tipContainer=it("div",t+"-tip-container",n),this._tip=it("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=it("a",t+"-close-button",n);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',G(s,"click",function(l){Mt(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,n=t.style;n.width="",n.whiteSpace="nowrap";var r=t.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),n.width=r+1+"px",n.whiteSpace="",n.height="";var s=t.offsetHeight,l=this.options.maxHeight,f="leaflet-popup-scrolled";l&&s>l?(n.height=l+"px",K(t,f)):mt(t,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),r=this._getAnchor();_t(this._container,n.add(r))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,n=parseInt($e(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+n,s=this._containerWidth,l=new Z(this._containerLeft,-r-this._containerBottom);l._add(ce(this._container));var f=t.layerPointToContainerPoint(l),g=B(this.options.autoPanPadding),w=B(this.options.autoPanPaddingTopLeft||g),x=B(this.options.autoPanPaddingBottomRight||g),M=t.getSize(),A=0,$=0;f.x+s+x.x>M.x&&(A=f.x+s-M.x+x.x),f.x-A-w.x<0&&(A=f.x-w.x),f.y+r+x.y>M.y&&($=f.y+r-M.y+x.y),f.y-$-w.y<0&&($=f.y-w.y),(A||$)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([A,$]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Uu=function(t,n){return new Dn(t,n)};tt.mergeOptions({closePopupOnClick:!0}),tt.include({openPopup:function(t,n,r){return this._initOverlay(Dn,t,n,r).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ft.include({bindPopup:function(t,n){return this._popup=this._initOverlay(Dn,this._popup,t,n),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Kt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){de(t);var n=t.layer||t.target;if(this._popup._source===n&&!(n instanceof ae)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=n,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var In=Yt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Yt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Yt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Yt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",n=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=it("div",n),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var n,r,s=this._map,l=this._container,f=s.latLngToContainerPoint(s.getCenter()),g=s.layerPointToContainerPoint(t),w=this.options.direction,x=l.offsetWidth,M=l.offsetHeight,A=B(this.options.offset),$=this._getAnchor();w==="top"?(n=x/2,r=M):w==="bottom"?(n=x/2,r=0):w==="center"?(n=x/2,r=M/2):w==="right"?(n=0,r=M/2):w==="left"?(n=x,r=M/2):g.x<f.x?(w="right",n=0,r=M/2):(w="left",n=x+(A.x+$.x)*2,r=M/2),t=t.subtract(B(n,r,!0)).add(A).add($),mt(l,"leaflet-tooltip-right"),mt(l,"leaflet-tooltip-left"),mt(l,"leaflet-tooltip-top"),mt(l,"leaflet-tooltip-bottom"),K(l,"leaflet-tooltip-"+w),_t(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Dt(this._container,t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(n)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),$u=function(t,n){return new In(t,n)};tt.include({openTooltip:function(t,n,r){return this._initOverlay(In,t,n,r).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ft.include({bindTooltip:function(t,n){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(In,this._tooltip,t,n),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var n=t?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip,this._map?this._addFocusListeners():r.add=this._addFocusListeners),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[n](r),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Kt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var n=typeof t.getElement=="function"&&t.getElement();n&&(G(n,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),G(n,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var n=typeof t.getElement=="function"&&t.getElement();n&&n.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var n=this;this._map.once("moveend",function(){n._openOnceFlag=!1,n._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var n=t.latlng,r,s;this._tooltip.options.sticky&&t.originalEvent&&(r=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(r),n=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(n)}});var So=Se.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var n=t&&t.tagName==="DIV"?t:document.createElement("div"),r=this.options;if(r.html instanceof Element?(yn(n),n.appendChild(r.html)):n.innerHTML=r.html!==!1?r.html:"",r.bgPos){var s=B(r.bgPos);n.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});function qu(t){return new So(t)}Se.Default=Je;var je=Ft.extend({options:{tileSize:256,opacity:1,updateWhenIdle:F.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){b(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ft(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Me(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Z?t:new Z(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var n=this.getPane().children,r=-t(-1/0,1/0),s=0,l=n.length,f;s<l;s++)f=n[s].style.zIndex,n[s]!==this._container&&f&&(r=t(r,+f));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!F.ielt9){Dt(this._container,this.options.opacity);var t=+new Date,n=!1,r=!1;for(var s in this._tiles){var l=this._tiles[s];if(!(!l.current||!l.loaded)){var f=Math.min(1,(t-l.loaded)/200);Dt(l.el,f),f<1?n=!0:(l.active?r=!0:this._onOpaqueTile(l),l.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),n&&(E(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=it("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,n=this.options.maxZoom;if(t!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===t?(this._levels[r].el.style.zIndex=n-Math.abs(t-r),this._onUpdateLevel(r)):(ft(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var s=this._levels[t],l=this._map;return s||(s=this._levels[t]={},s.el=it("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=n,s.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,l.getCenter(),l.getZoom()),p(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var t,n,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var s=n.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var n in this._tiles)this._tiles[n].coords.z===t&&this._removeTile(n)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ft(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,n,r,s){var l=Math.floor(t/2),f=Math.floor(n/2),g=r-1,w=new Z(+l,+f);w.z=+g;var x=this._tileCoordsToKey(w),M=this._tiles[x];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),g>s?this._retainParent(l,f,g,s):!1)},_retainChildren:function(t,n,r,s){for(var l=2*t;l<2*t+2;l++)for(var f=2*n;f<2*n+2;f++){var g=new Z(l,f);g.z=r+1;var w=this._tileCoordsToKey(g),x=this._tiles[w];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);r+1<s&&this._retainChildren(l,f,r+1,s)}},_resetView:function(t){var n=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),n,n)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var n=this.options;return n.minNativeZoom!==void 0&&t<n.minNativeZoom?n.minNativeZoom:n.maxNativeZoom!==void 0&&n.maxNativeZoom<t?n.maxNativeZoom:t},_setView:function(t,n,r,s){var l=Math.round(n);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var f=this.options.updateWhenZooming&&l!==this._tileZoom;(!s||f)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(t,n)},_setZoomTransforms:function(t,n){for(var r in this._levels)this._setZoomTransform(this._levels[r],t,n)},_setZoomTransform:function(t,n,r){var s=this._map.getZoomScale(r,t.zoom),l=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(n,r)).round();F.any3d?he(t.el,l,s):_t(t.el,l)},_resetGrid:function(){var t=this._map,n=t.options.crs,r=this._tileSize=this.getTileSize(),s=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,n.wrapLng[0]],s).x/r.x),Math.ceil(t.project([0,n.wrapLng[1]],s).x/r.y)],this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([n.wrapLat[0],0],s).y/r.x),Math.ceil(t.project([n.wrapLat[1],0],s).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var n=this._map,r=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),s=n.getZoomScale(r,this._tileZoom),l=n.project(t,this._tileZoom).floor(),f=n.getSize().divideBy(s*2);return new et(l.subtract(f),l.add(f))},_update:function(t){var n=this._map;if(n){var r=this._clampZoom(n.getZoom());if(t===void 0&&(t=n.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(s),f=l.getCenter(),g=[],w=this.options.keepBuffer,x=new et(l.getBottomLeft().subtract([w,-w]),l.getTopRight().add([w,-w]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var A=this._tiles[M].coords;(A.z!==this._tileZoom||!x.contains(new Z(A.x,A.y)))&&(this._tiles[M].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(t,r);return}for(var $=l.min.y;$<=l.max.y;$++)for(var J=l.min.x;J<=l.max.x;J++){var Ct=new Z(J,$);if(Ct.z=this._tileZoom,!!this._isValidTile(Ct)){var Tt=this._tiles[this._tileCoordsToKey(Ct)];Tt?Tt.current=!0:g.push(Ct)}}if(g.sort(function(Et,Ae){return Et.distanceTo(f)-Ae.distanceTo(f)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bt=document.createDocumentFragment();for(J=0;J<g.length;J++)this._addTile(g[J],Bt);this._level.el.appendChild(Bt)}}}},_isValidTile:function(t){var n=this._map.options.crs;if(!n.infinite){var r=this._globalTileRange;if(!n.wrapLng&&(t.x<r.min.x||t.x>r.max.x)||!n.wrapLat&&(t.y<r.min.y||t.y>r.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return dt(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var n=this._map,r=this.getTileSize(),s=t.scaleBy(r),l=s.add(r),f=n.unproject(s,t.z),g=n.unproject(l,t.z);return[f,g]},_tileCoordsToBounds:function(t){var n=this._tileCoordsToNwSe(t),r=new wt(n[0],n[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var n=t.split(":"),r=new Z(+n[0],+n[1]);return r.z=+n[2],r},_removeTile:function(t){var n=this._tiles[t];n&&(ft(n.el),delete this._tiles[t],this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){K(t,"leaflet-tile");var n=this.getTileSize();t.style.width=n.x+"px",t.style.height=n.y+"px",t.onselectstart=p,t.onmousemove=p,F.ielt9&&this.options.opacity<1&&Dt(t,this.options.opacity)},_addTile:function(t,n){var r=this._getTilePos(t),s=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&W(c(this._tileReady,this,t,null,l)),_t(l,r),this._tiles[s]={el:l,coords:t,current:!0},n.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,n,r){n&&this.fire("tileerror",{error:n,tile:r,coords:t});var s=this._tileCoordsToKey(t);r=this._tiles[s],r&&(r.loaded=+new Date,this._map._fadeAnimated?(Dt(r.el,0),E(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),n||(K(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),F.ielt9||!this._map._fadeAnimated?W(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var n=new Z(this._wrapX?v(t.x,this._wrapX):t.x,this._wrapY?v(t.y,this._wrapY):t.y);return n.z=t.z,n},_pxBoundsToTileRange:function(t){var n=this.getTileSize();return new et(t.min.unscaleBy(n).floor(),t.max.unscaleBy(n).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Vu(t){return new je(t)}var ke=je.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,n){this._url=t,n=b(this,n),n.detectRetina&&F.retina&&n.maxZoom>0?(n.tileSize=Math.floor(n.tileSize/2),n.zoomReverse?(n.zoomOffset--,n.minZoom=Math.min(n.maxZoom,n.minZoom+1)):(n.zoomOffset++,n.maxZoom=Math.max(n.minZoom,n.maxZoom-1)),n.minZoom=Math.max(0,n.minZoom)):n.zoomReverse?n.minZoom=Math.min(n.maxZoom,n.minZoom):n.maxZoom=Math.max(n.minZoom,n.maxZoom),typeof n.subdomains=="string"&&(n.subdomains=n.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,n){return this._url===t&&n===void 0&&(n=!0),this._url=t,n||this.redraw(),this},createTile:function(t,n){var r=document.createElement("img");return G(r,"load",c(this._tileOnLoad,this,n,r)),G(r,"error",c(this._tileOnError,this,n,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.src=this.getTileUrl(t),r},getTileUrl:function(t){var n={r:F.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return R(this._url,u(n,this.options))},_tileOnLoad:function(t,n){F.ielt9?setTimeout(c(t,this,null,n),0):t(null,n)},_tileOnError:function(t,n,r){var s=this.options.errorTileUrl;s&&n.getAttribute("src")!==s&&(n.src=s),t(r,n)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,n=this.options.maxZoom,r=this.options.zoomReverse,s=this.options.zoomOffset;return r&&(t=n-t),t+s},_getSubdomain:function(t){var n=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[n]},_abortLoading:function(){var t,n;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(n=this._tiles[t].el,n.onload=p,n.onerror=p,!n.complete)){n.src=Y;var r=this._tiles[t].coords;ft(n),delete this._tiles[t],this.fire("tileabort",{tile:n,coords:r})}},_removeTile:function(t){var n=this._tiles[t];if(n)return n.el.setAttribute("src",Y),je.prototype._removeTile.call(this,t)},_tileReady:function(t,n,r){if(!(!this._map||r&&r.getAttribute("src")===Y))return je.prototype._tileReady.call(this,t,n,r)}});function Co(t,n){return new ke(t,n)}var Eo=ke.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var r=u({},this.defaultWmsParams);for(var s in n)s in this.options||(r[s]=n[s]);n=b(this,n);var l=n.detectRetina&&F.retina?2:1,f=this.getTileSize();r.width=f.x*l,r.height=f.y*l,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var n=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[n]=this._crs.code,ke.prototype.onAdd.call(this,t)},getTileUrl:function(t){var n=this._tileCoordsToNwSe(t),r=this._crs,s=vt(r.project(n[0]),r.project(n[1])),l=s.min,f=s.max,g=(this._wmsVersion>=1.3&&this._crs===xo?[l.y,l.x,f.y,f.x]:[l.x,l.y,f.x,f.y]).join(","),w=ke.prototype.getTileUrl.call(this,t);return w+k(this.wmsParams,w,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(t,n){return u(this.wmsParams,t),n||this.redraw(),this}});function Yu(t,n){return new Eo(t,n)}ke.WMS=Eo,Co.wms=Yu;var Qt=Ft.extend({options:{padding:.1},initialize:function(t){b(this,t),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),K(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,n){var r=this._map.getZoomScale(n,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,n),f=s.multiplyBy(-r).add(l).subtract(this._map._getNewPixelOrigin(t,n));F.any3d?he(this._container,f,r):_t(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,n=this._map.getSize(),r=this._map.containerPointToLayerPoint(n.multiplyBy(-t)).round();this._bounds=new et(r,r.add(n.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ko=Qt.extend({options:{tolerance:0},getEvents:function(){var t=Qt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");G(t,"mousemove",this._onMouseMove,this),G(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),G(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){E(this._redrawRequest),delete this._ctx,ft(this._container),ct(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var n in this._layers)t=this._layers[n],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qt.prototype._update.call(this);var t=this._bounds,n=this._container,r=t.getSize(),s=F.retina?2:1;_t(n,t.min),n.width=s*r.x,n.height=s*r.y,n.style.width=r.x+"px",n.style.height=r.y+"px",F.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Qt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[_(t)]=t;var n=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=n),this._drawLast=n,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var n=t._order,r=n.next,s=n.prev;r?r.prev=s:this._drawLast=s,s?s.next=r:this._drawFirst=r,delete t._order,delete this._layers[_(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var n=t.options.dashArray.split(/[, ]+/),r=[],s,l;for(l=0;l<n.length;l++){if(s=Number(n[l]),isNaN(s))return;r.push(s)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||W(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var n=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new et,this._redrawBounds.extend(t._pxBounds.min.subtract([n,n])),this._redrawBounds.extend(t._pxBounds.max.add([n,n]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var n=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,n.x,n.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,n=this._redrawBounds;if(this._ctx.save(),n){var r=n.getSize();this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,n){if(this._drawing){var r,s,l,f,g=t._parts,w=g.length,x=this._ctx;if(w){for(x.beginPath(),r=0;r<w;r++){for(s=0,l=g[r].length;s<l;s++)f=g[r][s],x[s?"lineTo":"moveTo"](f.x,f.y);n&&x.closePath()}this._fillStroke(x,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var n=t._point,r=this._ctx,s=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||s)/s;l!==1&&(r.save(),r.scale(1,l)),r.beginPath(),r.arc(n.x,n.y/l,s,0,Math.PI*2,!1),l!==1&&r.restore(),this._fillStroke(r,t)}},_fillStroke:function(t,n){var r=n.options;r.fill&&(t.globalAlpha=r.fillOpacity,t.fillStyle=r.fillColor||r.color,t.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(t.setLineDash&&t.setLineDash(n.options&&n.options._dashArray||[]),t.globalAlpha=r.opacity,t.lineWidth=r.weight,t.strokeStyle=r.color,t.lineCap=r.lineCap,t.lineJoin=r.lineJoin,t.stroke())},_onClick:function(t){for(var n=this._map.mouseEventToLayerPoint(t),r,s,l=this._drawFirst;l;l=l.next)r=l.layer,r.options.interactive&&r._containsPoint(n)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(r))&&(s=r);this._fireEvent(s?[s]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var n=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,n)}},_handleMouseOut:function(t){var n=this._hoveredLayer;n&&(mt(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,n){if(!this._mouseHoverThrottled){for(var r,s,l=this._drawFirst;l;l=l.next)r=l.layer,r.options.interactive&&r._containsPoint(n)&&(s=r);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(K(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,n,r){this._map._fireDOMEvent(n,r||n.type,t)},_bringToFront:function(t){var n=t._order;if(n){var r=n.next,s=n.prev;if(r)r.prev=s;else return;s?s.next=r:r&&(this._drawFirst=r),n.prev=this._drawLast,this._drawLast.next=n,n.next=null,this._drawLast=n,this._requestRedraw(t)}},_bringToBack:function(t){var n=t._order;if(n){var r=n.next,s=n.prev;if(s)s.next=r;else return;r?r.prev=s:s&&(this._drawLast=s),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t)}}});function Ao(t){return F.canvas?new ko(t):null}var Qe=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Gu={_initContainer:function(){this._container=it("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var n=t._container=Qe("shape");K(n,"leaflet-vml-shape "+(this.options.className||"")),n.coordsize="1 1",t._path=Qe("path"),n.appendChild(t._path),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){var n=t._container;this._container.appendChild(n),t.options.interactive&&t.addInteractiveTarget(n)},_removePath:function(t){var n=t._container;ft(n),t.removeInteractiveTarget(n),delete this._layers[_(t)]},_updateStyle:function(t){var n=t._stroke,r=t._fill,s=t.options,l=t._container;l.stroked=!!s.stroke,l.filled=!!s.fill,s.stroke?(n||(n=t._stroke=Qe("stroke")),l.appendChild(n),n.weight=s.weight+"px",n.color=s.color,n.opacity=s.opacity,s.dashArray?n.dashStyle=I(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):n.dashStyle="",n.endcap=s.lineCap.replace("butt","flat"),n.joinstyle=s.lineJoin):n&&(l.removeChild(n),t._stroke=null),s.fill?(r||(r=t._fill=Qe("fill")),l.appendChild(r),r.color=s.fillColor||s.color,r.opacity=s.fillOpacity):r&&(l.removeChild(r),t._fill=null)},_updateCircle:function(t){var n=t._point.round(),r=Math.round(t._radius),s=Math.round(t._radiusY||r);this._setPath(t,t._empty()?"M0 0":"AL "+n.x+","+n.y+" "+r+","+s+" 0,"+65535*360)},_setPath:function(t,n){t._path.v=n},_bringToFront:function(t){Le(t._container)},_bringToBack:function(t){Me(t._container)}},Bn=F.vml?Qe:Pt,tn=Qt.extend({_initContainer:function(){this._container=Bn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),ct(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qt.prototype._update.call(this);var t=this._bounds,n=t.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(n))&&(this._svgSize=n,r.setAttribute("width",n.x),r.setAttribute("height",n.y)),_t(r,t.min),r.setAttribute("viewBox",[t.min.x,t.min.y,n.x,n.y].join(" ")),this.fire("update")}},_initPath:function(t){var n=t._path=Bn("path");t.options.className&&K(n,t.options.className),t.options.interactive&&K(n,"leaflet-interactive"),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ft(t._path),t.removeInteractiveTarget(t._path),delete this._layers[_(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var n=t._path,r=t.options;n&&(r.stroke?(n.setAttribute("stroke",r.color),n.setAttribute("stroke-opacity",r.opacity),n.setAttribute("stroke-width",r.weight),n.setAttribute("stroke-linecap",r.lineCap),n.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?n.setAttribute("stroke-dasharray",r.dashArray):n.removeAttribute("stroke-dasharray"),r.dashOffset?n.setAttribute("stroke-dashoffset",r.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),r.fill?(n.setAttribute("fill",r.fillColor||r.color),n.setAttribute("fill-opacity",r.fillOpacity),n.setAttribute("fill-rule",r.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(t,n){this._setPath(t,St(t._parts,n))},_updateCircle:function(t){var n=t._point,r=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||r,l="a"+r+","+s+" 0 1,0 ",f=t._empty()?"M0 0":"M"+(n.x-r)+","+n.y+l+r*2+",0 "+l+-r*2+",0 ";this._setPath(t,f)},_setPath:function(t,n){t._path.setAttribute("d",n)},_bringToFront:function(t){Le(t._path)},_bringToBack:function(t){Me(t._path)}});F.vml&&tn.include(Gu);function Do(t){return F.svg||F.vml?new tn(t):null}tt.include({getRenderer:function(t){var n=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this._createRenderer()),this.hasLayer(n)||this.addLayer(n),n},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var n=this._paneRenderers[t];return n===void 0&&(n=this._createRenderer({pane:t}),this._paneRenderers[t]=n),n},_createRenderer:function(t){return this.options.preferCanvas&&Ao(t)||Do(t)}});var Io=Ce.extend({initialize:function(t,n){Ce.prototype.initialize.call(this,this._boundsToLatLngs(t),n)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=dt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Xu(t,n){return new Io(t,n)}tn.create=Bn,tn.pointsToPath=St,jt.geometryToLayer=Sn,jt.coordsToLatLng=Fi,jt.coordsToLatLngs=Cn,jt.latLngToCoords=Ri,jt.latLngsToCoords=En,jt.getFeature=Ee,jt.asFeature=kn,tt.mergeOptions({boxZoom:!0});var Bo=Vt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){G(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qe(),Ti(),this._startPoint=this._map.mouseEventToContainerPoint(t),G(document,{contextmenu:de,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=it("div","leaflet-zoom-box",this._container),K(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var n=new et(this._point,this._startPoint),r=n.getSize();_t(this._box,n.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(ft(this._box),mt(this._container,"leaflet-crosshair")),Ve(),bi(),ct(document,{contextmenu:de,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var n=new wt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(n).fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});tt.addInitHook("addHandler","boxZoom",Bo),tt.mergeOptions({doubleClickZoom:!0});var zo=Vt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var n=this._map,r=n.getZoom(),s=n.options.zoomDelta,l=t.originalEvent.shiftKey?r-s:r+s;n.options.doubleClickZoom==="center"?n.setZoom(l):n.setZoomAround(t.containerPoint,l)}});tt.addInitHook("addHandler","doubleClickZoom",zo),tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Oo=Vt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new se(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}K(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var n=dt(this._map.options.maxBounds);this._offsetLimit=vt(this._map.latLngToContainerPoint(n.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(n.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var n=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(n),this._prunePositions(n)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),n=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=n.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,n){return t-(t-n)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),n=this._offsetLimit;t.x<n.min.x&&(t.x=this._viscousLimit(t.x,n.min.x)),t.y<n.min.y&&(t.y=this._viscousLimit(t.y,n.min.y)),t.x>n.max.x&&(t.x=this._viscousLimit(t.x,n.max.x)),t.y>n.max.y&&(t.y=this._viscousLimit(t.y,n.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,n=Math.round(t/2),r=this._initialWorldOffset,s=this._draggable._newPos.x,l=(s-n+r)%t+n-r,f=(s+n+r)%t-n-r,g=Math.abs(l+r)<Math.abs(f+r)?l:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(t){var n=this._map,r=n.options,s=!r.inertia||t.noInertia||this._times.length<2;if(n.fire("dragend",t),s)n.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,g=r.easeLinearity,w=l.multiplyBy(g/f),x=w.distanceTo([0,0]),M=Math.min(r.inertiaMaxSpeed,x),A=w.multiplyBy(M/x),$=M/(r.inertiaDeceleration*g),J=A.multiplyBy(-$/2).round();!J.x&&!J.y?n.fire("moveend"):(J=n._limitOffset(J,n.options.maxBounds),W(function(){n.panBy(J,{duration:$,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});tt.addInitHook("addHandler","dragging",Oo),tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var No=Vt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),G(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ct(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,n=document.documentElement,r=t.scrollTop||n.scrollTop,s=t.scrollLeft||n.scrollLeft;this._map._container.focus(),window.scrollTo(s,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var n=this._panKeys={},r=this.keyCodes,s,l;for(s=0,l=r.left.length;s<l;s++)n[r.left[s]]=[-1*t,0];for(s=0,l=r.right.length;s<l;s++)n[r.right[s]]=[t,0];for(s=0,l=r.down.length;s<l;s++)n[r.down[s]]=[0,t];for(s=0,l=r.up.length;s<l;s++)n[r.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var n=this._zoomKeys={},r=this.keyCodes,s,l;for(s=0,l=r.zoomIn.length;s<l;s++)n[r.zoomIn[s]]=t;for(s=0,l=r.zoomOut.length;s<l;s++)n[r.zoomOut[s]]=-t},_addHooks:function(){G(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=t.keyCode,r=this._map,s;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(s=this._panKeys[n],t.shiftKey&&(s=B(s).multiplyBy(3)),r.options.maxBounds&&(s=r._limitOffset(B(s),r.options.maxBounds)),r.options.worldCopyJump){var l=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(s)));r.panTo(l)}else r.panBy(s)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else if(n===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;de(t)}}});tt.addInitHook("addHandler","keyboard",No),tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zo=Vt.extend({addHooks:function(){G(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var n=ao(t),r=this._map.options.wheelDebounceTime;this._delta+=n,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),s),de(t)},_performZoom:function(){var t=this._map,n=t.getZoom(),r=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,f=r?Math.ceil(l/r)*r:l,g=t._limitZoom(n+(this._delta>0?f:-f))-n;this._delta=0,this._startTime=null,g&&(t.options.scrollWheelZoom==="center"?t.setZoom(n+g):t.setZoomAround(this._lastMousePos,n+g))}});tt.addInitHook("addHandler","scrollWheelZoom",Zo);var Ku=600;tt.mergeOptions({tapHold:F.touchNative&&F.safari&&F.mobile,tapTolerance:15});var Fo=Vt.extend({addHooks:function(){G(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var n=t.touches[0];this._startPos=this._newPos=new Z(n.clientX,n.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(G(document,"touchend",Mt),G(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",n))},this),Ku),G(document,"touchend touchcancel contextmenu",this._cancel,this),G(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){ct(document,"touchend",Mt),ct(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)},_onMove:function(t){var n=t.touches[0];this._newPos=new Z(n.clientX,n.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,n){var r=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});r._simulated=!0,n.target.dispatchEvent(r)}});tt.addInitHook("addHandler","tapHold",Fo),tt.mergeOptions({touchZoom:F.touch,bounceAtZoomLimits:!0});var Ro=Vt.extend({addHooks:function(){K(this._map._container,"leaflet-touch-zoom"),G(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(!(!t.touches||t.touches.length!==2||n._animatingZoom||this._zooming)){var r=n.mouseEventToContainerPoint(t.touches[0]),s=n.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),n.options.touchZoom!=="center"&&(this._pinchStartLatLng=n.containerPointToLatLng(r.add(s)._divideBy(2))),this._startDist=r.distanceTo(s),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),G(document,"touchmove",this._onTouchMove,this),G(document,"touchend touchcancel",this._onTouchEnd,this),Mt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var n=this._map,r=n.mouseEventToContainerPoint(t.touches[0]),s=n.mouseEventToContainerPoint(t.touches[1]),l=r.distanceTo(s)/this._startDist;if(this._zoom=n.getScaleZoom(l,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&l<1||this._zoom>n.getMaxZoom()&&l>1)&&(this._zoom=n._limitZoom(this._zoom)),n.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var f=r._add(s)._divideBy(2)._subtract(this._centerPoint);if(l===1&&f.x===0&&f.y===0)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(n._moveStart(!0,!1),this._moved=!0),E(this._animRequest);var g=c(n._move,n,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=W(g,this,!0),Mt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,E(this._animRequest),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});tt.addInitHook("addHandler","touchZoom",Ro),tt.BoxZoom=Bo,tt.DoubleClickZoom=zo,tt.Drag=Oo,tt.Keyboard=No,tt.ScrollWheelZoom=Zo,tt.TapHold=Fo,tt.TouchZoom=Ro,o.Bounds=et,o.Browser=F,o.CRS=Ot,o.Canvas=ko,o.Circle=Zi,o.CircleMarker=Pn,o.Class=H,o.Control=Zt,o.DivIcon=So,o.DivOverlay=Yt,o.DomEvent=mu,o.DomUtil=fu,o.Draggable=se,o.Evented=at,o.FeatureGroup=Kt,o.GeoJSON=jt,o.GridLayer=je,o.Handler=Vt,o.Icon=Se,o.ImageOverlay=An,o.LatLng=ut,o.LatLngBounds=wt,o.Layer=Ft,o.LayerGroup=Pe,o.LineUtil=Su,o.Map=tt,o.Marker=Mn,o.Mixin=xu,o.Path=ae,o.Point=Z,o.PolyUtil=Tu,o.Polygon=Ce,o.Polyline=Jt,o.Popup=Dn,o.PosAnimation=uo,o.Projection=Cu,o.Rectangle=Io,o.Renderer=Qt,o.SVG=tn,o.SVGOverlay=Po,o.TileLayer=ke,o.Tooltip=In,o.Transformation=Q,o.Util=q,o.VideoOverlay=Mo,o.bind=c,o.bounds=vt,o.canvas=Ao,o.circle=Ou,o.circleMarker=zu,o.control=Xe,o.divIcon=qu,o.extend=u,o.featureGroup=Du,o.geoJSON=Lo,o.geoJson=Fu,o.gridLayer=Vu,o.icon=Iu,o.imageOverlay=Ru,o.latLng=j,o.latLngBounds=dt,o.layerGroup=Au,o.map=_u,o.marker=Bu,o.point=B,o.polygon=Zu,o.polyline=Nu,o.popup=Uu,o.rectangle=Xu,o.setOptions=b,o.stamp=_,o.svg=Do,o.svgOverlay=Wu,o.tileLayer=Co,o.tooltip=$u,o.transformation=P,o.version=a,o.videoOverlay=Hu;var Ju=window.L;o.noConflict=function(){return window.L=Ju,this},window.L=o}))})(an,an.exports)),an.exports}var cl=hl();const Oe=ul(cl);let ue,Ui=null,On=null,Hn=null,gr="dark";const fl={attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20,detectRetina:!0};function dl(e){return e==="light"?"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}function zs(e){ue&&(Hn&&ue.removeLayer(Hn),Hn=Oe.tileLayer(dl(e),fl).addTo(ue),gr=e)}function ml(){return ue=Oe.map("map",{attributionControl:!1,zoomControl:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,center:[50.68847,-1.3034],zoom:10}),zs(gr),ue}function _l(e){const i=e==="light"?"light":"dark";gr===i&&Hn||zs(i)}function pl(e,i){e.forEach(o=>{const a=Oe.divIcon({className:"custom-marker",iconSize:[12,12]}),u=Oe.marker(o.coords,{icon:a}).addTo(ue),h=()=>{const c=u._icon;c&&(Ui&&Ui.classList.remove("selected-marker"),c.classList.add("selected-marker"),Ui=c,i(o))};u.on("click",h),u.on("add",()=>{const c=u._icon;c&&(c.setAttribute("tabindex","0"),c.setAttribute("role","button"),c.setAttribute("aria-label",`Select ${o.name} beach`),c.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),h())}))}),o.name==="Sandown"&&setTimeout(h,0)})}function gl(e){On&&ue.removeLayer(On),On=Oe.marker(e,{icon:Oe.divIcon({className:"tide-station-marker",html:'<div class="diamond-marker"></div>',iconSize:[12,12],iconAnchor:[6,6]})}).addTo(ue),On.setZIndexOffset(-1e3)}function Wn(e,i){return e==null||i==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function vl(e,i){return e==null||i==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function vr(e){let i,o,a;e.length!==2?(i=Wn,o=(d,_)=>Wn(e(d),_),a=(d,_)=>e(d)-_):(i=e===Wn||e===vl?e:yl,o=e,a=e);function u(d,_,m=0,v=d.length){if(m<v){if(i(_,_)!==0)return v;do{const p=m+v>>>1;o(d[p],_)<0?m=p+1:v=p}while(m<v)}return m}function h(d,_,m=0,v=d.length){if(m<v){if(i(_,_)!==0)return v;do{const p=m+v>>>1;o(d[p],_)<=0?m=p+1:v=p}while(m<v)}return m}function c(d,_,m=0,v=d.length){const p=u(d,_,m,v-1);return p>m&&a(d[p-1],_)>-a(d[p],_)?p-1:p}return{left:u,center:c,right:h}}function yl(){return 0}function wl(e){return e===null?NaN:+e}const xl=vr(Wn),Tl=xl.right;vr(wl).center;const bl=Math.sqrt(50),Ll=Math.sqrt(10),Ml=Math.sqrt(2);function Yn(e,i,o){const a=(i-e)/Math.max(0,o),u=Math.floor(Math.log10(a)),h=a/Math.pow(10,u),c=h>=bl?10:h>=Ll?5:h>=Ml?2:1;let d,_,m;return u<0?(m=Math.pow(10,-u)/c,d=Math.round(e*m),_=Math.round(i*m),d/m<e&&++d,_/m>i&&--_,m=-m):(m=Math.pow(10,u)*c,d=Math.round(e/m),_=Math.round(i/m),d*m<e&&++d,_*m>i&&--_),_<d&&.5<=o&&o<2?Yn(e,i,o*2):[d,_,m]}function Pl(e,i,o){if(i=+i,e=+e,o=+o,!(o>0))return[];if(e===i)return[e];const a=i<e,[u,h,c]=a?Yn(i,e,o):Yn(e,i,o);if(!(h>=u))return[];const d=h-u+1,_=new Array(d);if(a)if(c<0)for(let m=0;m<d;++m)_[m]=(h-m)/-c;else for(let m=0;m<d;++m)_[m]=(h-m)*c;else if(c<0)for(let m=0;m<d;++m)_[m]=(u+m)/-c;else for(let m=0;m<d;++m)_[m]=(u+m)*c;return _}function ir(e,i,o){return i=+i,e=+e,o=+o,Yn(e,i,o)[2]}function rr(e,i,o){i=+i,e=+e,o=+o;const a=i<e,u=a?ir(i,e,o):ir(e,i,o);return(a?-1:1)*(u<0?1/-u:u)}function Sl(e){return e}var $i=1,qi=2,or=3,un=4,qo=1e-6;function Cl(e){return"translate("+e+",0)"}function El(e){return"translate(0,"+e+")"}function kl(e){return i=>+e(i)}function Al(e,i){return i=Math.max(0,e.bandwidth()-i*2)/2,e.round()&&(i=Math.round(i)),o=>+e(o)+i}function Dl(){return!this.__axis}function Os(e,i){var o=[],a=null,u=null,h=6,c=6,d=3,_=typeof window<"u"&&window.devicePixelRatio>1?0:.5,m=e===$i||e===un?-1:1,v=e===un||e===qi?"x":"y",p=e===$i||e===or?Cl:El;function y(T){var C=a??(i.ticks?i.ticks.apply(i,o):i.domain()),b=u??(i.tickFormat?i.tickFormat.apply(i,o):Sl),k=Math.max(h,0)+d,z=i.range(),R=+z[0]+_,I=+z[z.length-1]+_,N=(i.bandwidth?Al:kl)(i.copy(),_),Y=T.selection?T.selection():T,S=Y.selectAll(".domain").data([null]),O=Y.selectAll(".tick").data(C,i).order(),ot=O.exit(),nt=O.enter().append("g").attr("class","tick"),U=O.select("line"),W=O.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(nt),U=U.merge(nt.append("line").attr("stroke","currentColor").attr(v+"2",m*h)),W=W.merge(nt.append("text").attr("fill","currentColor").attr(v,m*k).attr("dy",e===$i?"0em":e===or?"0.71em":"0.32em")),T!==Y&&(S=S.transition(T),O=O.transition(T),U=U.transition(T),W=W.transition(T),ot=ot.transition(T).attr("opacity",qo).attr("transform",function(E){return isFinite(E=N(E))?p(E+_):this.getAttribute("transform")}),nt.attr("opacity",qo).attr("transform",function(E){var q=this.parentNode.__axis;return p((q&&isFinite(q=q(E))?q:N(E))+_)})),ot.remove(),S.attr("d",e===un||e===qi?c?"M"+m*c+","+R+"H"+_+"V"+I+"H"+m*c:"M"+_+","+R+"V"+I:c?"M"+R+","+m*c+"V"+_+"H"+I+"V"+m*c:"M"+R+","+_+"H"+I),O.attr("opacity",1).attr("transform",function(E){return p(N(E)+_)}),U.attr(v+"2",m*h),W.attr(v,m*k).text(b),Y.filter(Dl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===qi?"start":e===un?"end":"middle"),Y.each(function(){this.__axis=N})}return y.scale=function(T){return arguments.length?(i=T,y):i},y.ticks=function(){return o=Array.from(arguments),y},y.tickArguments=function(T){return arguments.length?(o=T==null?[]:Array.from(T),y):o.slice()},y.tickValues=function(T){return arguments.length?(a=T==null?null:Array.from(T),y):a&&a.slice()},y.tickFormat=function(T){return arguments.length?(u=T,y):u},y.tickSize=function(T){return arguments.length?(h=c=+T,y):h},y.tickSizeInner=function(T){return arguments.length?(h=+T,y):h},y.tickSizeOuter=function(T){return arguments.length?(c=+T,y):c},y.tickPadding=function(T){return arguments.length?(d=+T,y):d},y.offset=function(T){return arguments.length?(_=+T,y):_},y}function Il(e){return Os(or,e)}function Vo(e){return Os(un,e)}var Bl={value:()=>{}};function Ns(){for(var e=0,i=arguments.length,o={},a;e<i;++e){if(!(a=arguments[e]+"")||a in o||/[\s.]/.test(a))throw new Error("illegal type: "+a);o[a]=[]}return new Un(o)}function Un(e){this._=e}function zl(e,i){return e.trim().split(/^|\s+/).map(function(o){var a="",u=o.indexOf(".");if(u>=0&&(a=o.slice(u+1),o=o.slice(0,u)),o&&!i.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:a}})}Un.prototype=Ns.prototype={constructor:Un,on:function(e,i){var o=this._,a=zl(e+"",o),u,h=-1,c=a.length;if(arguments.length<2){for(;++h<c;)if((u=(e=a[h]).type)&&(u=Ol(o[u],e.name)))return u;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++h<c;)if(u=(e=a[h]).type)o[u]=Yo(o[u],e.name,i);else if(i==null)for(u in o)o[u]=Yo(o[u],e.name,null);return this},copy:function(){var e={},i=this._;for(var o in i)e[o]=i[o].slice();return new Un(e)},call:function(e,i){if((u=arguments.length-2)>0)for(var o=new Array(u),a=0,u,h;a<u;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(h=this._[e],a=0,u=h.length;a<u;++a)h[a].value.apply(i,o)},apply:function(e,i,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],u=0,h=a.length;u<h;++u)a[u].value.apply(i,o)}};function Ol(e,i){for(var o=0,a=e.length,u;o<a;++o)if((u=e[o]).name===i)return u.value}function Yo(e,i,o){for(var a=0,u=e.length;a<u;++a)if(e[a].name===i){e[a]=Bl,e=e.slice(0,a).concat(e.slice(a+1));break}return o!=null&&e.push({name:i,value:o}),e}var sr="http://www.w3.org/1999/xhtml";const Go={svg:"http://www.w3.org/2000/svg",xhtml:sr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ui(e){var i=e+="",o=i.indexOf(":");return o>=0&&(i=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),Go.hasOwnProperty(i)?{space:Go[i],local:e}:e}function Nl(e){return function(){var i=this.ownerDocument,o=this.namespaceURI;return o===sr&&i.documentElement.namespaceURI===sr?i.createElement(e):i.createElementNS(o,e)}}function Zl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zs(e){var i=ui(e);return(i.local?Zl:Nl)(i)}function Fl(){}function yr(e){return e==null?Fl:function(){return this.querySelector(e)}}function Rl(e){typeof e!="function"&&(e=yr(e));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var h=i[u],c=h.length,d=a[u]=new Array(c),_,m,v=0;v<c;++v)(_=h[v])&&(m=e.call(_,_.__data__,v,h))&&("__data__"in _&&(m.__data__=_.__data__),d[v]=m);return new At(a,this._parents)}function Hl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Wl(){return[]}function Fs(e){return e==null?Wl:function(){return this.querySelectorAll(e)}}function Ul(e){return function(){return Hl(e.apply(this,arguments))}}function $l(e){typeof e=="function"?e=Ul(e):e=Fs(e);for(var i=this._groups,o=i.length,a=[],u=[],h=0;h<o;++h)for(var c=i[h],d=c.length,_,m=0;m<d;++m)(_=c[m])&&(a.push(e.call(_,_.__data__,m,c)),u.push(_));return new At(a,u)}function Rs(e){return function(){return this.matches(e)}}function Hs(e){return function(i){return i.matches(e)}}var ql=Array.prototype.find;function Vl(e){return function(){return ql.call(this.children,e)}}function Yl(){return this.firstElementChild}function Gl(e){return this.select(e==null?Yl:Vl(typeof e=="function"?e:Hs(e)))}var Xl=Array.prototype.filter;function Kl(){return Array.from(this.children)}function Jl(e){return function(){return Xl.call(this.children,e)}}function jl(e){return this.selectAll(e==null?Kl:Jl(typeof e=="function"?e:Hs(e)))}function Ql(e){typeof e!="function"&&(e=Rs(e));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var h=i[u],c=h.length,d=a[u]=[],_,m=0;m<c;++m)(_=h[m])&&e.call(_,_.__data__,m,h)&&d.push(_);return new At(a,this._parents)}function Ws(e){return new Array(e.length)}function th(){return new At(this._enter||this._groups.map(Ws),this._parents)}function Gn(e,i){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=i}Gn.prototype={constructor:Gn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,i){return this._parent.insertBefore(e,i)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function eh(e){return function(){return e}}function nh(e,i,o,a,u,h){for(var c=0,d,_=i.length,m=h.length;c<m;++c)(d=i[c])?(d.__data__=h[c],a[c]=d):o[c]=new Gn(e,h[c]);for(;c<_;++c)(d=i[c])&&(u[c]=d)}function ih(e,i,o,a,u,h,c){var d,_,m=new Map,v=i.length,p=h.length,y=new Array(v),T;for(d=0;d<v;++d)(_=i[d])&&(y[d]=T=c.call(_,_.__data__,d,i)+"",m.has(T)?u[d]=_:m.set(T,_));for(d=0;d<p;++d)T=c.call(e,h[d],d,h)+"",(_=m.get(T))?(a[d]=_,_.__data__=h[d],m.delete(T)):o[d]=new Gn(e,h[d]);for(d=0;d<v;++d)(_=i[d])&&m.get(y[d])===_&&(u[d]=_)}function rh(e){return e.__data__}function oh(e,i){if(!arguments.length)return Array.from(this,rh);var o=i?ih:nh,a=this._parents,u=this._groups;typeof e!="function"&&(e=eh(e));for(var h=u.length,c=new Array(h),d=new Array(h),_=new Array(h),m=0;m<h;++m){var v=a[m],p=u[m],y=p.length,T=sh(e.call(v,v&&v.__data__,m,a)),C=T.length,b=d[m]=new Array(C),k=c[m]=new Array(C),z=_[m]=new Array(y);o(v,p,b,k,z,T,i);for(var R=0,I=0,N,Y;R<C;++R)if(N=b[R]){for(R>=I&&(I=R+1);!(Y=k[I])&&++I<C;);N._next=Y||null}}return c=new At(c,a),c._enter=d,c._exit=_,c}function sh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ah(){return new At(this._exit||this._groups.map(Ws),this._parents)}function uh(e,i,o){var a=this.enter(),u=this,h=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),i!=null&&(u=i(u),u&&(u=u.selection())),o==null?h.remove():o(h),a&&u?a.merge(u).order():u}function lh(e){for(var i=e.selection?e.selection():e,o=this._groups,a=i._groups,u=o.length,h=a.length,c=Math.min(u,h),d=new Array(u),_=0;_<c;++_)for(var m=o[_],v=a[_],p=m.length,y=d[_]=new Array(p),T,C=0;C<p;++C)(T=m[C]||v[C])&&(y[C]=T);for(;_<u;++_)d[_]=o[_];return new At(d,this._parents)}function hh(){for(var e=this._groups,i=-1,o=e.length;++i<o;)for(var a=e[i],u=a.length-1,h=a[u],c;--u>=0;)(c=a[u])&&(h&&c.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(c,h),h=c);return this}function ch(e){e||(e=fh);function i(p,y){return p&&y?e(p.__data__,y.__data__):!p-!y}for(var o=this._groups,a=o.length,u=new Array(a),h=0;h<a;++h){for(var c=o[h],d=c.length,_=u[h]=new Array(d),m,v=0;v<d;++v)(m=c[v])&&(_[v]=m);_.sort(i)}return new At(u,this._parents).order()}function fh(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function dh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function mh(){return Array.from(this)}function _h(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var a=e[i],u=0,h=a.length;u<h;++u){var c=a[u];if(c)return c}return null}function ph(){let e=0;for(const i of this)++e;return e}function gh(){return!this.node()}function vh(e){for(var i=this._groups,o=0,a=i.length;o<a;++o)for(var u=i[o],h=0,c=u.length,d;h<c;++h)(d=u[h])&&e.call(d,d.__data__,h,u);return this}function yh(e){return function(){this.removeAttribute(e)}}function wh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xh(e,i){return function(){this.setAttribute(e,i)}}function Th(e,i){return function(){this.setAttributeNS(e.space,e.local,i)}}function bh(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function Lh(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function Mh(e,i){var o=ui(e);if(arguments.length<2){var a=this.node();return o.local?a.getAttributeNS(o.space,o.local):a.getAttribute(o)}return this.each((i==null?o.local?wh:yh:typeof i=="function"?o.local?Lh:bh:o.local?Th:xh)(o,i))}function Us(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ph(e){return function(){this.style.removeProperty(e)}}function Sh(e,i,o){return function(){this.style.setProperty(e,i,o)}}function Ch(e,i,o){return function(){var a=i.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,o)}}function Eh(e,i,o){return arguments.length>1?this.each((i==null?Ph:typeof i=="function"?Ch:Sh)(e,i,o??"")):Ne(this.node(),e)}function Ne(e,i){return e.style.getPropertyValue(i)||Us(e).getComputedStyle(e,null).getPropertyValue(i)}function kh(e){return function(){delete this[e]}}function Ah(e,i){return function(){this[e]=i}}function Dh(e,i){return function(){var o=i.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function Ih(e,i){return arguments.length>1?this.each((i==null?kh:typeof i=="function"?Dh:Ah)(e,i)):this.node()[e]}function $s(e){return e.trim().split(/^|\s+/)}function wr(e){return e.classList||new qs(e)}function qs(e){this._node=e,this._names=$s(e.getAttribute("class")||"")}qs.prototype={add:function(e){var i=this._names.indexOf(e);i<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var i=this._names.indexOf(e);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vs(e,i){for(var o=wr(e),a=-1,u=i.length;++a<u;)o.add(i[a])}function Ys(e,i){for(var o=wr(e),a=-1,u=i.length;++a<u;)o.remove(i[a])}function Bh(e){return function(){Vs(this,e)}}function zh(e){return function(){Ys(this,e)}}function Oh(e,i){return function(){(i.apply(this,arguments)?Vs:Ys)(this,e)}}function Nh(e,i){var o=$s(e+"");if(arguments.length<2){for(var a=wr(this.node()),u=-1,h=o.length;++u<h;)if(!a.contains(o[u]))return!1;return!0}return this.each((typeof i=="function"?Oh:i?Bh:zh)(o,i))}function Zh(){this.textContent=""}function Fh(e){return function(){this.textContent=e}}function Rh(e){return function(){var i=e.apply(this,arguments);this.textContent=i??""}}function Hh(e){return arguments.length?this.each(e==null?Zh:(typeof e=="function"?Rh:Fh)(e)):this.node().textContent}function Wh(){this.innerHTML=""}function Uh(e){return function(){this.innerHTML=e}}function $h(e){return function(){var i=e.apply(this,arguments);this.innerHTML=i??""}}function qh(e){return arguments.length?this.each(e==null?Wh:(typeof e=="function"?$h:Uh)(e)):this.node().innerHTML}function Vh(){this.nextSibling&&this.parentNode.appendChild(this)}function Yh(){return this.each(Vh)}function Gh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xh(){return this.each(Gh)}function Kh(e){var i=typeof e=="function"?e:Zs(e);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function Jh(){return null}function jh(e,i){var o=typeof e=="function"?e:Zs(e),a=i==null?Jh:typeof i=="function"?i:yr(i);return this.select(function(){return this.insertBefore(o.apply(this,arguments),a.apply(this,arguments)||null)})}function Qh(){var e=this.parentNode;e&&e.removeChild(this)}function tc(){return this.each(Qh)}function ec(){var e=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function nc(){var e=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function ic(e){return this.select(e?nc:ec)}function rc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function oc(e){return function(i){e.call(this,i,this.__data__)}}function sc(e){return e.trim().split(/^|\s+/).map(function(i){var o="",a=i.indexOf(".");return a>=0&&(o=i.slice(a+1),i=i.slice(0,a)),{type:i,name:o}})}function ac(e){return function(){var i=this.__on;if(i){for(var o=0,a=-1,u=i.length,h;o<u;++o)h=i[o],(!e.type||h.type===e.type)&&h.name===e.name?this.removeEventListener(h.type,h.listener,h.options):i[++a]=h;++a?i.length=a:delete this.__on}}}function uc(e,i,o){return function(){var a=this.__on,u,h=oc(i);if(a){for(var c=0,d=a.length;c<d;++c)if((u=a[c]).type===e.type&&u.name===e.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=h,u.options=o),u.value=i;return}}this.addEventListener(e.type,h,o),u={type:e.type,name:e.name,value:i,listener:h,options:o},a?a.push(u):this.__on=[u]}}function lc(e,i,o){var a=sc(e+""),u,h=a.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var _=0,m=d.length,v;_<m;++_)for(u=0,v=d[_];u<h;++u)if((c=a[u]).type===v.type&&c.name===v.name)return v.value}return}for(d=i?uc:ac,u=0;u<h;++u)this.each(d(a[u],i,o));return this}function Gs(e,i,o){var a=Us(e),u=a.CustomEvent;typeof u=="function"?u=new u(i,o):(u=a.document.createEvent("Event"),o?(u.initEvent(i,o.bubbles,o.cancelable),u.detail=o.detail):u.initEvent(i,!1,!1)),e.dispatchEvent(u)}function hc(e,i){return function(){return Gs(this,e,i)}}function cc(e,i){return function(){return Gs(this,e,i.apply(this,arguments))}}function fc(e,i){return this.each((typeof i=="function"?cc:hc)(e,i))}function*dc(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var a=e[i],u=0,h=a.length,c;u<h;++u)(c=a[u])&&(yield c)}var Xs=[null];function At(e,i){this._groups=e,this._parents=i}function _n(){return new At([[document.documentElement]],Xs)}function mc(){return this}At.prototype=_n.prototype={constructor:At,select:Rl,selectAll:$l,selectChild:Gl,selectChildren:jl,filter:Ql,data:oh,enter:th,exit:ah,join:uh,merge:lh,selection:mc,order:hh,sort:ch,call:dh,nodes:mh,node:_h,size:ph,empty:gh,each:vh,attr:Mh,style:Eh,property:Ih,classed:Nh,text:Hh,html:qh,raise:Yh,lower:Xh,append:Kh,insert:jh,remove:tc,clone:ic,datum:rc,on:lc,dispatch:fc,[Symbol.iterator]:dc};function Vi(e){return typeof e=="string"?new At([[document.querySelector(e)]],[document.documentElement]):new At([[e]],Xs)}function _c(e){let i;for(;i=e.sourceEvent;)e=i;return e}function pc(e,i){if(e=_c(e),i===void 0&&(i=e.currentTarget),i){var o=i.ownerSVGElement||i;if(o.createSVGPoint){var a=o.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(i.getScreenCTM().inverse()),[a.x,a.y]}if(i.getBoundingClientRect){var u=i.getBoundingClientRect();return[e.clientX-u.left-i.clientLeft,e.clientY-u.top-i.clientTop]}}return[e.pageX,e.pageY]}function xr(e,i,o){e.prototype=i.prototype=o,o.constructor=e}function Ks(e,i){var o=Object.create(e.prototype);for(var a in i)o[a]=i[a];return o}function pn(){}var fn=.7,Xn=1/fn,ze="\\s*([+-]?\\d+)\\s*",dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gc=/^#([0-9a-f]{3,8})$/,vc=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),yc=new RegExp(`^rgb\\(${Gt},${Gt},${Gt}\\)$`),wc=new RegExp(`^rgba\\(${ze},${ze},${ze},${dn}\\)$`),xc=new RegExp(`^rgba\\(${Gt},${Gt},${Gt},${dn}\\)$`),Tc=new RegExp(`^hsl\\(${dn},${Gt},${Gt}\\)$`),bc=new RegExp(`^hsla\\(${dn},${Gt},${Gt},${dn}\\)$`),Xo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xr(pn,ve,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ko,formatHex:Ko,formatHex8:Lc,formatHsl:Mc,formatRgb:Jo,toString:Jo});function Ko(){return this.rgb().formatHex()}function Lc(){return this.rgb().formatHex8()}function Mc(){return Js(this).formatHsl()}function Jo(){return this.rgb().formatRgb()}function ve(e){var i,o;return e=(e+"").trim().toLowerCase(),(i=gc.exec(e))?(o=i[1].length,i=parseInt(i[1],16),o===6?jo(i):o===3?new kt(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):o===8?Nn(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):o===4?Nn(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=vc.exec(e))?new kt(i[1],i[2],i[3],1):(i=yc.exec(e))?new kt(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=wc.exec(e))?Nn(i[1],i[2],i[3],i[4]):(i=xc.exec(e))?Nn(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=Tc.exec(e))?es(i[1],i[2]/100,i[3]/100,1):(i=bc.exec(e))?es(i[1],i[2]/100,i[3]/100,i[4]):Xo.hasOwnProperty(e)?jo(Xo[e]):e==="transparent"?new kt(NaN,NaN,NaN,0):null}function jo(e){return new kt(e>>16&255,e>>8&255,e&255,1)}function Nn(e,i,o,a){return a<=0&&(e=i=o=NaN),new kt(e,i,o,a)}function Pc(e){return e instanceof pn||(e=ve(e)),e?(e=e.rgb(),new kt(e.r,e.g,e.b,e.opacity)):new kt}function ar(e,i,o,a){return arguments.length===1?Pc(e):new kt(e,i,o,a??1)}function kt(e,i,o,a){this.r=+e,this.g=+i,this.b=+o,this.opacity=+a}xr(kt,ar,Ks(pn,{brighter(e){return e=e==null?Xn:Math.pow(Xn,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kt(ge(this.r),ge(this.g),ge(this.b),Kn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qo,formatHex:Qo,formatHex8:Sc,formatRgb:ts,toString:ts}));function Qo(){return`#${pe(this.r)}${pe(this.g)}${pe(this.b)}`}function Sc(){return`#${pe(this.r)}${pe(this.g)}${pe(this.b)}${pe((isNaN(this.opacity)?1:this.opacity)*255)}`}function ts(){const e=Kn(this.opacity);return`${e===1?"rgb(":"rgba("}${ge(this.r)}, ${ge(this.g)}, ${ge(this.b)}${e===1?")":`, ${e})`}`}function Kn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ge(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pe(e){return e=ge(e),(e<16?"0":"")+e.toString(16)}function es(e,i,o,a){return a<=0?e=i=o=NaN:o<=0||o>=1?e=i=NaN:i<=0&&(e=NaN),new Ht(e,i,o,a)}function Js(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof pn||(e=ve(e)),!e)return new Ht;if(e instanceof Ht)return e;e=e.rgb();var i=e.r/255,o=e.g/255,a=e.b/255,u=Math.min(i,o,a),h=Math.max(i,o,a),c=NaN,d=h-u,_=(h+u)/2;return d?(i===h?c=(o-a)/d+(o<a)*6:o===h?c=(a-i)/d+2:c=(i-o)/d+4,d/=_<.5?h+u:2-h-u,c*=60):d=_>0&&_<1?0:c,new Ht(c,d,_,e.opacity)}function Cc(e,i,o,a){return arguments.length===1?Js(e):new Ht(e,i,o,a??1)}function Ht(e,i,o,a){this.h=+e,this.s=+i,this.l=+o,this.opacity=+a}xr(Ht,Cc,Ks(pn,{brighter(e){return e=e==null?Xn:Math.pow(Xn,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,i=isNaN(e)||isNaN(this.s)?0:this.s,o=this.l,a=o+(o<.5?o:1-o)*i,u=2*o-a;return new kt(Yi(e>=240?e-240:e+120,u,a),Yi(e,u,a),Yi(e<120?e+240:e-120,u,a),this.opacity)},clamp(){return new Ht(ns(this.h),Zn(this.s),Zn(this.l),Kn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kn(this.opacity);return`${e===1?"hsl(":"hsla("}${ns(this.h)}, ${Zn(this.s)*100}%, ${Zn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ns(e){return e=(e||0)%360,e<0?e+360:e}function Zn(e){return Math.max(0,Math.min(1,e||0))}function Yi(e,i,o){return(e<60?i+(o-i)*e/60:e<180?o:e<240?i+(o-i)*(240-e)/60:i)*255}const Tr=e=>()=>e;function Ec(e,i){return function(o){return e+o*i}}function kc(e,i,o){return e=Math.pow(e,o),i=Math.pow(i,o)-e,o=1/o,function(a){return Math.pow(e+a*i,o)}}function Ac(e){return(e=+e)==1?js:function(i,o){return o-i?kc(i,o,e):Tr(isNaN(i)?o:i)}}function js(e,i){var o=i-e;return o?Ec(e,o):Tr(isNaN(e)?i:e)}const Jn=(function e(i){var o=Ac(i);function a(u,h){var c=o((u=ar(u)).r,(h=ar(h)).r),d=o(u.g,h.g),_=o(u.b,h.b),m=js(u.opacity,h.opacity);return function(v){return u.r=c(v),u.g=d(v),u.b=_(v),u.opacity=m(v),u+""}}return a.gamma=e,a})(1);function Dc(e,i){i||(i=[]);var o=e?Math.min(i.length,e.length):0,a=i.slice(),u;return function(h){for(u=0;u<o;++u)a[u]=e[u]*(1-h)+i[u]*h;return a}}function Ic(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Bc(e,i){var o=i?i.length:0,a=e?Math.min(o,e.length):0,u=new Array(a),h=new Array(o),c;for(c=0;c<a;++c)u[c]=br(e[c],i[c]);for(;c<o;++c)h[c]=i[c];return function(d){for(c=0;c<a;++c)h[c]=u[c](d);return h}}function zc(e,i){var o=new Date;return e=+e,i=+i,function(a){return o.setTime(e*(1-a)+i*a),o}}function Rt(e,i){return e=+e,i=+i,function(o){return e*(1-o)+i*o}}function Oc(e,i){var o={},a={},u;(e===null||typeof e!="object")&&(e={}),(i===null||typeof i!="object")&&(i={});for(u in i)u in e?o[u]=br(e[u],i[u]):a[u]=i[u];return function(h){for(u in o)a[u]=o[u](h);return a}}var ur=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gi=new RegExp(ur.source,"g");function Nc(e){return function(){return e}}function Zc(e){return function(i){return e(i)+""}}function Qs(e,i){var o=ur.lastIndex=Gi.lastIndex=0,a,u,h,c=-1,d=[],_=[];for(e=e+"",i=i+"";(a=ur.exec(e))&&(u=Gi.exec(i));)(h=u.index)>o&&(h=i.slice(o,h),d[c]?d[c]+=h:d[++c]=h),(a=a[0])===(u=u[0])?d[c]?d[c]+=u:d[++c]=u:(d[++c]=null,_.push({i:c,x:Rt(a,u)})),o=Gi.lastIndex;return o<i.length&&(h=i.slice(o),d[c]?d[c]+=h:d[++c]=h),d.length<2?_[0]?Zc(_[0].x):Nc(i):(i=_.length,function(m){for(var v=0,p;v<i;++v)d[(p=_[v]).i]=p.x(m);return d.join("")})}function br(e,i){var o=typeof i,a;return i==null||o==="boolean"?Tr(i):(o==="number"?Rt:o==="string"?(a=ve(i))?(i=a,Jn):Qs:i instanceof ve?Jn:i instanceof Date?zc:Ic(i)?Dc:Array.isArray(i)?Bc:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?Oc:Rt)(e,i)}function Fc(e,i){return e=+e,i=+i,function(o){return Math.round(e*(1-o)+i*o)}}var is=180/Math.PI,lr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ta(e,i,o,a,u,h){var c,d,_;return(c=Math.sqrt(e*e+i*i))&&(e/=c,i/=c),(_=e*o+i*a)&&(o-=e*_,a-=i*_),(d=Math.sqrt(o*o+a*a))&&(o/=d,a/=d,_/=d),e*a<i*o&&(e=-e,i=-i,_=-_,c=-c),{translateX:u,translateY:h,rotate:Math.atan2(i,e)*is,skewX:Math.atan(_)*is,scaleX:c,scaleY:d}}var Fn;function Rc(e){const i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return i.isIdentity?lr:ta(i.a,i.b,i.c,i.d,i.e,i.f)}function Hc(e){return e==null||(Fn||(Fn=document.createElementNS("http://www.w3.org/2000/svg","g")),Fn.setAttribute("transform",e),!(e=Fn.transform.baseVal.consolidate()))?lr:(e=e.matrix,ta(e.a,e.b,e.c,e.d,e.e,e.f))}function ea(e,i,o,a){function u(m){return m.length?m.pop()+" ":""}function h(m,v,p,y,T,C){if(m!==p||v!==y){var b=T.push("translate(",null,i,null,o);C.push({i:b-4,x:Rt(m,p)},{i:b-2,x:Rt(v,y)})}else(p||y)&&T.push("translate("+p+i+y+o)}function c(m,v,p,y){m!==v?(m-v>180?v+=360:v-m>180&&(m+=360),y.push({i:p.push(u(p)+"rotate(",null,a)-2,x:Rt(m,v)})):v&&p.push(u(p)+"rotate("+v+a)}function d(m,v,p,y){m!==v?y.push({i:p.push(u(p)+"skewX(",null,a)-2,x:Rt(m,v)}):v&&p.push(u(p)+"skewX("+v+a)}function _(m,v,p,y,T,C){if(m!==p||v!==y){var b=T.push(u(T)+"scale(",null,",",null,")");C.push({i:b-4,x:Rt(m,p)},{i:b-2,x:Rt(v,y)})}else(p!==1||y!==1)&&T.push(u(T)+"scale("+p+","+y+")")}return function(m,v){var p=[],y=[];return m=e(m),v=e(v),h(m.translateX,m.translateY,v.translateX,v.translateY,p,y),c(m.rotate,v.rotate,p,y),d(m.skewX,v.skewX,p,y),_(m.scaleX,m.scaleY,v.scaleX,v.scaleY,p,y),m=v=null,function(T){for(var C=-1,b=y.length,k;++C<b;)p[(k=y[C]).i]=k.x(T);return p.join("")}}}var Wc=ea(Rc,"px, ","px)","deg)"),Uc=ea(Hc,", ",")",")"),Ze=0,ln=0,en=0,na=1e3,jn,hn,Qn=0,ye=0,li=0,mn=typeof performance=="object"&&performance.now?performance:Date,ia=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Lr(){return ye||(ia($c),ye=mn.now()+li)}function $c(){ye=0}function ti(){this._call=this._time=this._next=null}ti.prototype=ra.prototype={constructor:ti,restart:function(e,i,o){if(typeof e!="function")throw new TypeError("callback is not a function");o=(o==null?Lr():+o)+(i==null?0:+i),!this._next&&hn!==this&&(hn?hn._next=this:jn=this,hn=this),this._call=e,this._time=o,hr()},stop:function(){this._call&&(this._call=null,this._time=1/0,hr())}};function ra(e,i,o){var a=new ti;return a.restart(e,i,o),a}function qc(){Lr(),++Ze;for(var e=jn,i;e;)(i=ye-e._time)>=0&&e._call.call(void 0,i),e=e._next;--Ze}function rs(){ye=(Qn=mn.now())+li,Ze=ln=0;try{qc()}finally{Ze=0,Yc(),ye=0}}function Vc(){var e=mn.now(),i=e-Qn;i>na&&(li-=i,Qn=e)}function Yc(){for(var e,i=jn,o,a=1/0;i;)i._call?(a>i._time&&(a=i._time),e=i,i=i._next):(o=i._next,i._next=null,i=e?e._next=o:jn=o);hn=e,hr(a)}function hr(e){if(!Ze){ln&&(ln=clearTimeout(ln));var i=e-ye;i>24?(e<1/0&&(ln=setTimeout(rs,e-mn.now()-li)),en&&(en=clearInterval(en))):(en||(Qn=mn.now(),en=setInterval(Vc,na)),Ze=1,ia(rs))}}function os(e,i,o){var a=new ti;return i=i==null?0:+i,a.restart(u=>{a.stop(),e(u+i)},i,o),a}var Gc=Ns("start","end","cancel","interrupt"),Xc=[],oa=0,ss=1,cr=2,$n=3,as=4,fr=5,qn=6;function hi(e,i,o,a,u,h){var c=e.__transition;if(!c)e.__transition={};else if(o in c)return;Kc(e,o,{name:i,index:a,group:u,on:Gc,tween:Xc,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:oa})}function Mr(e,i){var o=Wt(e,i);if(o.state>oa)throw new Error("too late; already scheduled");return o}function Xt(e,i){var o=Wt(e,i);if(o.state>$n)throw new Error("too late; already running");return o}function Wt(e,i){var o=e.__transition;if(!o||!(o=o[i]))throw new Error("transition not found");return o}function Kc(e,i,o){var a=e.__transition,u;a[i]=o,o.timer=ra(h,0,o.time);function h(m){o.state=ss,o.timer.restart(c,o.delay,o.time),o.delay<=m&&c(m-o.delay)}function c(m){var v,p,y,T;if(o.state!==ss)return _();for(v in a)if(T=a[v],T.name===o.name){if(T.state===$n)return os(c);T.state===as?(T.state=qn,T.timer.stop(),T.on.call("interrupt",e,e.__data__,T.index,T.group),delete a[v]):+v<i&&(T.state=qn,T.timer.stop(),T.on.call("cancel",e,e.__data__,T.index,T.group),delete a[v])}if(os(function(){o.state===$n&&(o.state=as,o.timer.restart(d,o.delay,o.time),d(m))}),o.state=cr,o.on.call("start",e,e.__data__,o.index,o.group),o.state===cr){for(o.state=$n,u=new Array(y=o.tween.length),v=0,p=-1;v<y;++v)(T=o.tween[v].value.call(e,e.__data__,o.index,o.group))&&(u[++p]=T);u.length=p+1}}function d(m){for(var v=m<o.duration?o.ease.call(null,m/o.duration):(o.timer.restart(_),o.state=fr,1),p=-1,y=u.length;++p<y;)u[p].call(e,v);o.state===fr&&(o.on.call("end",e,e.__data__,o.index,o.group),_())}function _(){o.state=qn,o.timer.stop(),delete a[i];for(var m in a)return;delete e.__transition}}function Jc(e,i){var o=e.__transition,a,u,h=!0,c;if(o){i=i==null?null:i+"";for(c in o){if((a=o[c]).name!==i){h=!1;continue}u=a.state>cr&&a.state<fr,a.state=qn,a.timer.stop(),a.on.call(u?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete o[c]}h&&delete e.__transition}}function jc(e){return this.each(function(){Jc(this,e)})}function Qc(e,i){var o,a;return function(){var u=Xt(this,e),h=u.tween;if(h!==o){a=o=h;for(var c=0,d=a.length;c<d;++c)if(a[c].name===i){a=a.slice(),a.splice(c,1);break}}u.tween=a}}function tf(e,i,o){var a,u;if(typeof o!="function")throw new Error;return function(){var h=Xt(this,e),c=h.tween;if(c!==a){u=(a=c).slice();for(var d={name:i,value:o},_=0,m=u.length;_<m;++_)if(u[_].name===i){u[_]=d;break}_===m&&u.push(d)}h.tween=u}}function ef(e,i){var o=this._id;if(e+="",arguments.length<2){for(var a=Wt(this.node(),o).tween,u=0,h=a.length,c;u<h;++u)if((c=a[u]).name===e)return c.value;return null}return this.each((i==null?Qc:tf)(o,e,i))}function Pr(e,i,o){var a=e._id;return e.each(function(){var u=Xt(this,a);(u.value||(u.value={}))[i]=o.apply(this,arguments)}),function(u){return Wt(u,a).value[i]}}function sa(e,i){var o;return(typeof i=="number"?Rt:i instanceof ve?Jn:(o=ve(i))?(i=o,Jn):Qs)(e,i)}function nf(e){return function(){this.removeAttribute(e)}}function rf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function of(e,i,o){var a,u=o+"",h;return function(){var c=this.getAttribute(e);return c===u?null:c===a?h:h=i(a=c,o)}}function sf(e,i,o){var a,u=o+"",h;return function(){var c=this.getAttributeNS(e.space,e.local);return c===u?null:c===a?h:h=i(a=c,o)}}function af(e,i,o){var a,u,h;return function(){var c,d=o(this),_;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),_=d+"",c===_?null:c===a&&_===u?h:(u=_,h=i(a=c,d)))}}function uf(e,i,o){var a,u,h;return function(){var c,d=o(this),_;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),_=d+"",c===_?null:c===a&&_===u?h:(u=_,h=i(a=c,d)))}}function lf(e,i){var o=ui(e),a=o==="transform"?Uc:sa;return this.attrTween(e,typeof i=="function"?(o.local?uf:af)(o,a,Pr(this,"attr."+e,i)):i==null?(o.local?rf:nf)(o):(o.local?sf:of)(o,a,i))}function hf(e,i){return function(o){this.setAttribute(e,i.call(this,o))}}function cf(e,i){return function(o){this.setAttributeNS(e.space,e.local,i.call(this,o))}}function ff(e,i){var o,a;function u(){var h=i.apply(this,arguments);return h!==a&&(o=(a=h)&&cf(e,h)),o}return u._value=i,u}function df(e,i){var o,a;function u(){var h=i.apply(this,arguments);return h!==a&&(o=(a=h)&&hf(e,h)),o}return u._value=i,u}function mf(e,i){var o="attr."+e;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(i==null)return this.tween(o,null);if(typeof i!="function")throw new Error;var a=ui(e);return this.tween(o,(a.local?ff:df)(a,i))}function _f(e,i){return function(){Mr(this,e).delay=+i.apply(this,arguments)}}function pf(e,i){return i=+i,function(){Mr(this,e).delay=i}}function gf(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?_f:pf)(i,e)):Wt(this.node(),i).delay}function vf(e,i){return function(){Xt(this,e).duration=+i.apply(this,arguments)}}function yf(e,i){return i=+i,function(){Xt(this,e).duration=i}}function wf(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?vf:yf)(i,e)):Wt(this.node(),i).duration}function xf(e,i){if(typeof i!="function")throw new Error;return function(){Xt(this,e).ease=i}}function Tf(e){var i=this._id;return arguments.length?this.each(xf(i,e)):Wt(this.node(),i).ease}function bf(e,i){return function(){var o=i.apply(this,arguments);if(typeof o!="function")throw new Error;Xt(this,e).ease=o}}function Lf(e){if(typeof e!="function")throw new Error;return this.each(bf(this._id,e))}function Mf(e){typeof e!="function"&&(e=Rs(e));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var h=i[u],c=h.length,d=a[u]=[],_,m=0;m<c;++m)(_=h[m])&&e.call(_,_.__data__,m,h)&&d.push(_);return new ie(a,this._parents,this._name,this._id)}function Pf(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,o=e._groups,a=i.length,u=o.length,h=Math.min(a,u),c=new Array(a),d=0;d<h;++d)for(var _=i[d],m=o[d],v=_.length,p=c[d]=new Array(v),y,T=0;T<v;++T)(y=_[T]||m[T])&&(p[T]=y);for(;d<a;++d)c[d]=i[d];return new ie(c,this._parents,this._name,this._id)}function Sf(e){return(e+"").trim().split(/^|\s+/).every(function(i){var o=i.indexOf(".");return o>=0&&(i=i.slice(0,o)),!i||i==="start"})}function Cf(e,i,o){var a,u,h=Sf(i)?Mr:Xt;return function(){var c=h(this,e),d=c.on;d!==a&&(u=(a=d).copy()).on(i,o),c.on=u}}function Ef(e,i){var o=this._id;return arguments.length<2?Wt(this.node(),o).on.on(e):this.each(Cf(o,e,i))}function kf(e){return function(){var i=this.parentNode;for(var o in this.__transition)if(+o!==e)return;i&&i.removeChild(this)}}function Af(){return this.on("end.remove",kf(this._id))}function Df(e){var i=this._name,o=this._id;typeof e!="function"&&(e=yr(e));for(var a=this._groups,u=a.length,h=new Array(u),c=0;c<u;++c)for(var d=a[c],_=d.length,m=h[c]=new Array(_),v,p,y=0;y<_;++y)(v=d[y])&&(p=e.call(v,v.__data__,y,d))&&("__data__"in v&&(p.__data__=v.__data__),m[y]=p,hi(m[y],i,o,y,m,Wt(v,o)));return new ie(h,this._parents,i,o)}function If(e){var i=this._name,o=this._id;typeof e!="function"&&(e=Fs(e));for(var a=this._groups,u=a.length,h=[],c=[],d=0;d<u;++d)for(var _=a[d],m=_.length,v,p=0;p<m;++p)if(v=_[p]){for(var y=e.call(v,v.__data__,p,_),T,C=Wt(v,o),b=0,k=y.length;b<k;++b)(T=y[b])&&hi(T,i,o,b,y,C);h.push(y),c.push(v)}return new ie(h,c,i,o)}var Bf=_n.prototype.constructor;function zf(){return new Bf(this._groups,this._parents)}function Of(e,i){var o,a,u;return function(){var h=Ne(this,e),c=(this.style.removeProperty(e),Ne(this,e));return h===c?null:h===o&&c===a?u:u=i(o=h,a=c)}}function aa(e){return function(){this.style.removeProperty(e)}}function Nf(e,i,o){var a,u=o+"",h;return function(){var c=Ne(this,e);return c===u?null:c===a?h:h=i(a=c,o)}}function Zf(e,i,o){var a,u,h;return function(){var c=Ne(this,e),d=o(this),_=d+"";return d==null&&(_=d=(this.style.removeProperty(e),Ne(this,e))),c===_?null:c===a&&_===u?h:(u=_,h=i(a=c,d))}}function Ff(e,i){var o,a,u,h="style."+i,c="end."+h,d;return function(){var _=Xt(this,e),m=_.on,v=_.value[h]==null?d||(d=aa(i)):void 0;(m!==o||u!==v)&&(a=(o=m).copy()).on(c,u=v),_.on=a}}function Rf(e,i,o){var a=(e+="")=="transform"?Wc:sa;return i==null?this.styleTween(e,Of(e,a)).on("end.style."+e,aa(e)):typeof i=="function"?this.styleTween(e,Zf(e,a,Pr(this,"style."+e,i))).each(Ff(this._id,e)):this.styleTween(e,Nf(e,a,i),o).on("end.style."+e,null)}function Hf(e,i,o){return function(a){this.style.setProperty(e,i.call(this,a),o)}}function Wf(e,i,o){var a,u;function h(){var c=i.apply(this,arguments);return c!==u&&(a=(u=c)&&Hf(e,c,o)),a}return h._value=i,h}function Uf(e,i,o){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(i==null)return this.tween(a,null);if(typeof i!="function")throw new Error;return this.tween(a,Wf(e,i,o??""))}function $f(e){return function(){this.textContent=e}}function qf(e){return function(){var i=e(this);this.textContent=i??""}}function Vf(e){return this.tween("text",typeof e=="function"?qf(Pr(this,"text",e)):$f(e==null?"":e+""))}function Yf(e){return function(i){this.textContent=e.call(this,i)}}function Gf(e){var i,o;function a(){var u=e.apply(this,arguments);return u!==o&&(i=(o=u)&&Yf(u)),i}return a._value=e,a}function Xf(e){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Gf(e))}function Kf(){for(var e=this._name,i=this._id,o=ua(),a=this._groups,u=a.length,h=0;h<u;++h)for(var c=a[h],d=c.length,_,m=0;m<d;++m)if(_=c[m]){var v=Wt(_,i);hi(_,e,o,m,c,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new ie(a,this._parents,e,o)}function Jf(){var e,i,o=this,a=o._id,u=o.size();return new Promise(function(h,c){var d={value:c},_={value:function(){--u===0&&h()}};o.each(function(){var m=Xt(this,a),v=m.on;v!==e&&(i=(e=v).copy(),i._.cancel.push(d),i._.interrupt.push(d),i._.end.push(_)),m.on=i}),u===0&&h()})}var jf=0;function ie(e,i,o,a){this._groups=e,this._parents=i,this._name=o,this._id=a}function ua(){return++jf}var te=_n.prototype;ie.prototype={constructor:ie,select:Df,selectAll:If,selectChild:te.selectChild,selectChildren:te.selectChildren,filter:Mf,merge:Pf,selection:zf,transition:Kf,call:te.call,nodes:te.nodes,node:te.node,size:te.size,empty:te.empty,each:te.each,on:Ef,attr:lf,attrTween:mf,style:Rf,styleTween:Uf,text:Vf,textTween:Xf,remove:Af,tween:ef,delay:gf,duration:wf,ease:Tf,easeVarying:Lf,end:Jf,[Symbol.iterator]:te[Symbol.iterator]};function Qf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var td={time:null,delay:0,duration:250,ease:Qf};function ed(e,i){for(var o;!(o=e.__transition)||!(o=o[i]);)if(!(e=e.parentNode))throw new Error(`transition ${i} not found`);return o}function nd(e){var i,o;e instanceof ie?(i=e._id,e=e._name):(i=ua(),(o=td).time=Lr(),e=e==null?null:e+"");for(var a=this._groups,u=a.length,h=0;h<u;++h)for(var c=a[h],d=c.length,_,m=0;m<d;++m)(_=c[m])&&hi(_,e,i,m,c,o||ed(_,i));return new ie(a,this._parents,e,i)}_n.prototype.interrupt=jc;_n.prototype.transition=nd;const dr=Math.PI,mr=2*dr,_e=1e-6,id=mr-_e;function la(e){this._+=e[0];for(let i=1,o=e.length;i<o;++i)this._+=arguments[i]+e[i]}function rd(e){let i=Math.floor(e);if(!(i>=0))throw new Error(`invalid digits: ${e}`);if(i>15)return la;const o=10**i;return function(a){this._+=a[0];for(let u=1,h=a.length;u<h;++u)this._+=Math.round(arguments[u]*o)/o+a[u]}}class od{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?la:rd(i)}moveTo(i,o){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+o}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,o){this._append`L${this._x1=+i},${this._y1=+o}`}quadraticCurveTo(i,o,a,u){this._append`Q${+i},${+o},${this._x1=+a},${this._y1=+u}`}bezierCurveTo(i,o,a,u,h,c){this._append`C${+i},${+o},${+a},${+u},${this._x1=+h},${this._y1=+c}`}arcTo(i,o,a,u,h){if(i=+i,o=+o,a=+a,u=+u,h=+h,h<0)throw new Error(`negative radius: ${h}`);let c=this._x1,d=this._y1,_=a-i,m=u-o,v=c-i,p=d-o,y=v*v+p*p;if(this._x1===null)this._append`M${this._x1=i},${this._y1=o}`;else if(y>_e)if(!(Math.abs(p*_-m*v)>_e)||!h)this._append`L${this._x1=i},${this._y1=o}`;else{let T=a-c,C=u-d,b=_*_+m*m,k=T*T+C*C,z=Math.sqrt(b),R=Math.sqrt(y),I=h*Math.tan((dr-Math.acos((b+y-k)/(2*z*R)))/2),N=I/R,Y=I/z;Math.abs(N-1)>_e&&this._append`L${i+N*v},${o+N*p}`,this._append`A${h},${h},0,0,${+(p*T>v*C)},${this._x1=i+Y*_},${this._y1=o+Y*m}`}}arc(i,o,a,u,h,c){if(i=+i,o=+o,a=+a,c=!!c,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(u),_=a*Math.sin(u),m=i+d,v=o+_,p=1^c,y=c?u-h:h-u;this._x1===null?this._append`M${m},${v}`:(Math.abs(this._x1-m)>_e||Math.abs(this._y1-v)>_e)&&this._append`L${m},${v}`,a&&(y<0&&(y=y%mr+mr),y>id?this._append`A${a},${a},0,1,${p},${i-d},${o-_}A${a},${a},0,1,${p},${this._x1=m},${this._y1=v}`:y>_e&&this._append`A${a},${a},0,${+(y>=dr)},${p},${this._x1=i+a*Math.cos(h)},${this._y1=o+a*Math.sin(h)}`)}rect(i,o,a,u){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+o}h${a=+a}v${+u}h${-a}Z`}toString(){return this._}}function sd(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ei(e,i){if(!isFinite(e)||e===0)return null;var o=(e=i?e.toExponential(i-1):e.toExponential()).indexOf("e"),a=e.slice(0,o);return[a.length>1?a[0]+a.slice(2):a,+e.slice(o+1)]}function Fe(e){return e=ei(Math.abs(e)),e?e[1]:NaN}function ad(e,i){return function(o,a){for(var u=o.length,h=[],c=0,d=e[0],_=0;u>0&&d>0&&(_+d+1>a&&(d=Math.max(1,a-_)),h.push(o.substring(u-=d,u+d)),!((_+=d+1)>a));)d=e[c=(c+1)%e.length];return h.reverse().join(i)}}function ud(e){return function(i){return i.replace(/[0-9]/g,function(o){return e[+o]})}}var ld=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ni(e){if(!(i=ld.exec(e)))throw new Error("invalid format: "+e);var i;return new Sr({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}ni.prototype=Sr.prototype;function Sr(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Sr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hd(e){t:for(var i=e.length,o=1,a=-1,u;o<i;++o)switch(e[o]){case".":a=u=o;break;case"0":a===0&&(a=o),u=o;break;default:if(!+e[o])break t;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(u+1):e}var ii;function cd(e,i){var o=ei(e,i);if(!o)return ii=void 0,e.toPrecision(i);var a=o[0],u=o[1],h=u-(ii=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,c=a.length;return h===c?a:h>c?a+new Array(h-c+1).join("0"):h>0?a.slice(0,h)+"."+a.slice(h):"0."+new Array(1-h).join("0")+ei(e,Math.max(0,i+h-1))[0]}function us(e,i){var o=ei(e,i);if(!o)return e+"";var a=o[0],u=o[1];return u<0?"0."+new Array(-u).join("0")+a:a.length>u+1?a.slice(0,u+1)+"."+a.slice(u+1):a+new Array(u-a.length+2).join("0")}const ls={"%":(e,i)=>(e*100).toFixed(i),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sd,e:(e,i)=>e.toExponential(i),f:(e,i)=>e.toFixed(i),g:(e,i)=>e.toPrecision(i),o:e=>Math.round(e).toString(8),p:(e,i)=>us(e*100,i),r:us,s:cd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function hs(e){return e}var cs=Array.prototype.map,fs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function fd(e){var i=e.grouping===void 0||e.thousands===void 0?hs:ad(cs.call(e.grouping,Number),e.thousands+""),o=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?hs:ud(cs.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function m(p,y){p=ni(p);var T=p.fill,C=p.align,b=p.sign,k=p.symbol,z=p.zero,R=p.width,I=p.comma,N=p.precision,Y=p.trim,S=p.type;S==="n"?(I=!0,S="g"):ls[S]||(N===void 0&&(N=12),Y=!0,S="g"),(z||T==="0"&&C==="=")&&(z=!0,T="0",C="=");var O=(y&&y.prefix!==void 0?y.prefix:"")+(k==="$"?o:k==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():""),ot=(k==="$"?a:/[%p]/.test(S)?c:"")+(y&&y.suffix!==void 0?y.suffix:""),nt=ls[S],U=/[defgprs%]/.test(S);N=N===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function W(E){var q=O,H=ot,st,lt,at;if(S==="c")H=nt(E)+H,E="";else{E=+E;var Z=E<0||1/E<0;if(E=isNaN(E)?_:nt(Math.abs(E),N),Y&&(E=hd(E)),Z&&+E==0&&b!=="+"&&(Z=!1),q=(Z?b==="("?b:d:b==="-"||b==="("?"":b)+q,H=(S==="s"&&!isNaN(E)&&ii!==void 0?fs[8+ii/3]:"")+H+(Z&&b==="("?")":""),U){for(st=-1,lt=E.length;++st<lt;)if(at=E.charCodeAt(st),48>at||at>57){H=(at===46?u+E.slice(st+1):E.slice(st))+H,E=E.slice(0,st);break}}}I&&!z&&(E=i(E,1/0));var gt=q.length+E.length+H.length,B=gt<R?new Array(R-gt+1).join(T):"";switch(I&&z&&(E=i(B+E,B.length?R-H.length:1/0),B=""),C){case"<":E=q+E+H+B;break;case"=":E=q+B+E+H;break;case"^":E=B.slice(0,gt=B.length>>1)+q+E+H+B.slice(gt);break;default:E=B+q+E+H;break}return h(E)}return W.toString=function(){return p+""},W}function v(p,y){var T=Math.max(-8,Math.min(8,Math.floor(Fe(y)/3)))*3,C=Math.pow(10,-T),b=m((p=ni(p),p.type="f",p),{suffix:fs[8+T/3]});return function(k){return b(C*k)}}return{format:m,formatPrefix:v}}var Rn,ha,ca;dd({thousands:",",grouping:[3],currency:["$",""]});function dd(e){return Rn=fd(e),ha=Rn.format,ca=Rn.formatPrefix,Rn}function md(e){return Math.max(0,-Fe(Math.abs(e)))}function _d(e,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fe(i)/3)))*3-Fe(Math.abs(e)))}function pd(e,i){return e=Math.abs(e),i=Math.abs(i)-e,Math.max(0,Fe(i)-Fe(e))+1}function fa(e,i){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(i).domain(e);break}return this}function gd(e){return function(){return e}}function vd(e){return+e}var ds=[0,1];function Ie(e){return e}function _r(e,i){return(i-=e=+e)?function(o){return(o-e)/i}:gd(isNaN(i)?NaN:.5)}function yd(e,i){var o;return e>i&&(o=e,e=i,i=o),function(a){return Math.max(e,Math.min(i,a))}}function wd(e,i,o){var a=e[0],u=e[1],h=i[0],c=i[1];return u<a?(a=_r(u,a),h=o(c,h)):(a=_r(a,u),h=o(h,c)),function(d){return h(a(d))}}function xd(e,i,o){var a=Math.min(e.length,i.length)-1,u=new Array(a),h=new Array(a),c=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),i=i.slice().reverse());++c<a;)u[c]=_r(e[c],e[c+1]),h[c]=o(i[c],i[c+1]);return function(d){var _=Tl(e,d,1,a)-1;return h[_](u[_](d))}}function da(e,i){return i.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Td(){var e=ds,i=ds,o=br,a,u,h,c=Ie,d,_,m;function v(){var y=Math.min(e.length,i.length);return c!==Ie&&(c=yd(e[0],e[y-1])),d=y>2?xd:wd,_=m=null,p}function p(y){return y==null||isNaN(y=+y)?h:(_||(_=d(e.map(a),i,o)))(a(c(y)))}return p.invert=function(y){return c(u((m||(m=d(i,e.map(a),Rt)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,vd),v()):e.slice()},p.range=function(y){return arguments.length?(i=Array.from(y),v()):i.slice()},p.rangeRound=function(y){return i=Array.from(y),o=Fc,v()},p.clamp=function(y){return arguments.length?(c=y?!0:Ie,v()):c!==Ie},p.interpolate=function(y){return arguments.length?(o=y,v()):o},p.unknown=function(y){return arguments.length?(h=y,p):h},function(y,T){return a=y,u=T,v()}}function ma(){return Td()(Ie,Ie)}function bd(e,i,o,a){var u=rr(e,i,o),h;switch(a=ni(a??",f"),a.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(i));return a.precision==null&&!isNaN(h=_d(u,c))&&(a.precision=h),ca(a,c)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(h=pd(u,Math.max(Math.abs(e),Math.abs(i))))&&(a.precision=h-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(h=md(u))&&(a.precision=h-(a.type==="%")*2);break}}return ha(a)}function Ld(e){var i=e.domain;return e.ticks=function(o){var a=i();return Pl(a[0],a[a.length-1],o??10)},e.tickFormat=function(o,a){var u=i();return bd(u[0],u[u.length-1],o??10,a)},e.nice=function(o){o==null&&(o=10);var a=i(),u=0,h=a.length-1,c=a[u],d=a[h],_,m,v=10;for(d<c&&(m=c,c=d,d=m,m=u,u=h,h=m);v-- >0;){if(m=ir(c,d,o),m===_)return a[u]=c,a[h]=d,i(a);if(m>0)c=Math.floor(c/m)*m,d=Math.ceil(d/m)*m;else if(m<0)c=Math.ceil(c*m)/m,d=Math.floor(d*m)/m;else break;_=m}return e},e}function _a(){var e=ma();return e.copy=function(){return da(e,_a())},fa.apply(e,arguments),Ld(e)}function Md(e,i){e=e.slice();var o=0,a=e.length-1,u=e[o],h=e[a],c;return h<u&&(c=o,o=a,a=c,c=u,u=h,h=c),e[o]=i.floor(u),e[a]=i.ceil(h),e}const Xi=new Date,Ki=new Date;function yt(e,i,o,a){function u(h){return e(h=arguments.length===0?new Date:new Date(+h)),h}return u.floor=h=>(e(h=new Date(+h)),h),u.ceil=h=>(e(h=new Date(h-1)),i(h,1),e(h),h),u.round=h=>{const c=u(h),d=u.ceil(h);return h-c<d-h?c:d},u.offset=(h,c)=>(i(h=new Date(+h),c==null?1:Math.floor(c)),h),u.range=(h,c,d)=>{const _=[];if(h=u.ceil(h),d=d==null?1:Math.floor(d),!(h<c)||!(d>0))return _;let m;do _.push(m=new Date(+h)),i(h,d),e(h);while(m<h&&h<c);return _},u.filter=h=>yt(c=>{if(c>=c)for(;e(c),!h(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;i(c,-1),!h(c););else for(;--d>=0;)for(;i(c,1),!h(c););}),o&&(u.count=(h,c)=>(Xi.setTime(+h),Ki.setTime(+c),e(Xi),e(Ki),Math.floor(o(Xi,Ki))),u.every=h=>(h=Math.floor(h),!isFinite(h)||!(h>0)?null:h>1?u.filter(a?c=>a(c)%h===0:c=>u.count(0,c)%h===0):u)),u}const ri=yt(()=>{},(e,i)=>{e.setTime(+e+i)},(e,i)=>i-e);ri.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yt(i=>{i.setTime(Math.floor(i/e)*e)},(i,o)=>{i.setTime(+i+o*e)},(i,o)=>(o-i)/e):ri);ri.range;const ee=1e3,zt=ee*60,ne=zt*60,re=ne*24,Cr=re*7,ms=re*30,Ji=re*365,Be=yt(e=>{e.setTime(e-e.getMilliseconds())},(e,i)=>{e.setTime(+e+i*ee)},(e,i)=>(i-e)/ee,e=>e.getUTCSeconds());Be.range;const Er=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ee)},(e,i)=>{e.setTime(+e+i*zt)},(e,i)=>(i-e)/zt,e=>e.getMinutes());Er.range;const Pd=yt(e=>{e.setUTCSeconds(0,0)},(e,i)=>{e.setTime(+e+i*zt)},(e,i)=>(i-e)/zt,e=>e.getUTCMinutes());Pd.range;const ci=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ee-e.getMinutes()*zt)},(e,i)=>{e.setTime(+e+i*ne)},(e,i)=>(i-e)/ne,e=>e.getHours());ci.range;const Sd=yt(e=>{e.setUTCMinutes(0,0,0)},(e,i)=>{e.setTime(+e+i*ne)},(e,i)=>(i-e)/ne,e=>e.getUTCHours());Sd.range;const gn=yt(e=>e.setHours(0,0,0,0),(e,i)=>e.setDate(e.getDate()+i),(e,i)=>(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*zt)/re,e=>e.getDate()-1);gn.range;const kr=yt(e=>{e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i)},(e,i)=>(i-e)/re,e=>e.getUTCDate()-1);kr.range;const Cd=yt(e=>{e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i)},(e,i)=>(i-e)/re,e=>Math.floor(e/re));Cd.range;function xe(e){return yt(i=>{i.setDate(i.getDate()-(i.getDay()+7-e)%7),i.setHours(0,0,0,0)},(i,o)=>{i.setDate(i.getDate()+o*7)},(i,o)=>(o-i-(o.getTimezoneOffset()-i.getTimezoneOffset())*zt)/Cr)}const fi=xe(0),oi=xe(1),Ed=xe(2),kd=xe(3),Re=xe(4),Ad=xe(5),Dd=xe(6);fi.range;oi.range;Ed.range;kd.range;Re.range;Ad.range;Dd.range;function Te(e){return yt(i=>{i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-e)%7),i.setUTCHours(0,0,0,0)},(i,o)=>{i.setUTCDate(i.getUTCDate()+o*7)},(i,o)=>(o-i)/Cr)}const pa=Te(0),si=Te(1),Id=Te(2),Bd=Te(3),He=Te(4),zd=Te(5),Od=Te(6);pa.range;si.range;Id.range;Bd.range;He.range;zd.range;Od.range;const Ar=yt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,i)=>{e.setMonth(e.getMonth()+i)},(e,i)=>i.getMonth()-e.getMonth()+(i.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ar.range;const Nd=yt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCMonth(e.getUTCMonth()+i)},(e,i)=>i.getUTCMonth()-e.getUTCMonth()+(i.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Nd.range;const oe=yt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,i)=>{e.setFullYear(e.getFullYear()+i)},(e,i)=>i.getFullYear()-e.getFullYear(),e=>e.getFullYear());oe.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(i=>{i.setFullYear(Math.floor(i.getFullYear()/e)*e),i.setMonth(0,1),i.setHours(0,0,0,0)},(i,o)=>{i.setFullYear(i.getFullYear()+o*e)});oe.range;const we=yt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i)},(e,i)=>i.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());we.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(i=>{i.setUTCFullYear(Math.floor(i.getUTCFullYear()/e)*e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,o)=>{i.setUTCFullYear(i.getUTCFullYear()+o*e)});we.range;function Zd(e,i,o,a,u,h){const c=[[Be,1,ee],[Be,5,5*ee],[Be,15,15*ee],[Be,30,30*ee],[h,1,zt],[h,5,5*zt],[h,15,15*zt],[h,30,30*zt],[u,1,ne],[u,3,3*ne],[u,6,6*ne],[u,12,12*ne],[a,1,re],[a,2,2*re],[o,1,Cr],[i,1,ms],[i,3,3*ms],[e,1,Ji]];function d(m,v,p){const y=v<m;y&&([m,v]=[v,m]);const T=p&&typeof p.range=="function"?p:_(m,v,p),C=T?T.range(m,+v+1):[];return y?C.reverse():C}function _(m,v,p){const y=Math.abs(v-m)/p,T=vr(([,,k])=>k).right(c,y);if(T===c.length)return e.every(rr(m/Ji,v/Ji,p));if(T===0)return ri.every(Math.max(rr(m,v,p),1));const[C,b]=c[y/c[T-1][2]<c[T][2]/y?T-1:T];return C.every(b)}return[d,_]}const[Fd,Rd]=Zd(oe,Ar,fi,gn,ci,Er);function ji(e){if(0<=e.y&&e.y<100){var i=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return i.setFullYear(e.y),i}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Qi(e){if(0<=e.y&&e.y<100){var i=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return i.setUTCFullYear(e.y),i}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nn(e,i,o){return{y:e,m:i,d:o,H:0,M:0,S:0,L:0}}function Hd(e){var i=e.dateTime,o=e.date,a=e.time,u=e.periods,h=e.days,c=e.shortDays,d=e.months,_=e.shortMonths,m=rn(u),v=on(u),p=rn(h),y=on(h),T=rn(c),C=on(c),b=rn(d),k=on(d),z=rn(_),R=on(_),I={a:at,A:Z,b:gt,B,c:null,d:ws,e:ws,f:hm,g:wm,G:Tm,H:am,I:um,j:lm,L:ga,m:cm,M:fm,p:et,q:vt,Q:bs,s:Ls,S:dm,u:mm,U:_m,V:pm,w:gm,W:vm,x:null,X:null,y:ym,Y:xm,Z:bm,"%":Ts},N={a:wt,A:dt,b:ut,B:j,c:null,d:xs,e:xs,f:Sm,g:Nm,G:Fm,H:Lm,I:Mm,j:Pm,L:ya,m:Cm,M:Em,p:Ot,q:Ut,Q:bs,s:Ls,S:km,u:Am,U:Dm,V:Im,w:Bm,W:zm,x:null,X:null,y:Om,Y:Zm,Z:Rm,"%":Ts},Y={a:U,A:W,b:E,B:q,c:H,d:vs,e:vs,f:im,g:gs,G:ps,H:ys,I:ys,j:Qd,L:nm,m:jd,M:tm,p:nt,q:Jd,Q:om,s:sm,S:em,u:Vd,U:Yd,V:Gd,w:qd,W:Xd,x:st,X:lt,y:gs,Y:ps,Z:Kd,"%":rm};I.x=S(o,I),I.X=S(a,I),I.c=S(i,I),N.x=S(o,N),N.X=S(a,N),N.c=S(i,N);function S(D,X){return function(Q){var P=[],xt=-1,ht=0,Pt=D.length,St,Nt,le;for(Q instanceof Date||(Q=new Date(+Q));++xt<Pt;)D.charCodeAt(xt)===37&&(P.push(D.slice(ht,xt)),(Nt=_s[St=D.charAt(++xt)])!=null?St=D.charAt(++xt):Nt=St==="e"?" ":"0",(le=X[St])&&(St=le(Q,Nt)),P.push(St),ht=xt+1);return P.push(D.slice(ht,xt)),P.join("")}}function O(D,X){return function(Q){var P=nn(1900,void 0,1),xt=ot(P,D,Q+="",0),ht,Pt;if(xt!=Q.length)return null;if("Q"in P)return new Date(P.Q);if("s"in P)return new Date(P.s*1e3+("L"in P?P.L:0));if(X&&!("Z"in P)&&(P.Z=0),"p"in P&&(P.H=P.H%12+P.p*12),P.m===void 0&&(P.m="q"in P?P.q:0),"V"in P){if(P.V<1||P.V>53)return null;"w"in P||(P.w=1),"Z"in P?(ht=Qi(nn(P.y,0,1)),Pt=ht.getUTCDay(),ht=Pt>4||Pt===0?si.ceil(ht):si(ht),ht=kr.offset(ht,(P.V-1)*7),P.y=ht.getUTCFullYear(),P.m=ht.getUTCMonth(),P.d=ht.getUTCDate()+(P.w+6)%7):(ht=ji(nn(P.y,0,1)),Pt=ht.getDay(),ht=Pt>4||Pt===0?oi.ceil(ht):oi(ht),ht=gn.offset(ht,(P.V-1)*7),P.y=ht.getFullYear(),P.m=ht.getMonth(),P.d=ht.getDate()+(P.w+6)%7)}else("W"in P||"U"in P)&&("w"in P||(P.w="u"in P?P.u%7:"W"in P?1:0),Pt="Z"in P?Qi(nn(P.y,0,1)).getUTCDay():ji(nn(P.y,0,1)).getDay(),P.m=0,P.d="W"in P?(P.w+6)%7+P.W*7-(Pt+5)%7:P.w+P.U*7-(Pt+6)%7);return"Z"in P?(P.H+=P.Z/100|0,P.M+=P.Z%100,Qi(P)):ji(P)}}function ot(D,X,Q,P){for(var xt=0,ht=X.length,Pt=Q.length,St,Nt;xt<ht;){if(P>=Pt)return-1;if(St=X.charCodeAt(xt++),St===37){if(St=X.charAt(xt++),Nt=Y[St in _s?X.charAt(xt++):St],!Nt||(P=Nt(D,Q,P))<0)return-1}else if(St!=Q.charCodeAt(P++))return-1}return P}function nt(D,X,Q){var P=m.exec(X.slice(Q));return P?(D.p=v.get(P[0].toLowerCase()),Q+P[0].length):-1}function U(D,X,Q){var P=T.exec(X.slice(Q));return P?(D.w=C.get(P[0].toLowerCase()),Q+P[0].length):-1}function W(D,X,Q){var P=p.exec(X.slice(Q));return P?(D.w=y.get(P[0].toLowerCase()),Q+P[0].length):-1}function E(D,X,Q){var P=z.exec(X.slice(Q));return P?(D.m=R.get(P[0].toLowerCase()),Q+P[0].length):-1}function q(D,X,Q){var P=b.exec(X.slice(Q));return P?(D.m=k.get(P[0].toLowerCase()),Q+P[0].length):-1}function H(D,X,Q){return ot(D,i,X,Q)}function st(D,X,Q){return ot(D,o,X,Q)}function lt(D,X,Q){return ot(D,a,X,Q)}function at(D){return c[D.getDay()]}function Z(D){return h[D.getDay()]}function gt(D){return _[D.getMonth()]}function B(D){return d[D.getMonth()]}function et(D){return u[+(D.getHours()>=12)]}function vt(D){return 1+~~(D.getMonth()/3)}function wt(D){return c[D.getUTCDay()]}function dt(D){return h[D.getUTCDay()]}function ut(D){return _[D.getUTCMonth()]}function j(D){return d[D.getUTCMonth()]}function Ot(D){return u[+(D.getUTCHours()>=12)]}function Ut(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var X=S(D+="",I);return X.toString=function(){return D},X},parse:function(D){var X=O(D+="",!1);return X.toString=function(){return D},X},utcFormat:function(D){var X=S(D+="",N);return X.toString=function(){return D},X},utcParse:function(D){var X=O(D+="",!0);return X.toString=function(){return D},X}}}var _s={"-":"",_:" ",0:"0"},Lt=/^\s*\d+/,Wd=/^%/,Ud=/[\\^$*+?|[\]().{}]/g;function rt(e,i,o){var a=e<0?"-":"",u=(a?-e:e)+"",h=u.length;return a+(h<o?new Array(o-h+1).join(i)+u:u)}function $d(e){return e.replace(Ud,"\\$&")}function rn(e){return new RegExp("^(?:"+e.map($d).join("|")+")","i")}function on(e){return new Map(e.map((i,o)=>[i.toLowerCase(),o]))}function qd(e,i,o){var a=Lt.exec(i.slice(o,o+1));return a?(e.w=+a[0],o+a[0].length):-1}function Vd(e,i,o){var a=Lt.exec(i.slice(o,o+1));return a?(e.u=+a[0],o+a[0].length):-1}function Yd(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.U=+a[0],o+a[0].length):-1}function Gd(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.V=+a[0],o+a[0].length):-1}function Xd(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.W=+a[0],o+a[0].length):-1}function ps(e,i,o){var a=Lt.exec(i.slice(o,o+4));return a?(e.y=+a[0],o+a[0].length):-1}function gs(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),o+a[0].length):-1}function Kd(e,i,o){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(o,o+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),o+a[0].length):-1}function Jd(e,i,o){var a=Lt.exec(i.slice(o,o+1));return a?(e.q=a[0]*3-3,o+a[0].length):-1}function jd(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.m=a[0]-1,o+a[0].length):-1}function vs(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.d=+a[0],o+a[0].length):-1}function Qd(e,i,o){var a=Lt.exec(i.slice(o,o+3));return a?(e.m=0,e.d=+a[0],o+a[0].length):-1}function ys(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.H=+a[0],o+a[0].length):-1}function tm(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.M=+a[0],o+a[0].length):-1}function em(e,i,o){var a=Lt.exec(i.slice(o,o+2));return a?(e.S=+a[0],o+a[0].length):-1}function nm(e,i,o){var a=Lt.exec(i.slice(o,o+3));return a?(e.L=+a[0],o+a[0].length):-1}function im(e,i,o){var a=Lt.exec(i.slice(o,o+6));return a?(e.L=Math.floor(a[0]/1e3),o+a[0].length):-1}function rm(e,i,o){var a=Wd.exec(i.slice(o,o+1));return a?o+a[0].length:-1}function om(e,i,o){var a=Lt.exec(i.slice(o));return a?(e.Q=+a[0],o+a[0].length):-1}function sm(e,i,o){var a=Lt.exec(i.slice(o));return a?(e.s=+a[0],o+a[0].length):-1}function ws(e,i){return rt(e.getDate(),i,2)}function am(e,i){return rt(e.getHours(),i,2)}function um(e,i){return rt(e.getHours()%12||12,i,2)}function lm(e,i){return rt(1+gn.count(oe(e),e),i,3)}function ga(e,i){return rt(e.getMilliseconds(),i,3)}function hm(e,i){return ga(e,i)+"000"}function cm(e,i){return rt(e.getMonth()+1,i,2)}function fm(e,i){return rt(e.getMinutes(),i,2)}function dm(e,i){return rt(e.getSeconds(),i,2)}function mm(e){var i=e.getDay();return i===0?7:i}function _m(e,i){return rt(fi.count(oe(e)-1,e),i,2)}function va(e){var i=e.getDay();return i>=4||i===0?Re(e):Re.ceil(e)}function pm(e,i){return e=va(e),rt(Re.count(oe(e),e)+(oe(e).getDay()===4),i,2)}function gm(e){return e.getDay()}function vm(e,i){return rt(oi.count(oe(e)-1,e),i,2)}function ym(e,i){return rt(e.getFullYear()%100,i,2)}function wm(e,i){return e=va(e),rt(e.getFullYear()%100,i,2)}function xm(e,i){return rt(e.getFullYear()%1e4,i,4)}function Tm(e,i){var o=e.getDay();return e=o>=4||o===0?Re(e):Re.ceil(e),rt(e.getFullYear()%1e4,i,4)}function bm(e){var i=e.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+rt(i/60|0,"0",2)+rt(i%60,"0",2)}function xs(e,i){return rt(e.getUTCDate(),i,2)}function Lm(e,i){return rt(e.getUTCHours(),i,2)}function Mm(e,i){return rt(e.getUTCHours()%12||12,i,2)}function Pm(e,i){return rt(1+kr.count(we(e),e),i,3)}function ya(e,i){return rt(e.getUTCMilliseconds(),i,3)}function Sm(e,i){return ya(e,i)+"000"}function Cm(e,i){return rt(e.getUTCMonth()+1,i,2)}function Em(e,i){return rt(e.getUTCMinutes(),i,2)}function km(e,i){return rt(e.getUTCSeconds(),i,2)}function Am(e){var i=e.getUTCDay();return i===0?7:i}function Dm(e,i){return rt(pa.count(we(e)-1,e),i,2)}function wa(e){var i=e.getUTCDay();return i>=4||i===0?He(e):He.ceil(e)}function Im(e,i){return e=wa(e),rt(He.count(we(e),e)+(we(e).getUTCDay()===4),i,2)}function Bm(e){return e.getUTCDay()}function zm(e,i){return rt(si.count(we(e)-1,e),i,2)}function Om(e,i){return rt(e.getUTCFullYear()%100,i,2)}function Nm(e,i){return e=wa(e),rt(e.getUTCFullYear()%100,i,2)}function Zm(e,i){return rt(e.getUTCFullYear()%1e4,i,4)}function Fm(e,i){var o=e.getUTCDay();return e=o>=4||o===0?He(e):He.ceil(e),rt(e.getUTCFullYear()%1e4,i,4)}function Rm(){return"+0000"}function Ts(){return"%"}function bs(e){return+e}function Ls(e){return Math.floor(+e/1e3)}var De,Dr;Hm({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Hm(e){return De=Hd(e),Dr=De.format,De.parse,De.utcFormat,De.utcParse,De}function Wm(e){return new Date(e)}function Um(e){return e instanceof Date?+e:+new Date(+e)}function xa(e,i,o,a,u,h,c,d,_,m){var v=ma(),p=v.invert,y=v.domain,T=m(".%L"),C=m(":%S"),b=m("%I:%M"),k=m("%I %p"),z=m("%a %d"),R=m("%b %d"),I=m("%B"),N=m("%Y");function Y(S){return(_(S)<S?T:d(S)<S?C:c(S)<S?b:h(S)<S?k:a(S)<S?u(S)<S?z:R:o(S)<S?I:N)(S)}return v.invert=function(S){return new Date(p(S))},v.domain=function(S){return arguments.length?y(Array.from(S,Um)):y().map(Wm)},v.ticks=function(S){var O=y();return e(O[0],O[O.length-1],S??10)},v.tickFormat=function(S,O){return O==null?Y:m(O)},v.nice=function(S){var O=y();return(!S||typeof S.range!="function")&&(S=i(O[0],O[O.length-1],S??10)),S?y(Md(O,S)):v},v.copy=function(){return da(v,xa(e,i,o,a,u,h,c,d,_,m))},v}function $m(){return fa.apply(xa(Fd,Rd,oe,Ar,fi,gn,ci,Er,Be,Dr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bt(e){return function(){return e}}function Ta(e){let i=3;return e.digits=function(o){if(!arguments.length)return i;if(o==null)i=null;else{const a=Math.floor(o);if(!(a>=0))throw new RangeError(`invalid digits: ${o}`);i=a}return e},()=>new od(i)}function ba(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function La(e){this._context=e}La.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,i){switch(e=+e,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;default:this._context.lineTo(e,i);break}}};function Ma(e){return new La(e)}function Pa(e){return e[0]}function Sa(e){return e[1]}function Ca(e,i){var o=bt(!0),a=null,u=Ma,h=null,c=Ta(d);e=typeof e=="function"?e:e===void 0?Pa:bt(e),i=typeof i=="function"?i:i===void 0?Sa:bt(i);function d(_){var m,v=(_=ba(_)).length,p,y=!1,T;for(a==null&&(h=u(T=c())),m=0;m<=v;++m)!(m<v&&o(p=_[m],m,_))===y&&((y=!y)?h.lineStart():h.lineEnd()),y&&h.point(+e(p,m,_),+i(p,m,_));if(T)return h=null,T+""||null}return d.x=function(_){return arguments.length?(e=typeof _=="function"?_:bt(+_),d):e},d.y=function(_){return arguments.length?(i=typeof _=="function"?_:bt(+_),d):i},d.defined=function(_){return arguments.length?(o=typeof _=="function"?_:bt(!!_),d):o},d.curve=function(_){return arguments.length?(u=_,a!=null&&(h=u(a)),d):u},d.context=function(_){return arguments.length?(_==null?a=h=null:h=u(a=_),d):a},d}function qm(e,i,o){var a=null,u=bt(!0),h=null,c=Ma,d=null,_=Ta(m);e=typeof e=="function"?e:e===void 0?Pa:bt(+e),i=typeof i=="function"?i:bt(i===void 0?0:+i),o=typeof o=="function"?o:o===void 0?Sa:bt(+o);function m(p){var y,T,C,b=(p=ba(p)).length,k,z=!1,R,I=new Array(b),N=new Array(b);for(h==null&&(d=c(R=_())),y=0;y<=b;++y){if(!(y<b&&u(k=p[y],y,p))===z)if(z=!z)T=y,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),C=y-1;C>=T;--C)d.point(I[C],N[C]);d.lineEnd(),d.areaEnd()}z&&(I[y]=+e(k,y,p),N[y]=+i(k,y,p),d.point(a?+a(k,y,p):I[y],o?+o(k,y,p):N[y]))}if(R)return d=null,R+""||null}function v(){return Ca().defined(u).curve(c).context(h)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:bt(+p),a=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:bt(+p),m):e},m.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:bt(+p),m):a},m.y=function(p){return arguments.length?(i=typeof p=="function"?p:bt(+p),o=null,m):i},m.y0=function(p){return arguments.length?(i=typeof p=="function"?p:bt(+p),m):i},m.y1=function(p){return arguments.length?(o=p==null?null:typeof p=="function"?p:bt(+p),m):o},m.lineX0=m.lineY0=function(){return v().x(e).y(i)},m.lineY1=function(){return v().x(e).y(o)},m.lineX1=function(){return v().x(a).y(i)},m.defined=function(p){return arguments.length?(u=typeof p=="function"?p:bt(!!p),m):u},m.curve=function(p){return arguments.length?(c=p,h!=null&&(d=c(h)),m):c},m.context=function(p){return arguments.length?(p==null?h=d=null:d=c(h=p),m):h},m}function Ms(e){return e<0?-1:1}function Ps(e,i,o){var a=e._x1-e._x0,u=i-e._x1,h=(e._y1-e._y0)/(a||u<0&&-0),c=(o-e._y1)/(u||a<0&&-0),d=(h*u+c*a)/(a+u);return(Ms(h)+Ms(c))*Math.min(Math.abs(h),Math.abs(c),.5*Math.abs(d))||0}function Ss(e,i){var o=e._x1-e._x0;return o?(3*(e._y1-e._y0)/o-i)/2:i}function tr(e,i,o){var a=e._x0,u=e._y0,h=e._x1,c=e._y1,d=(h-a)/3;e._context.bezierCurveTo(a+d,u+d*i,h-d,c-d*o,h,c)}function ai(e){this._context=e}ai.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tr(this,this._t0,Ss(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,i){var o=NaN;if(e=+e,i=+i,!(e===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3,tr(this,Ss(this,o=Ps(this,e,i)),o);break;default:tr(this,this._t0,o=Ps(this,e,i));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._t0=o}}};Object.create(ai.prototype).point=function(e,i){ai.prototype.point.call(this,i,e)};function Cs(e){return new ai(e)}function cn(e,i,o){this.k=e,this.x=i,this.y=o}cn.prototype={constructor:cn,scale:function(e){return e===1?this:new cn(this.k*e,this.x,this.y)},translate:function(e,i){return e===0&i===0?this:new cn(this.k,this.x+this.k*e,this.y+this.k*i)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};cn.prototype;const Vm="https://gemcxasoc2.execute-api.eu-north-1.amazonaws.com/dev/getTideData";function sn(e,i){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()||i}async function Ym(){const e=await pr(Vm);return V.tideData=await e.json(),V.tideData}function Gm(e){const i=new Date,o=document.getElementById("date-selector");o.innerHTML="";for(let u=0;u<6;u++){const h=new Date(i);h.setDate(i.getDate()+u);const c=h.toISOString().split("T")[0],d=document.createElement("button"),_=h.toLocaleString("en-US",{weekday:"short"});d.textContent=`${_} ${h.getDate()}`,d.dataset.date=c,d.setAttribute("aria-label",h.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})),d.addEventListener("click",()=>{V.selectedDate=c,document.querySelectorAll("#date-selector button").forEach(m=>m.classList.remove("selected")),d.classList.add("selected"),e()}),o.appendChild(d)}const a=o.querySelector("button");a&&(a.classList.add("selected"),V.selectedDate=a.dataset.date)}function Ea(){const e=document.getElementById("tide-front-inner")||document.getElementById("tide-box");if(!e)return;if(e.innerHTML="",!V.selectedBeach||!V.closestTideStation||!V.tideData[V.closestTideStation]){e.innerHTML='<div class="loading-skeleton">Unable to load tide data.</div>';return}const i=V.tideData[V.closestTideStation],o=new Date,a=i.map(b=>({...b,DateTime:new Date(b.DateTime)})).filter(b=>b.DateTime>o).sort((b,k)=>b.DateTime-k.DateTime),u=i.map(b=>({...b,DateTime:new Date(b.DateTime)})).filter(b=>b.DateTime<=o).sort((b,k)=>k.DateTime-b.DateTime),h=a.find(b=>b.EventType==="LowWater"),c=a.find(b=>b.EventType==="HighWater"),d=u[0],_=d?.EventType==="LowWater",m=document.createElement("div");m.className=`tide-status ${_?"is-rising":"is-falling"}`,m.innerHTML=`
    ${_?Xm():Km()}
    <span>${_?"Tide is rising":"Tide is falling"}</span>
  `,e.appendChild(m);const v=document.querySelector(".info-item.tide");v.classList.remove("rising","falling","filled"),v.offsetWidth,v.classList.add(_?"rising":"falling","filled"),[h,c].filter(Boolean).sort((b,k)=>b.DateTime-k.DateTime).slice(0,2).forEach((b,k)=>{const z=b.EventType==="LowWater"?"Low tide":"High tide",R=b.DateTime-o,I=Math.floor(R/(1e3*60*60)),N=Math.floor(R/(1e3*60)%60),Y=`${I}h ${N}m`,S=b.DateTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),O=document.createElement("div");O.classList.add("tide-block"),k===0&&O.classList.add("highlight"),O.innerHTML=`
      <div class="tide-row">
        <span class="tide-kind">${z}</span>
        <span class="tide-countdown">in ${Y}</span>
      </div>
      <time class="tide-time">at ${S}</time>
    `,e.appendChild(O)});const y=document.querySelector(".info-item.tide"),T=document.querySelector(".tide-clock-hand"),C=document.getElementById("tide-clock-caption");if(y&&T&&C&&d&&(h||c)){const b=_?c:h;if(b){const k=b.DateTime-d.DateTime,z=o-d.DateTime,R=Math.min(Math.max(z/k,0),1);let I;_?I=180+180*R:I=0+180*R,T.style.transform=`translate(-50%, -100%) rotate(${I%360}deg)`;const N=b.DateTime-o,Y=Math.max(0,Math.floor(N/(1e3*60*60))),S=Math.max(0,Math.floor(N/(1e3*60)%60)),O=`${Y}h ${S}m`,nt=b.EventType==="LowWater"?"low tide":"high tide";C.textContent=`${O} to ${nt}`;const U=document.getElementById("tide-clock-high-time"),W=document.getElementById("tide-clock-low-time");if(U&&W){const E=at=>at?at.DateTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--",q=c||u.find(at=>at.EventType==="HighWater"),H=h||u.find(at=>at.EventType==="LowWater"),st=_,lt=!_;U.textContent=lt?"":E(q),W.textContent=st?"":E(H),U.classList.toggle("tide-clock-time--hidden",lt),W.classList.toggle("tide-clock-time--hidden",st)}}}if(y&&!y.dataset.tideDetailsInit){const b=document.getElementById("tide-details-button"),k=document.getElementById("tide-back-button");if(b&&k){y.dataset.tideDetailsInit="true",y.classList.add("tide-details-enabled");const z=R=>{const I=y.querySelector(".card-header");if(I&&I.contains(R.target))return;const N=y.classList.toggle("is-flipped");b.setAttribute("aria-pressed",N?"true":"false")};y.addEventListener("click",z),b.addEventListener("click",R=>{R.stopPropagation(),z(R)}),k.addEventListener("click",R=>{R.stopPropagation(),z(R)})}}}function Xm(e=""){return`
    <svg viewBox="0 0 24 24" class="tide-arrow ${e}">
      <path d="M12 20V4M12 4L6 10M12 4l6 6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`}function Km(e=""){return`
    <svg viewBox="0 0 24 24" class="tide-arrow ${e}">
      <path d="M12 4v16M12 20l-6-6M12 20l6-6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`}function ka(e,i){const o=[],a=[1,2,3,3,2,1],u=[...e],h=new Date(i);h.setDate(h.getDate()-1);const c=new Date(i);if(c.setDate(c.getDate()+1),V.tideData[V.closestTideStation]&&u.push(...V.tideData[V.closestTideStation].map(m=>({...m,DateTime:new Date(m.DateTime)})).filter(m=>m.DateTime.toISOString().startsWith(h.toISOString().split("T")[0])||m.DateTime.toISOString().startsWith(c.toISOString().split("T")[0]))),u.sort((m,v)=>m.DateTime-v.DateTime),u.length===0)return o;const d=new Date(`${i}T00:00:00`);if(u[0].DateTime>d&&u.length>=2){const m=u[0],v=u.find(p=>p.DateTime<m.DateTime);if(v){const p=m.DateTime-v.DateTime,y=m.Height-v.Height,T=(d-v.DateTime)/p;o.push({DateTime:d,Height:v.Height+T*y})}}for(let m=0;m<u.length-1;m++){const v=u[m],p=u[m+1];v.DateTime instanceof Date||(v.DateTime=new Date(v.DateTime)),p.DateTime instanceof Date||(p.DateTime=new Date(p.DateTime));const y=(p.DateTime-v.DateTime)/6,T=p.Height-v.Height;o.push(v);let C=new Date(v.DateTime);a.forEach(b=>{const k=b/12*T;C=new Date(C.getTime()+y),o.push({DateTime:C,Height:o[o.length-1].Height+k})})}o.push(u[u.length-1]);const _=new Date(`${i}T23:59:59`);if(u[u.length-1].DateTime<_){const m=u[u.length-1];o.push({DateTime:_,Height:m.Height+.5})}return o.filter(m=>m.DateTime>=d&&m.DateTime<=_)}function Ir(){if(!V.selectedDate||!V.closestTideStation)return;const i=(V.tideData[V.closestTideStation]||[]).map(U=>({...U,DateTime:new Date(U.DateTime)})).filter(U=>U.DateTime.toISOString().startsWith(V.selectedDate));if(i.length===0)return;const o=ka(i,V.selectedDate),a=new Date(`${V.selectedDate}T03:00:00`),u=new Date(`${V.selectedDate}T21:00:00`),h=o.filter(U=>U.DateTime>=a&&U.DateTime<=u);if(h.length<2)return;const c=document.getElementById("tide-chart-container"),d={top:10,right:14,bottom:34,left:34},_=c.offsetWidth-d.left-d.right,m=210,v=sn("--color-chart-line","#90caf9"),p=sn("--color-chart-line","#90caf9"),y=sn("--color-chart-axis","#c6d5ea"),T=sn("--color-chart-grid","rgba(198, 213, 234, 0.22)"),C=sn("--color-text","#ffffff"),b=$m().domain([a,u]).range([0,_]),k=_a().domain([0,4.5]).range([m,0]);Vi("#tide-chart-container").html("");const z=Vi("#tide-chart-container").append("svg").attr("width",_+d.left+d.right).attr("height",m+d.top+d.bottom).attr("role","img").attr("aria-label","Tide height chart for the selected day").append("g").attr("transform",`translate(${d.left},${d.top})`),I=z.append("defs").append("linearGradient").attr("id","tide-area-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");I.append("stop").attr("offset","0%").attr("stop-color",p).attr("stop-opacity",.2),I.append("stop").attr("offset","100%").attr("stop-color",p).attr("stop-opacity",0);const N=Ca().x(U=>b(U.DateTime)).y(U=>k(U.Height)).curve(Cs),Y=qm().x(U=>b(U.DateTime)).y0(k(0)).y1(U=>k(U.Height)).curve(Cs);z.append("path").datum(h).attr("fill","url(#tide-area-gradient)").attr("d",Y),z.append("path").datum(h).attr("fill","none").attr("stroke",v).attr("stroke-width",3).attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("d",N);const S=z.append("g").attr("transform",`translate(0,${m})`).call(Il(b).ticks(ci.every(6)).tickFormat(U=>`${String(U.getHours()).padStart(2,"0")}:00`)),O=z.append("g").call(Vo(k).ticks(3).tickFormat(U=>`${U.toFixed(1)}m`));S.selectAll("path, line").attr("stroke",y),S.selectAll("text").attr("fill",y),O.selectAll("path, line").attr("stroke",y),O.selectAll("text").attr("fill",y),S.selectAll("text").attr("font-size","11px").attr("font-weight","500"),O.selectAll("text").attr("font-size","11px").attr("font-weight","500"),S.select(".domain").attr("stroke-opacity",.35),O.select(".domain").attr("stroke-opacity",0),O.selectAll(".tick line").attr("stroke-opacity",0),z.append("g").attr("class","tide-grid").call(Vo(k).ticks(3).tickSize(-_).tickFormat("")).selectAll("line").attr("stroke",T).attr("stroke-dasharray","1,7").attr("stroke-opacity",.5),z.select(".tide-grid path").attr("stroke","none");const ot=Vi("#tide-chart-container").append("div").attr("class","tooltip").style("position","absolute").style("display","none").style("pointer-events","none"),nt=z.append("circle").attr("r",4).attr("fill",C).style("filter",`drop-shadow(0px 0px 6px ${C})`).style("display","none");z.append("rect").attr("width",_).attr("height",m).attr("fill","transparent").on("mousemove",function(U){const[W]=pc(U),E=b.invert(W),q=h.reduce((H,st)=>Math.abs(st.DateTime-E)<Math.abs(H.DateTime-E)?st:H);nt.attr("cx",b(q.DateTime)).attr("cy",k(q.Height)).style("display","block"),ot.html(`<strong>${Dr("%H:%M")(q.DateTime)}</strong><br>Height: ${q.Height.toFixed(2)}m`).style("left",U.pageX+10+"px").style("top",U.pageY-30+"px").style("display","block")}).on("mouseout",function(){nt.style("display","none"),ot.style("display","none")})}function Jm(e){return Number.isFinite(e)?e<=2?"Low":e<=5?"Moderate":e<=7?"High":e<=10?"Very High":"Extreme":""}const jm={0:["Clear",""],1:["Mainly clear",""],2:["Partly cloudy",""],3:["Overcast",""],45:["Fog",""],48:["Rime fog",""],51:["Light drizzle",""],53:["Moderate drizzle",""],55:["Dense drizzle",""],56:["Light freezing drizzle",""],57:["Dense freezing drizzle",""],61:["Slight rain",""],63:["Moderate rain",""],65:["Heavy rain",""],66:["Light freezing rain",""],67:["Heavy freezing rain",""],71:["Slight snow",""],73:["Moderate snow",""],75:["Heavy snow",""],77:["Snow grains",""],80:["Slight rain showers",""],81:["Moderate rain showers",""],82:["Violent rain showers",""],85:["Slight snow showers",""],86:["Heavy snow showers",""],95:["Thunderstorm",""],96:["Thunderstorm with slight hail",""],99:["Thunderstorm with heavy hail",""]};async function Qm(e){if(!e?.coords)return;const i=e.coords[0],o=e.coords[1];try{const u=await(await pr(`https://api.open-meteo.com/v1/forecast?latitude=${i}&longitude=${o}&hourly=temperature_2m,weathercode,wind_speed_10m,precipitation_probability,relative_humidity_2m,uv_index&current_weather=true`)).json(),h=u.current_weather,c=u.hourly,d=new Date(h.time);let _=0,m=1/0;c.time.forEach((q,H)=>{const st=Math.abs(new Date(q)-d);st<m&&(m=st,_=H)});const v=h.temperature??"--",p=h.windspeed??"--",y=parseFloat(p)||0;V.currentWindSpeed=y;const T=typeof h.winddirection=="number"&&Number.isFinite(h.winddirection)?h.winddirection:null;V.currentWindDirectionDeg=T;const C=c.precipitation_probability?.[_]??"--",b=c.relative_humidity_2m?.[_]??"--",k=c.uv_index?.[_]??"--",z=h.weathercode,[R,I]=jm[z]||["Unknown",""];document.getElementById("weather-icon").textContent=I,document.getElementById("weather-temp-big").textContent=v,document.getElementById("weather-condition-text").textContent=R,document.getElementById("weather-rain").textContent=`${C}%`,document.getElementById("weather-humidity").textContent=`${b}%`,document.getElementById("weather-wind").textContent=`${p} km/h`;const N=document.getElementById("weather-box");let Y="cloudy";z===0||z===1?Y="sunny":z===2?Y="cloudy":z===3||z===45||z===48?Y="overcast":z===51||z===53||z===55?Y="drizzle":Y="rainy",N&&(N.classList.remove("weather-sunny","weather-cloudy","weather-overcast","weather-rainy","weather-drizzle"),N.classList.add(`weather-${Y}`)),Es(Y);const S=document.getElementById("wind-level"),O=document.querySelector(".wind-gust");if(S){let q="Calm breeze";y>=35?q="Very windy":y>=20?q="Breezy":y>=10&&(q="Light breeze"),S.textContent=q}const ot=document.querySelector(".wind-arrow-icon");if(ot&&(y>=20?ot.textContent="":y<=5?ot.textContent="":ot.textContent=""),O){const q=Math.max(1.4,3.2-Math.min(y,40)/18);O.style.setProperty("--wind-gust-duration",`${q}s`),O.style.opacity=y<3?"0.45":"1"}const nt=parseFloat(k),U=document.getElementById("uv-index-value"),W=document.getElementById("uv-level"),E=document.getElementById("uv-bar-fill");if(U&&W){U.textContent=Number.isFinite(nt)?nt.toFixed(1):"--";const q=Jm(nt);W.textContent=q}if(E){const q=Number.isFinite(nt)?Math.min(100,nt/11*100):0;E.style.width=`${100-q}%`}}catch{document.getElementById("weather-condition-text").textContent="Weather unavailable",document.getElementById("weather-rain").textContent="--%",document.getElementById("weather-humidity").textContent="--%",document.getElementById("weather-wind").textContent="-- km/h";const u=document.getElementById("wind-level"),h=document.querySelector(".wind-gust"),c=document.getElementById("uv-index-value"),d=document.getElementById("uv-level");u&&(u.textContent="Wind data unavailable"),h&&(h.style.setProperty("--wind-gust-duration","3.2s"),h.style.opacity="0.45"),c&&(c.textContent="--"),d&&(d.textContent="");const _=document.getElementById("uv-bar-fill");_&&(_.style.width="100%"),Es(null)}}function Es(e){const i=document.getElementById("weather-box");if(!i)return;const o=i.querySelector(".weather-rain.front-row"),a=i.querySelector(".weather-rain.back-row");if(!o||!a||(o.innerHTML="",a.innerHTML="",e!=="rainy"&&e!=="drizzle"))return;let u=0;const h=55,c=e==="drizzle"?1.8:1;for(;u<h;){const d=Math.floor(Math.random()*98)+1,_=Math.floor(Math.random()*3)+3;if(u+=_*c,u>h)break;const m=`0.${d}s`,v=`0.5${d}s`,p=()=>{const C=document.createElement("div");C.className="weather-drop",C.style.animationDelay=m,C.style.animationDuration=v;const b=document.createElement("div");b.className="weather-stem",b.style.animationDelay=m,b.style.animationDuration=v;const k=document.createElement("div");return k.className="weather-splat",k.style.animationDelay=m,k.style.animationDuration=v,C.appendChild(b),C.appendChild(k),C},y=p();y.style.left=`${u}%`,y.style.bottom=`${100+_*2}%`,o.appendChild(y);const T=p();T.style.right=`${u}%`,T.style.bottom=`${100+_*2}%`,a.appendChild(T)}}const t_="8f563c2a34086b0f41340a3b1526ea4f",e_={Sandown:80,Shanklin:80,Ventnor:80,"Compton Bay":80,"East Cowes":80,"Osborne Bay":80,"Ryde Beach":80,"Appley Beach":80,"Seagrove Bay":80,"Sandown Bay":80},n_=87;async function i_(e){if(!e)return;const i=e_[e.name]??n_;try{const o=`https://coastalmonitoring.org/observations/waves/latest?key=${t_}&sensor=${i}`,u=await(await pr(o)).text(),c=new DOMParser().parseFromString(u,"application/xml"),d=c.querySelector("ms\\:hs, hs"),_=c.querySelector("ms\\:hmax, hmax"),m=c.querySelector("ms\\:tp, tp"),v=c.querySelector("ms\\:tz, tz"),p=c.querySelector("ms\\:pdir, pdir"),y=c.querySelector("ms\\:spread, spread"),T=c.querySelector("ms\\:te, te"),C=c.querySelector("ms\\:sst, sst"),b=c.querySelector("ms\\:power, power"),k=parseFloat(d?.textContent??"0")||0,z=parseFloat(_?.textContent??"0")||0,R=parseFloat(m?.textContent??"0")||0,I=parseFloat(v?.textContent??"0")||0,N=parseFloat(p?.textContent??"0")||0,Y=parseFloat(y?.textContent??"0")||0,S=parseFloat(T?.textContent??"0")||0,O=parseFloat(C?.textContent??"0")||0,ot=parseFloat(b?.textContent??"")||null;V.currentWaveHeight=k,V.currentSeaTemperature=O,V.currentWavePeriod=R||I||0,V.currentWavePower=ot,r_(k,R);const nt=document.getElementById("wave-height"),U=document.getElementById("wave-tp");nt&&(nt.textContent=`${k.toFixed(2)} m`),U&&(U.textContent=R?`${R.toFixed(1)} s`:"--");const W=Math.min(k/2.5,1)*100,E=document.getElementById("wave-fill");E&&(E.style.height=`${W}%`);let q="Calm";k>1.2?q="Rough waves ":k>.6?q="Moderate surf":k>.3&&(q="Gentle waves");const H=document.getElementById("wave-description");H&&(H.textContent=q);const st=document.getElementById("sea-temp-value");st&&O&&(st.textContent=`${O.toFixed(1)} C`);const lt=document.getElementById("wave-details"),at=document.getElementById("wave-details-button"),Z=document.getElementById("wave-back-button"),gt=document.getElementById("wave-box");if(lt&&at&&Z&&gt&&(lt.innerHTML=`
        <div class="wave-details-grid">
          <div class="wave-detail">
            <span class="wave-detail-label">Hmax</span>
            <span class="wave-detail-value">${z?z.toFixed(2)+" m":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Tz</span>
            <span class="wave-detail-value">${I?I.toFixed(1)+" s":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Dir</span>
            <span class="wave-detail-value">${N?Math.round(N)+"":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Spread</span>
            <span class="wave-detail-value">${Y?Math.round(Y)+"":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Te</span>
            <span class="wave-detail-value">${S?S.toFixed(1)+" s":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">SST</span>
            <span class="wave-detail-value">${O?O.toFixed(1)+" C":"--"}</span>
          </div>
          <div class="wave-detail">
            <span class="wave-detail-label">Power</span>
            <span class="wave-detail-value">${ot!=null?ot.toFixed(1)+" kW/m":"--"}</span>
          </div>
        </div>
      `,!gt.dataset.waveDetailsInit)){gt.dataset.waveDetailsInit="true",gt.classList.add("wave-details-enabled");const B=et=>{const vt=gt.querySelector(".card-header");if(vt&&vt.contains(et.target))return;const wt=gt.classList.toggle("is-flipped");at.setAttribute("aria-pressed",wt?"true":"false")};gt.addEventListener("click",B),at.addEventListener("click",et=>{et.stopPropagation(),B(et)}),Z.addEventListener("click",et=>{et.stopPropagation(),B(et)})}}catch{V.currentWavePower=null;const a=document.getElementById("wave-description"),u=document.getElementById("wave-tp");a&&(a.textContent="Unavailable"),u&&(u.textContent="--")}}function r_(e,i){const o=Math.max(2.2,Math.min(e*6,8)),a=3.5,u=28,c=`
    <svg viewBox="0 0 120 ${u}" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 ${a}
        C 16 ${Math.max(.2,a-o)}, 44 ${a+o*.45}, 60 ${a}
        C 76 ${Math.max(.2,a-o)}, 104 ${a+o*.45}, 120 ${a}
        V${u} H0 Z"
        fill="#778ba5" fill-opacity="1"/>
    </svg>`,d=`data:image/svg+xml;utf8,${encodeURIComponent(c)}`,_=document.getElementById("wave-fill");if(_){_.style.setProperty("--wave-svg",`url("${d}")`);const m=i&&isFinite(i)?i:6,v=Math.max(3,Math.min(m*1.1,14));_.style.setProperty("--wave-speed-1",`${v}s`),_.style.setProperty("--wave-speed-2",`${(v*1.6).toFixed(1)}s`)}}const Aa="stw-favourites",Da="stw-theme",Ia="stw-collapsibles";function o_(){const e=localStorage.getItem(Da);return e==="light"||e==="dark"?e:"light"}function s_(e){const i=document.getElementById("theme-toggle");if(!i)return;const o=e==="light";i.setAttribute("aria-pressed",String(o));const u=`Switch to ${o?"dark mode":"light mode"}`;i.setAttribute("aria-label",u),i.setAttribute("title",u),i.textContent=o?"":""}function ks(e){document.documentElement.setAttribute("data-theme",e),s_(e)}function a_(e){const i=document.getElementById("theme-toggle");if(!i)return"dark";const o=o_();return ks(o),e&&e(o),i.addEventListener("click",()=>{const u=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";localStorage.setItem(Da,u),ks(u),e&&e(u)}),o}function Br(){try{const e=localStorage.getItem(Ia);return e?JSON.parse(e):{}}catch{return{}}}function Ba(e,i){const o=Br();o[e]=i,localStorage.setItem(Ia,JSON.stringify(o))}function u_(){const e=Br();document.querySelectorAll("[data-collapsible-toggle]").forEach(o=>{const a=o.getAttribute("aria-controls"),u=a?document.getElementById(a):null,h=o.closest(".collapsible-card");if(!u||!h)return;const c=m=>{o.setAttribute("aria-expanded",String(m)),u.classList.toggle("collapsed",!m),h.classList.toggle("is-collapsed",!m),a&&Ba(a,m)},d=e[a],_=d!==void 0?d:o.getAttribute("aria-expanded")!=="false";c(_),o.addEventListener("click",()=>{const m=o.getAttribute("aria-expanded")==="true";c(!m)})})}function l_(){const e=document.getElementById("favourite-toggle");e.addEventListener("click",()=>{const i=V.selectedBeach;if(!i)return;const o=zr(),a=o.indexOf(i.name);a>=0?o.splice(a,1):o.push(i.name),localStorage.setItem(Aa,JSON.stringify(o)),Oa(i.name),e.classList.add("bounce"),setTimeout(()=>e.classList.remove("bounce"),400),za()})}let Vn=null;function h_(e,i){Vn={beaches:e,onSelectBeach:i},za()}function c_(){const e=document.getElementById("beach-tags-toggle"),i=document.querySelector(".beach-description-card"),o=document.getElementById("beach-description");if(!e||!i||!o)return;const a="beach-description",u=Br(),h=m=>{e.setAttribute("aria-expanded",String(m)),e.setAttribute("aria-label",m?"Hide beach details":"Show beach details"),o.classList.toggle("collapsed",!m),i.classList.toggle("is-collapsed",!m),Ba(a,m)},c=Object.prototype.hasOwnProperty.call(u,a),d=u[a],_=c?d:!0;h(_),!c&&_&&e.classList.add("pulse"),e.addEventListener("click",()=>{e.classList.remove("pulse");const m=e.getAttribute("aria-expanded")==="true";h(!m)})}function zr(){try{return JSON.parse(localStorage.getItem(Aa)||"[]")}catch{return[]}}function za(){if(!Vn)return;const e=document.getElementById("favourites-bar");if(!e)return;const i=zr();if(e.innerHTML="",!i.length){const o=document.createElement("div");o.className="favourites-empty",o.textContent="Tap the heart to add favourites",e.appendChild(o);return}i.forEach(o=>{const a=Vn.beaches.find(h=>h.name===o);if(!a)return;const u=document.createElement("button");u.type="button",u.className="favourite-pill",u.textContent=o,V.selectedBeach&&V.selectedBeach.name===o&&u.classList.add("is-active"),u.addEventListener("click",()=>{Vn.onSelectBeach(a);const h=document.getElementById("favourites-bar");h&&h.querySelectorAll(".favourite-pill").forEach(c=>c.classList.toggle("is-active",c===u))}),e.appendChild(u)})}function Oa(e){const i=document.getElementById("favourite-toggle"),o=zr().includes(e);i.classList.toggle("favourited",o),i.setAttribute("aria-pressed",String(o)),i.textContent=o?"":""}function er(e){const i=V.selectedBeach,o=V.tideData[V.closestTideStation]||[],a=document.getElementById("beach-media"),u=document.getElementById("beach-description-text"),h=document.getElementById("beach-conditions");if(!a||!u||!h||!i)return;const c=e[i.name]||{};a.innerHTML="",c.video?f_(a,c,i.name):c.image?d_(a,c,i.name):m_(a),__(u,h,c,o),p_(c,i.name)}function f_(e,i,o){e._swapTimeout&&(clearTimeout(e._swapTimeout),e._swapTimeout=null);let a=null;if(i.image)a=document.createElement("img"),a.src=i.image,a.alt=o+" photo",e.appendChild(a),requestAnimationFrame(()=>a.classList.add("show"));else{const d=document.createElement("div");d.style.background="#0f0f0f",e.appendChild(d),requestAnimationFrame(()=>d.classList.add("show"))}const u=/youtube\.com|youtu\.be|vimeo\.com/i.test(i.video);let h;if(u){const d=i.video+(i.video.includes("?")?"&":"?")+"rel=0&modestbranding=1&controls=1&playsinline=1",_=document.createElement("iframe");_.src=d,_.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",_.referrerPolicy="strict-origin-when-cross-origin",_.allowFullscreen=!0,_.title=`${o} beach video`,h=_}else{const d=document.createElement("video");d.src=i.video,d.playsInline=!0,d.controls=!0,h=d}e.appendChild(h);const c=()=>{requestAnimationFrame(()=>{h.classList.add("show"),a?a.classList.remove("show"):e.firstChild&&e.firstChild!==h&&e.firstChild.classList.remove("show"),setTimeout(()=>{[...e.children].forEach(d=>{d!==h&&!d.classList.contains("show")&&d.remove()})},600)})};e._swapTimeout=setTimeout(()=>{if(u)c();else if(h.tagName==="VIDEO"){const d=setTimeout(c,800);h.addEventListener("canplay",()=>{clearTimeout(d),c()},{once:!0})}else c()},3700)}function d_(e,i,o){const a=document.createElement("img");a.src=i.image,a.alt=o+" photo",e.appendChild(a),requestAnimationFrame(()=>a.classList.add("show"))}function m_(e){const i=document.createElement("div");i.textContent="No media available",i.style.color="#666",i.style.padding="20px",e.appendChild(i),requestAnimationFrame(()=>i.classList.add("show"))}function __(e,i,o,a){const u=new Date,h=a.map(W=>({...W,DateTime:new Date(W.DateTime)})).filter(W=>W.DateTime.toISOString().startsWith(V.selectedDate));let c="--";if(h.length>0){const W=ka(h,V.selectedDate);if(W.length>0){let E=0,q=1/0;W.forEach((Z,gt)=>{const B=Math.abs(Z.DateTime-u);B<q&&(q=B,E=gt)});const H=W[E];c=H?.Height?.toFixed(2)??"--";const st=W[Math.min(E+1,W.length-1)],lt=W[Math.max(E-1,0)],at=st&&st.DateTime>H.DateTime?st:lt;at&&typeof at.Height=="number"&&typeof H.Height=="number"&&(at.Height>H.Height||at.Height<H.Height)}}const d=V.currentWindSpeed||0,_=V.currentWaveHeight||0,m=V.currentSeaTemperature||0,v=V.currentWavePeriod||0,p=V.currentWindDirectionDeg;let y="--";if(typeof p=="number"&&Number.isFinite(p)){const W=["N","NE","E","SE","S","SW","W","NW"],E=Math.round(p%360/45)%8;y=W[E]}let T="decent for swimming";d>15||_>1.2?T="probably rough for swimming":d<5&&parseFloat(c)>1&&_<.3&&(T="ideal for a swim");const C=o?.text??"No description available for this beach.";e.textContent=C;const b=document.getElementById("cond-tide"),k=document.getElementById("cond-waves"),z=document.getElementById("cond-waves-period"),R=document.getElementById("cond-waves-power"),I=document.getElementById("cond-sea-temp"),N=document.getElementById("cond-wind"),Y=document.getElementById("cond-wind-arrow"),S=document.getElementById("cond-wind-dir-text"),O=document.getElementById("cond-eval");b&&(b.textContent=`${c} m`);const ot=document.getElementById("cond-tide-next"),nt=document.getElementById("cond-tide-arrow");if(ot&&h.length>0){const W=V.selectedDate,q=a.map(H=>({...H,DateTime:new Date(H.DateTime)})).filter(H=>H.DateTime.toISOString().startsWith(W)&&H.DateTime>u&&(H.EventType==="HighWater"||H.EventType==="LowWater")).sort((H,st)=>H.DateTime-st.DateTime)[0];if(q){const H=q.DateTime-u,st=Math.max(0,Math.floor(H/(1e3*60*60))),lt=Math.max(0,Math.floor(H/(1e3*60)%60)),at=st.toString(),Z=lt.toString().padStart(2,"0");ot.textContent=`${at}h ${Z}m`,nt&&(nt.textContent=q.EventType==="LowWater"?"":"")}else ot.textContent="--",nt&&(nt.textContent="")}k&&(k.textContent=`${_.toFixed(1)} m`),z&&(z.textContent=v?`${v.toFixed(1)} s`:"-- s");const U=V.currentWavePower;R&&(R.textContent=U!=null?`${U.toFixed(1)} kW/m`:"-- kW/m"),I&&(I.textContent=m?`${m.toFixed(1)} C`:"-- C"),N&&(N.textContent=`${d.toFixed(0)} km/h`),Y&&typeof p=="number"&&Number.isFinite(p)&&Y.style.setProperty("--wind-direction-deg",`${p}deg`),S&&(S.textContent=y),O&&(O.textContent=T==="ideal for a swim"?"Ideal for a swim":T==="probably rough for swimming"?"Rough for swimming":"Decent for swimming",O.classList.remove("condition-eval--ok","condition-eval--caution","condition-eval--rough"),T==="ideal for a swim"?O.classList.add("condition-eval--ok"):T==="probably rough for swimming"?O.classList.add("condition-eval--rough"):O.classList.add("condition-eval--caution"))}function p_(e,i){const o=document.getElementById("beach-tags");if(!o)return;const u=(e?.text??i??"Beach details").toLowerCase(),h={Sandown:["sandy","swimming","family"],Shanklin:["golden","esplanade","cliffs"],Ventnor:["sheltered","cliffs","warm"],"Compton Bay":["wild","surf","fossils"],Totland:["quiet","views","sunset"],"Colwell Bay":["calm","family","sunset"],"Gurnard Bay":["quiet","sailing","views"]}[i];let c;h?c=h:c=u.replace(/[^a-z\s]/g,"").split(/\s+/).filter(Boolean).slice(0,3),c.length?o.textContent=c.join("  "):o.textContent="Beach  details"}const g_=[{name:"Sandown",coords:[50.651659,-1.160827]},{name:"Shanklin",coords:[50.627777,-1.177225]},{name:"Ventnor",coords:[50.594139,-1.208685]},{name:"Compton Bay",coords:[50.65481,-1.467071]},{name:"Totland",coords:[50.682695,-1.544676]},{name:"Colwell Bay",coords:[50.693213,-1.534249]},{name:"Gurnard Bay",coords:[50.76263,-1.324066]},{name:"East Cowes",coords:[50.759,-1.289]},{name:"Osborne Bay",coords:[50.755122,-1.255789]},{name:"Ryde Beach",coords:[50.731372,-1.149723]},{name:"Appley Beach",coords:[50.727313,-1.138162]},{name:"Seagrove Bay",coords:[50.717,-1.111]}],v_={Ryde:[50.729486,-1.16245],"Bembridge Approach":[50.685,-1.073],"Totland Bay":[50.682695,-1.544676],Cowes:[50.763,-1.298],Sandown:[50.651659,-1.160827],Yarmouth:[50.705,-1.5],Ventnor:[50.594139,-1.208685],"Freshwater Bay":[50.668,-1.526],Foreland:[50.685,-1.085]},y_={Sandown:{image:"https://lh5.googleusercontent.com/p/AF1QipNTDVuQN1X-pRhtDOvkzgH88J6pzXJuqDTnaVEv=w408-h544-k-no",video:"https://www.youtube.com/embed/zITv7NFN0HI?si=xfSA1IfC7Ofm0WbJ&autoplay=1&mute=1&rel=1&modestbranding=1&controls=0&showinfo=0",text:"A long sandy beach popular for swimming and family fun, backed by a traditional promenade."},Shanklin:{text:"Charming seafront with golden sands, a Victorian esplanade, and dramatic cliffs."},Ventnor:{text:"A sheltered south-facing beach beneath steep cliffs, with a Victorian seaside character and some of the warmest waters on the island."},"Compton Bay":{text:"A dramatic sweep of sand backed by crumbling clay cliffs, popular with surfers and fossil hunters. One of the island's most unspoilt beaches."},Totland:{text:"A peaceful pebble-and-sand beach at the western tip of the island, with views towards the Needles and Hurst Castle."},"Colwell Bay":{text:"A family-friendly bay with a mix of sand and shingle, offering calm waters and fine sunset views across the Solent."},"Gurnard Bay":{text:"A quiet village beach on the north coast, popular with dinghy sailors, with views across the Solent to the mainland."},"East Cowes":{text:"A small beach near the historic Osborne House, with views of the busy Solent shipping lanes and the Cowes waterfront."},"Osborne Bay":{text:"A secluded pebbly beach on the grounds of Queen Victoria's former residence, accessible from the coastal path."},"Ryde Beach":{text:"One of the island's longest sandy beaches, stretching from the pier eastward, with excellent facilities and shallow paddling waters."},"Appley Beach":{text:"A sandy beach east of Ryde, recognisable by its distinctive Appley Tower. A quieter alternative to busy Ryde Beach."},"Seagrove Bay":{text:"A small, sheltered bay near Bembridge, offering calm swimming and a relaxed atmosphere away from the busier resorts."}},w_={beaches:g_,tideStations:v_,descriptions:y_},{beaches:As,tideStations:Ds,descriptions:nr}=w_;function x_(e){V.selectedBeach=e,V.closestTideStation=al(e.coords,Ds),document.getElementById("selected-beach-name").textContent=e.name;const i=Ds[V.closestTideStation];i&&gl(i),Oa(e.name),Ea(),Ir(),er(nr),Qm(e).then(()=>er(nr)),i_(e).then(()=>er(nr))}const Is=Bs(x_,150);function T_(){Ea(),Ir()}async function b_(){ml(),a_(_l),u_(),l_(),c_();try{await Ym()}catch{document.getElementById("tide-box").innerHTML='<div class="loading-skeleton">Failed to load tide data. Please refresh the page.</div>'}Gm(T_),pl(As,Is),h_(As,Is),window.addEventListener("resize",Bs(Ir,250))}document.addEventListener("DOMContentLoaded",b_);
